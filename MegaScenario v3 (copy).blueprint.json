{
    "name": "MegaScenario v3 (copy)",
    "flow": [
        {
            "id": 1,
            "module": "google-sheets:filterRows",
            "version": 2,
            "parameters": {
                "__IMTCONN__": 6927252
            },
            "mapper": {
                "from": "drive",
                "limit": "4",
                "filter": [
                    [
                        {
                            "a": "A",
                            "b": "0",
                            "o": "number:greater"
                        }
                    ]
                ],
                "sheetId": "LP/C_Input",
                "sortOrder": "asc",
                "spreadsheetId": "1p6T6-2ViDV-IGcZSVPL4ExnFiugm5oCzfU1febD3A6g",
                "tableFirstRow": "A1:CZ1",
                "includesHeaders": true,
                "valueRenderOption": "FORMATTED_VALUE",
                "dateTimeRenderOption": "FORMATTED_STRING"
            },
            "metadata": {
                "designer": {
                    "x": 0,
                    "y": 0
                },
                "restore": {
                    "expect": {
                        "from": {
                            "label": "Select from My Drive"
                        },
                        "orderBy": {
                            "mode": "chose"
                        },
                        "sheetId": {
                            "mode": "chose",
                            "label": "LP/C_Input"
                        },
                        "sortOrder": {
                            "mode": "chose",
                            "label": "Ascending"
                        },
                        "spreadsheetId": {
                            "mode": "chose",
                            "label": "T10_1_master_simSilviu"
                        },
                        "tableFirstRow": {
                            "label": "A-CZ"
                        },
                        "includesHeaders": {
                            "mode": "chose",
                            "label": "Yes"
                        },
                        "valueRenderOption": {
                            "mode": "chose",
                            "label": "Formatted value"
                        },
                        "dateTimeRenderOption": {
                            "mode": "chose",
                            "label": "Formatted string"
                        }
                    },
                    "parameters": {
                        "__IMTCONN__": {
                            "data": {
                                "scoped": "true",
                                "connection": "google"
                            },
                            "label": "My Google connection (lucascaves11@gmail.com)"
                        }
                    }
                },
                "parameters": [
                    {
                        "name": "__IMTCONN__",
                        "type": "account:google",
                        "label": "Connection",
                        "required": true
                    }
                ],
                "expect": [
                    {
                        "name": "from",
                        "type": "select",
                        "label": "Search Method",
                        "required": true,
                        "validate": {
                            "enum": [
                                "drive",
                                "share"
                            ]
                        }
                    },
                    {
                        "name": "valueRenderOption",
                        "type": "select",
                        "label": "Value render option",
                        "validate": {
                            "enum": [
                                "FORMATTED_VALUE",
                                "UNFORMATTED_VALUE",
                                "FORMULA"
                            ]
                        }
                    },
                    {
                        "name": "dateTimeRenderOption",
                        "type": "select",
                        "label": "Date and time render option",
                        "validate": {
                            "enum": [
                                "SERIAL_NUMBER",
                                "FORMATTED_STRING"
                            ]
                        }
                    },
                    {
                        "name": "limit",
                        "type": "uinteger",
                        "label": "Limit"
                    },
                    {
                        "name": "spreadsheetId",
                        "type": "select",
                        "label": "Spreadsheet ID",
                        "required": true
                    },
                    {
                        "name": "sheetId",
                        "type": "select",
                        "label": "Sheet Name",
                        "required": true
                    },
                    {
                        "name": "includesHeaders",
                        "type": "select",
                        "label": "Table contains headers",
                        "required": true,
                        "validate": {
                            "enum": [
                                true,
                                false
                            ]
                        }
                    },
                    {
                        "name": "tableFirstRow",
                        "type": "select",
                        "label": "Column range",
                        "required": true,
                        "validate": {
                            "enum": [
                                "A1:Z1",
                                "A1:BZ1",
                                "A1:CZ1",
                                "A1:DZ1",
                                "A1:MZ1",
                                "A1:ZZ1",
                                "A1:AZZ1",
                                "A1:BZZ1",
                                "A1:CZZ1",
                                "A1:DZZ1",
                                "A1:MZZ1",
                                "A1:ZZZ1"
                            ]
                        }
                    },
                    {
                        "name": "filter",
                        "type": "filter",
                        "label": "Filter",
                        "options": "rpc://google-sheets/2/rpcGetFilterKeys?includesHeaders=true"
                    },
                    {
                        "name": "orderBy",
                        "type": "select",
                        "label": "Order by"
                    },
                    {
                        "name": "sortOrder",
                        "type": "select",
                        "label": "Sort order",
                        "validate": {
                            "enum": [
                                "asc",
                                "desc"
                            ]
                        }
                    }
                ],
                "interface": [
                    {
                        "name": "__IMTLENGTH__",
                        "type": "uinteger",
                        "label": "Total number of bundles"
                    },
                    {
                        "name": "__IMTINDEX__",
                        "type": "uinteger",
                        "label": "Bundle order position"
                    },
                    {
                        "name": "__ROW_NUMBER__",
                        "type": "number",
                        "label": "Row number"
                    },
                    {
                        "name": "__SPREADSHEET_ID__",
                        "type": "text",
                        "label": "Spreadsheet ID"
                    },
                    {
                        "name": "__SHEET__",
                        "type": "text",
                        "label": "Sheet"
                    },
                    {
                        "name": "0",
                        "type": "text",
                        "label": "LeadNumber (A)"
                    },
                    {
                        "name": "1",
                        "type": "text",
                        "label": "TargetID (B)"
                    },
                    {
                        "name": "2",
                        "type": "text",
                        "label": "firstName (C)"
                    },
                    {
                        "name": "3",
                        "type": "text",
                        "label": "lastName (D)"
                    },
                    {
                        "name": "4",
                        "type": "text",
                        "label": "personTitle (E)"
                    },
                    {
                        "name": "5",
                        "type": "text",
                        "label": "personTitleDescription (F)"
                    },
                    {
                        "name": "6",
                        "type": "text",
                        "label": "personSummary (G)"
                    },
                    {
                        "name": "7",
                        "type": "text",
                        "label": "personLocation (H)"
                    },
                    {
                        "name": "8",
                        "type": "text",
                        "label": "durationInRole (I)"
                    },
                    {
                        "name": "9",
                        "type": "text",
                        "label": "durationInCompany (J)"
                    },
                    {
                        "name": "10",
                        "type": "text",
                        "label": "personTimestamp (K)"
                    },
                    {
                        "name": "11",
                        "type": "text",
                        "label": "personLinkedinUrl (L)"
                    },
                    {
                        "name": "12",
                        "type": "text",
                        "label": "personSalesUrl (M)"
                    },
                    {
                        "name": "13",
                        "type": "text",
                        "label": "email (N)"
                    },
                    {
                        "name": "14",
                        "type": "text",
                        "label": "email_validation (O)"
                    },
                    {
                        "name": "15",
                        "type": "text",
                        "label": "ScrapSN (P)"
                    },
                    {
                        "name": "16",
                        "type": "text",
                        "label": "companyName (Q)"
                    },
                    {
                        "name": "17",
                        "type": "text",
                        "label": "companyDescription (R)"
                    },
                    {
                        "name": "18",
                        "type": "text",
                        "label": "companyTagLine (S)"
                    },
                    {
                        "name": "19",
                        "type": "text",
                        "label": "industry (T)"
                    },
                    {
                        "name": "20",
                        "type": "text",
                        "label": "employeeCount (U)"
                    },
                    {
                        "name": "21",
                        "type": "text",
                        "label": "companyLocation (V)"
                    },
                    {
                        "name": "22",
                        "type": "text",
                        "label": "website (W)"
                    },
                    {
                        "name": "23",
                        "type": "text",
                        "label": "domain (X)"
                    },
                    {
                        "name": "24",
                        "type": "text",
                        "label": "yearFounded (Y)"
                    },
                    {
                        "name": "25",
                        "type": "text",
                        "label": "specialties (Z)"
                    },
                    {
                        "name": "26",
                        "type": "text",
                        "label": "phone (AA)"
                    },
                    {
                        "name": "27",
                        "type": "text",
                        "label": "minRevenue (AB)"
                    },
                    {
                        "name": "28",
                        "type": "text",
                        "label": "maxRevenue (AC)"
                    },
                    {
                        "name": "29",
                        "type": "text",
                        "label": "growth6Mth (AD)"
                    },
                    {
                        "name": "30",
                        "type": "text",
                        "label": "growth1Yr (AE)"
                    },
                    {
                        "name": "31",
                        "type": "text",
                        "label": "growth2Yr (AF)"
                    },
                    {
                        "name": "32",
                        "type": "text",
                        "label": "companyTimestamp (AG)"
                    },
                    {
                        "name": "33",
                        "type": "text",
                        "label": "linkedInCompanyUrl (AH)"
                    },
                    {
                        "name": "34",
                        "type": "text",
                        "label": "salesNavigatorCompanyUrl (AI)"
                    },
                    {
                        "name": "35",
                        "type": "text",
                        "label": "vertical_filter (AJ)"
                    },
                    {
                        "name": "36",
                        "type": "text",
                        "label": "coreBusiness_filter (AK)"
                    },
                    {
                        "name": "37",
                        "type": "text",
                        "label": "fit (AL)"
                    },
                    {
                        "name": "38",
                        "type": "text",
                        "label": "fit_reason (AM)"
                    },
                    {
                        "name": "39",
                        "type": "text",
                        "label": "classification (AN)"
                    },
                    {
                        "name": "40",
                        "type": "text",
                        "label": "secondary_group (AO)"
                    },
                    {
                        "name": "41",
                        "type": "text",
                        "label": "classification_reason (AP)"
                    },
                    {
                        "name": "42",
                        "type": "text",
                        "label": "(AQ)"
                    },
                    {
                        "name": "43",
                        "type": "text",
                        "label": "(AR)"
                    },
                    {
                        "name": "44",
                        "type": "text",
                        "label": "(AS)"
                    },
                    {
                        "name": "45",
                        "type": "text",
                        "label": "(AT)"
                    },
                    {
                        "name": "46",
                        "type": "text",
                        "label": "(AU)"
                    },
                    {
                        "name": "47",
                        "type": "text",
                        "label": "(AV)"
                    },
                    {
                        "name": "48",
                        "type": "text",
                        "label": "(AW)"
                    },
                    {
                        "name": "49",
                        "type": "text",
                        "label": "(AX)"
                    },
                    {
                        "name": "50",
                        "type": "text",
                        "label": "(AY)"
                    },
                    {
                        "name": "51",
                        "type": "text",
                        "label": "(AZ)"
                    },
                    {
                        "name": "52",
                        "type": "text",
                        "label": "(BA)"
                    },
                    {
                        "name": "53",
                        "type": "text",
                        "label": "(BB)"
                    },
                    {
                        "name": "54",
                        "type": "text",
                        "label": "(BC)"
                    },
                    {
                        "name": "55",
                        "type": "text",
                        "label": "(BD)"
                    },
                    {
                        "name": "56",
                        "type": "text",
                        "label": "(BE)"
                    },
                    {
                        "name": "57",
                        "type": "text",
                        "label": "(BF)"
                    },
                    {
                        "name": "58",
                        "type": "text",
                        "label": "(BG)"
                    },
                    {
                        "name": "59",
                        "type": "text",
                        "label": "(BH)"
                    },
                    {
                        "name": "60",
                        "type": "text",
                        "label": "(BI)"
                    },
                    {
                        "name": "61",
                        "type": "text",
                        "label": "(BJ)"
                    },
                    {
                        "name": "62",
                        "type": "text",
                        "label": "(BK)"
                    },
                    {
                        "name": "63",
                        "type": "text",
                        "label": "(BL)"
                    },
                    {
                        "name": "64",
                        "type": "text",
                        "label": "(BM)"
                    },
                    {
                        "name": "65",
                        "type": "text",
                        "label": "(BN)"
                    },
                    {
                        "name": "66",
                        "type": "text",
                        "label": "(BO)"
                    },
                    {
                        "name": "67",
                        "type": "text",
                        "label": "(BP)"
                    },
                    {
                        "name": "68",
                        "type": "text",
                        "label": "(BQ)"
                    },
                    {
                        "name": "69",
                        "type": "text",
                        "label": "(BR)"
                    },
                    {
                        "name": "70",
                        "type": "text",
                        "label": "(BS)"
                    },
                    {
                        "name": "71",
                        "type": "text",
                        "label": "(BT)"
                    },
                    {
                        "name": "72",
                        "type": "text",
                        "label": "(BU)"
                    },
                    {
                        "name": "73",
                        "type": "text",
                        "label": "(BV)"
                    },
                    {
                        "name": "74",
                        "type": "text",
                        "label": "(BW)"
                    },
                    {
                        "name": "75",
                        "type": "text",
                        "label": "(BX)"
                    },
                    {
                        "name": "76",
                        "type": "text",
                        "label": "(BY)"
                    },
                    {
                        "name": "77",
                        "type": "text",
                        "label": "(BZ)"
                    },
                    {
                        "name": "78",
                        "type": "text",
                        "label": "(CA)"
                    },
                    {
                        "name": "79",
                        "type": "text",
                        "label": "(CB)"
                    },
                    {
                        "name": "80",
                        "type": "text",
                        "label": "(CC)"
                    },
                    {
                        "name": "81",
                        "type": "text",
                        "label": "(CD)"
                    },
                    {
                        "name": "82",
                        "type": "text",
                        "label": "(CE)"
                    },
                    {
                        "name": "83",
                        "type": "text",
                        "label": "(CF)"
                    },
                    {
                        "name": "84",
                        "type": "text",
                        "label": "(CG)"
                    },
                    {
                        "name": "85",
                        "type": "text",
                        "label": "(CH)"
                    },
                    {
                        "name": "86",
                        "type": "text",
                        "label": "(CI)"
                    },
                    {
                        "name": "87",
                        "type": "text",
                        "label": "(CJ)"
                    },
                    {
                        "name": "88",
                        "type": "text",
                        "label": "(CK)"
                    },
                    {
                        "name": "89",
                        "type": "text",
                        "label": "(CL)"
                    },
                    {
                        "name": "90",
                        "type": "text",
                        "label": "(CM)"
                    },
                    {
                        "name": "91",
                        "type": "text",
                        "label": "(CN)"
                    },
                    {
                        "name": "92",
                        "type": "text",
                        "label": "(CO)"
                    },
                    {
                        "name": "93",
                        "type": "text",
                        "label": "(CP)"
                    },
                    {
                        "name": "94",
                        "type": "text",
                        "label": "(CQ)"
                    },
                    {
                        "name": "95",
                        "type": "text",
                        "label": "(CR)"
                    },
                    {
                        "name": "96",
                        "type": "text",
                        "label": "(CS)"
                    },
                    {
                        "name": "97",
                        "type": "text",
                        "label": "(CT)"
                    },
                    {
                        "name": "98",
                        "type": "text",
                        "label": "(CU)"
                    },
                    {
                        "name": "99",
                        "type": "text",
                        "label": "(CV)"
                    },
                    {
                        "name": "100",
                        "type": "text",
                        "label": "(CW)"
                    },
                    {
                        "name": "101",
                        "type": "text",
                        "label": "(CX)"
                    },
                    {
                        "name": "102",
                        "type": "text",
                        "label": "(CY)"
                    },
                    {
                        "name": "103",
                        "type": "text",
                        "label": "(CZ)"
                    }
                ]
            }
        },
        {
            "id": 194,
            "module": "gemini-ai:createACompletionGeminiPro",
            "version": 1,
            "parameters": {
                "__IMTCONN__": 13301844
            },
            "mapper": {
                "model": "gemini-3-pro-preview",
                "contents": [
                    {
                        "role": "user",
                        "parts": [
                            {
                                "text": "Extract facts and (only when justified) inferences/annotations from the LinkedIn JSON below.\r\n\r\nLinkedIn JSON input:\r\n{\n\"person\": {\n   \"firstName\": \"{{1.`2`}}\",\n   \"lastName\": \"{{1.`3`}}\",\n   \"title\": \"{{1.`4`}}\",\n   \"titleDescription\": \"{{1.`5`}}\",\n   \"personSummary\": \"{{1.`6`}}\",\n   \"durationInRole\": \"{{1.`8`}}\",\n   \"durationInCompany\": \"{{1.`9`}}\",\n   \"personLocation\": \"{{1.`7`}}\"\n},\n\"company\": {\n   \"companyName\": \"{{1.`16`}}\",\n   \"companyDescription\": \"{{1.`17`}}\",\n   \"companyTagline\": \"{{1.`18`}}\",\n   \"industry\": \"{{1.`19`}}\",\n   \"employeeCount\": \"{{1.`20`}}\",\n   \"companyLocation\": \"{{1.`21`}}\",\n   \"companyRevenue\": {\n      \"minRevenue\": \"{{1.`27`}}\",\n      \"maxRevenue\": \"{{1.`28`}}\"\n   },\n   \"headcountGrowth\": {\n      \"growth6Mth\": \"{{1.`29`}}\",\n      \"growth1Yr\": \"{{1.`30`}}\",\n      \"growth2Yr\": \"{{1.`31`}}\"\n   }\n}",
                                "type": "text"
                            }
                        ]
                    }
                ],
                "generationConfig": {
                    "imageConfig": {},
                    "temperature": "0.2",
                    "stopSequences": [
                        ""
                    ],
                    "thinkingConfig": {
                        "thinkingBudget": "512"
                    },
                    "maxOutputTokens": "4096",
                    "responseMimeType": "application/json"
                },
                "system_instruction": {
                    "parts": [
                        {
                            "text": "You are an information extraction + constrained inference system.\r\n\r\nTASK\r\n1) Extract ONLY explicit facts from the provided LinkedIn JSON input.\r\n2) Produce inferences/annotations ONLY when there are clear motives/signals in the input.\r\n\r\nCRITICAL RULES\r\n- Strictly separate Facts vs Inferences/Annotations.\r\n- No free creativity. No invented facts.\r\n- Facts: ONLY what is explicitly stated in the input. If not stated, do not include it (leave \"\" or []).\r\n- Inferences/Annotations: ONLY if justified by clear signals in the input. Every inference MUST include:\r\n  a) a reason (why you made it),\r\n  b) evidence (exact field path OR verbatim fragment from the input),\r\n  c) and if the claim is not explicitly stated as fact, label it as [ASSUMED].\r\n\r\nFACTS RULES\r\n- Do NOT interpret, assume, or add adjectives.\r\n- Do NOT summarize.\r\n- You may convert multi-paragraph descriptions into bullet points WITHOUT changing meaning.\r\n\r\nINFERENCES/ANNOTATIONS RULES\r\nYou may infer/annotate ONLY if at least ONE clear signal exists:\r\nA) The input explicitly states responsibilities, goals, or priorities (e.g., “responsible for X”, “owns Y”).\r\nB) The title/role strongly implies standard responsibilities (e.g., “VP Talent Acquisition” → recruiting strategy). Reflect uncertainty with confidence.\r\nC) The input contains objective signals (e.g., headcount growth %, hiring posts, expansion to new locations, funding/news mentioned explicitly in text).\r\n\r\nMANDATORY LABELING\r\n- If the claim is NOT explicitly stated as a fact in the input → label MUST be \"[ASSUMED]\".\r\n- If you are only classifying an explicit statement (no new claim) → label MUST be \"\".\r\n\r\nOUTPUT REQUIREMENTS\r\n- Output MUST be exactly one JSON object that matches the required output format.\r\n- Do NOT wrap the output in code fences (```).\r\n- Do NOT output anything except the JSON object.\r\n​"
                        }
                    ]
                }
            },
            "metadata": {
                "designer": {
                    "x": 308,
                    "y": 7,
                    "name": "Internal Signals Extractor (3proPrev) 1"
                },
                "restore": {
                    "expect": {
                        "model": {
                            "mode": "chose",
                            "label": "gemini-3-pro-preview"
                        },
                        "contents": {
                            "mode": "chose",
                            "items": [
                                {
                                    "role": {
                                        "mode": "chose",
                                        "label": "User"
                                    },
                                    "parts": {
                                        "mode": "chose",
                                        "items": [
                                            {
                                                "type": {
                                                    "mode": "chose",
                                                    "label": "Text"
                                                }
                                            }
                                        ]
                                    }
                                }
                            ]
                        },
                        "url_context": {
                            "mode": "chose"
                        },
                        "code_execution": {
                            "mode": "chose"
                        },
                        "safetySettings": {
                            "mode": "chose"
                        },
                        "generationConfig": {
                            "nested": {
                                "imageConfig": {
                                    "nested": {
                                        "imageSize": {
                                            "mode": "chose",
                                            "label": "Empty"
                                        }
                                    }
                                },
                                "stopSequences": {
                                    "mode": "chose",
                                    "items": [
                                        null
                                    ],
                                    "collapsed": true
                                },
                                "thinkingConfig": {
                                    "nested": {
                                        "thinking_level": {
                                            "mode": "chose",
                                            "label": "Empty"
                                        },
                                        "include_thoughts": {
                                            "mode": "chose"
                                        }
                                    }
                                },
                                "mediaResolution": {
                                    "mode": "chose",
                                    "label": "Empty"
                                },
                                "responseMimeType": {
                                    "mode": "chose",
                                    "label": "JSON Output"
                                },
                                "new_responseSchema": {
                                    "mode": "chose"
                                },
                                "responseModalities": {
                                    "mode": "chose"
                                }
                            }
                        },
                        "system_instruction": {
                            "nested": {
                                "parts": {
                                    "mode": "chose",
                                    "items": [
                                        null
                                    ]
                                }
                            }
                        },
                        "google_maps_context": {
                            "mode": "chose"
                        },
                        "google_search_context": {
                            "mode": "chose"
                        },
                        "file_search_store_context": {
                            "mode": "chose"
                        },
                        "function_declarations_context": {
                            "mode": "chose"
                        }
                    },
                    "parameters": {
                        "__IMTCONN__": {
                            "data": {
                                "scoped": "true",
                                "connection": "gemini-ai-q9zyjp"
                            },
                            "label": "GeminiConnection_AOS_2"
                        }
                    }
                },
                "parameters": [
                    {
                        "name": "__IMTCONN__",
                        "type": "account:gemini-ai-q9zyjp",
                        "label": "Connection",
                        "required": true
                    }
                ],
                "expect": [
                    {
                        "name": "model",
                        "type": "select",
                        "label": "AI Model",
                        "required": true
                    },
                    {
                        "name": "contents",
                        "spec": [
                            {
                                "name": "role",
                                "type": "select",
                                "label": "Role",
                                "options": [
                                    {
                                        "label": "User",
                                        "value": "user"
                                    },
                                    {
                                        "label": "Model",
                                        "value": "model"
                                    }
                                ]
                            },
                            {
                                "name": "parts",
                                "spec": [
                                    {
                                        "name": "type",
                                        "type": "select",
                                        "label": "Message Type",
                                        "options": [
                                            {
                                                "label": "Text",
                                                "value": "text",
                                                "nested": [
                                                    {
                                                        "name": "text",
                                                        "type": "text",
                                                        "label": "Text",
                                                        "required": false
                                                    }
                                                ]
                                            },
                                            {
                                                "label": "File",
                                                "value": "file",
                                                "nested": [
                                                    {
                                                        "name": "file_data",
                                                        "spec": [
                                                            {
                                                                "name": "mime_type",
                                                                "type": "text",
                                                                "label": "Mime Type",
                                                                "required": false
                                                            },
                                                            {
                                                                "help": "You get this from the 'Upload a File' module.",
                                                                "name": "file_uri",
                                                                "type": "text",
                                                                "label": "File URI",
                                                                "required": false
                                                            }
                                                        ],
                                                        "type": "collection",
                                                        "label": "File Data",
                                                        "required": false
                                                    }
                                                ]
                                            },
                                            {
                                                "label": "Function Call",
                                                "value": "functionCall",
                                                "nested": [
                                                    {
                                                        "name": "functionCall",
                                                        "spec": [
                                                            {
                                                                "help": "The name of the function to call.",
                                                                "name": "name",
                                                                "type": "text",
                                                                "label": "Name",
                                                                "required": true,
                                                                "validate": {
                                                                    "max": 64
                                                                }
                                                            },
                                                            {
                                                                "help": "The function parameters and values in JSON object format.",
                                                                "name": "args",
                                                                "type": "json",
                                                                "label": "Arguments"
                                                            },
                                                            {
                                                                "help": "The unique ID of the function call.",
                                                                "name": "id",
                                                                "type": "text",
                                                                "label": "Function Call ID"
                                                            }
                                                        ],
                                                        "type": "collection",
                                                        "label": "Function Call"
                                                    }
                                                ]
                                            },
                                            {
                                                "label": "Function Response",
                                                "value": "functionResponse",
                                                "nested": [
                                                    {
                                                        "name": "functionResponse",
                                                        "spec": [
                                                            {
                                                                "help": "The name of the function to call.",
                                                                "name": "name",
                                                                "type": "text",
                                                                "label": "Name",
                                                                "required": true,
                                                                "validate": {
                                                                    "max": 64
                                                                }
                                                            },
                                                            {
                                                                "help": "The function response in JSON object format.",
                                                                "name": "response",
                                                                "type": "json",
                                                                "label": "Response",
                                                                "required": true
                                                            }
                                                        ],
                                                        "type": "collection",
                                                        "label": "Function Response"
                                                    }
                                                ]
                                            }
                                        ]
                                    },
                                    {
                                        "name": "thoughtSignature",
                                        "type": "text",
                                        "label": "Thought Signature"
                                    }
                                ],
                                "type": "array",
                                "label": "Parts"
                            }
                        ],
                        "type": "array",
                        "label": "Messages",
                        "required": true
                    },
                    {
                        "name": "system_instruction",
                        "spec": [
                            {
                                "name": "parts",
                                "spec": {
                                    "name": "value",
                                    "spec": [
                                        {
                                            "name": "text",
                                            "type": "text",
                                            "label": "Value"
                                        }
                                    ],
                                    "type": "collection",
                                    "label": "Prompt"
                                },
                                "type": "array",
                                "label": "Prompts"
                            }
                        ],
                        "type": "collection",
                        "label": "System Instructions"
                    },
                    {
                        "name": "safetySettings",
                        "spec": [
                            {
                                "name": "category",
                                "type": "select",
                                "label": "Category",
                                "options": [
                                    {
                                        "label": "Harassment content",
                                        "value": "HARM_CATEGORY_HARASSMENT"
                                    },
                                    {
                                        "label": "Hate speech and content",
                                        "value": "HARM_CATEGORY_HATE_SPEECH"
                                    },
                                    {
                                        "label": "Sexually explicit content.",
                                        "value": "HARM_CATEGORY_SEXUALLY_EXPLICIT"
                                    },
                                    {
                                        "label": "Dangerous content:",
                                        "value": "HARM_CATEGORY_DANGEROUS_CONTENT"
                                    }
                                ]
                            },
                            {
                                "name": "threshold",
                                "type": "select",
                                "label": "Threshold",
                                "options": [
                                    {
                                        "label": "Block low and above.",
                                        "value": "BLOCK_LOW_AND_ABOVE"
                                    },
                                    {
                                        "label": "Block medium and above.",
                                        "value": "BLOCK_MEDIUM_AND_ABOVE"
                                    },
                                    {
                                        "label": "Block only high.",
                                        "value": "BLOCK_ONLY_HIGH"
                                    },
                                    {
                                        "label": "Block none.",
                                        "value": "BLOCK_NONE"
                                    }
                                ]
                            }
                        ],
                        "type": "array",
                        "label": "Safety Settings"
                    },
                    {
                        "name": "generationConfig",
                        "spec": [
                            {
                                "name": "stopSequences",
                                "spec": {
                                    "name": "value",
                                    "type": "text",
                                    "label": "Stop Sequence"
                                },
                                "type": "array",
                                "label": "Stop Sequences"
                            },
                            {
                                "name": "responseModalities",
                                "type": "select",
                                "label": "Response Modalities",
                                "multiple": true,
                                "validate": {
                                    "enum": [
                                        "text",
                                        "image"
                                    ]
                                }
                            },
                            {
                                "name": "maxOutputTokens",
                                "type": "number",
                                "label": "Max Output Tokens"
                            },
                            {
                                "name": "temperature",
                                "type": "number",
                                "label": "Temperature",
                                "validate": {
                                    "max": 1,
                                    "min": 0
                                }
                            },
                            {
                                "name": "topP",
                                "type": "number",
                                "label": "Top P",
                                "validate": {
                                    "max": 1,
                                    "min": 0
                                }
                            },
                            {
                                "name": "topK",
                                "type": "number",
                                "label": "Top K"
                            },
                            {
                                "name": "thinkingConfig",
                                "spec": [
                                    {
                                        "name": "thinkingBudget",
                                        "type": "number",
                                        "label": "Thinking Budget"
                                    },
                                    {
                                        "name": "include_thoughts",
                                        "type": "boolean",
                                        "label": "Include Thoughts"
                                    },
                                    {
                                        "name": "thinking_level",
                                        "type": "select",
                                        "label": "Thinking Level",
                                        "validate": {
                                            "enum": [
                                                "low",
                                                "high"
                                            ]
                                        }
                                    }
                                ],
                                "type": "collection",
                                "label": "Thinking Config"
                            },
                            {
                                "name": "mediaResolution",
                                "type": "select",
                                "label": "Media Resolution",
                                "validate": {
                                    "enum": [
                                        "media_resolution_low",
                                        "media_resolution_medium",
                                        "media_resolution_high"
                                    ]
                                }
                            },
                            {
                                "name": "imageConfig",
                                "spec": [
                                    {
                                        "name": "imageSize",
                                        "type": "select",
                                        "label": "Image Size",
                                        "validate": {
                                            "enum": [
                                                "1K",
                                                "2K",
                                                "4K"
                                            ]
                                        }
                                    }
                                ],
                                "type": "collection",
                                "label": "Image Configuration"
                            },
                            {
                                "name": "responseMimeType",
                                "type": "select",
                                "label": "Response Format"
                            },
                            {
                                "name": "responseSchema",
                                "type": "any",
                                "label": "Response Schema (Deprecated)"
                            },
                            {
                                "name": "new_responseSchema",
                                "spec": [
                                    {
                                        "name": "type",
                                        "type": "select",
                                        "label": "Value Type",
                                        "options": [
                                            {
                                                "label": "String",
                                                "value": "string",
                                                "nested": "rpc://gemini-ai/1/createResponseSchema?type=string"
                                            },
                                            {
                                                "label": "Enum",
                                                "value": "enum",
                                                "nested": "rpc://gemini-ai/1/createResponseSchema?type=enum"
                                            },
                                            {
                                                "label": "Number",
                                                "value": "number",
                                                "nested": "rpc://gemini-ai/1/createResponseSchema?type=number"
                                            },
                                            {
                                                "label": "Integer",
                                                "value": "integer",
                                                "nested": "rpc://gemini-ai/1/createResponseSchema?type=integer"
                                            },
                                            {
                                                "label": "Boolean",
                                                "value": "boolean",
                                                "nested": "rpc://gemini-ai/1/createResponseSchema?type=boolean"
                                            },
                                            {
                                                "label": "Object",
                                                "value": "object",
                                                "nested": "rpc://gemini-ai/1/createResponseSchema?type=object"
                                            }
                                        ]
                                    }
                                ],
                                "type": "array",
                                "label": "Response Schema"
                            }
                        ],
                        "type": "collection",
                        "label": "Generation configurations"
                    },
                    {
                        "name": "tools",
                        "type": "any",
                        "label": "Tools"
                    },
                    {
                        "name": "tool_config",
                        "type": "any",
                        "label": "Tool Config"
                    },
                    {
                        "name": "function_declarations_context",
                        "type": "boolean",
                        "label": "Function Declarations Grounding"
                    },
                    {
                        "name": "url_context",
                        "type": "boolean",
                        "label": "URL Context"
                    },
                    {
                        "name": "google_search_context",
                        "type": "boolean",
                        "label": "Google Search Grounding"
                    },
                    {
                        "name": "code_execution",
                        "type": "boolean",
                        "label": "Code Execution"
                    },
                    {
                        "name": "google_maps_context",
                        "type": "boolean",
                        "label": "Google Maps Grounding"
                    },
                    {
                        "name": "file_search_store_context",
                        "type": "boolean",
                        "label": "File Search Store Context"
                    }
                ],
                "advanced": true
            }
        },
        {
            "id": 205,
            "module": "gemini-ai:createACompletionGeminiPro",
            "version": 1,
            "parameters": {
                "__IMTCONN__": 13301844
            },
            "mapper": {
                "model": "gemini-3-pro-preview",
                "contents": [
                    {
                        "role": "user",
                        "parts": [
                            {
                                "text": "Analyze the following company input and return ONLY the JSON specified by the system schema.\r\n\r\n\nExtractor_output: \n{{194.result}} \n\nLinkedin_data: \nLinkedin Data:\n{\n\"person\": {\n   \"firstName\": \"{{1.`2`}}\",\n   \"lastName\": \"{{1.`3`}}\",\n   \"title\": \"{{1.`4`}}\",\n   \"titleDescription\": \"{{1.`5`}}\",\n   \"personSummary\": \"{{1.`6`}}\",\n   \"durationInRole\": \"{{1.`8`}}\",\n   \"durationInCompany\": \"{{1.`9`}}\",\n   \"personLocation\": \"{{1.`7`}}\"\n},\n\"company\": {\n   \"companyName\": \"{{1.`16`}}\",\n   \"companyDescription\": \"{{1.`17`}}\",\n   \"companyTagline\": \"{{1.`18`}}\",\n   \"industry\": \"{{1.`19`}}\",\n   \"employeeCount\": \"{{1.`20`}}\",\n   \"companyLocation\": \"{{1.`21`}}\",\n   \"companyRevenue\": {\n      \"minRevenue\": \"{{1.`27`}}\",\n      \"maxRevenue\": \"{{1.`28`}}\"\n   },\n   \"headcountGrowth\": {\n      \"growth6Mth\": \"{{1.`29`}}\",\n      \"growth1Yr\": \"{{1.`30`}}\",\n      \"growth2Yr\": \"{{1.`31`}}\"\n   }\n}\n\nTarget_definition:\n\"Recruiting and Staffing Companies\"",
                                "type": "text"
                            }
                        ]
                    }
                ],
                "generationConfig": {
                    "imageConfig": {},
                    "temperature": "0.2",
                    "stopSequences": [
                        ""
                    ],
                    "thinkingConfig": {
                        "thinkingBudget": "512"
                    },
                    "maxOutputTokens": "4096",
                    "responseMimeType": "application/json"
                },
                "system_instruction": {
                    "parts": [
                        {
                            "text": "{\r\n# ROLE: AOS Module 1 (Business Intel)\r\n\r\n# WHY THIS MODULE EXISTS\r\nTo write a credible offer, we must understand:\r\n1) What the company is (plain description)\r\n2) What they do to create value and get paid (business model)\r\n3) Who they sell to (ICP: sectors + decision-maker roles)\r\n4) How they acquire clients (how clients find them + how they close)\r\n\r\n# GOAL\r\nReturn:\r\nA) A short company description (identity only)\r\nB) A per-business-line breakdown where EACH line includes:\r\n   - business model (offering + revenue mechanics + area of ops)\r\n   - buyer segments (grouped by buyer-role pattern)\r\n   - client acquisition operation (how they find + close clients)\r\n\r\nCRITICAL:\r\n- If multiple business lines exist, you MUST output them separately.\r\n- If different sectors imply different decision-maker roles, you MUST split them into separate buyer_segments.\r\n- Otherwise, you MUST group sectors together under the same buyer_segment (do NOT create unnecessary segments).\r\n\r\n# INPUTS\r\ncompany_input: {company_input}\r\nsales_nav_target_definition: {sales_nav_target_definition}\r\n\r\n# STRICT RULES\r\n1) THIRD PERSON ONLY\r\nRefer to the company as \"They\" or by their name. Never use \"We\".\r\n\r\n2) NO HALLUCINATION\r\nIf not supported by the input, output \"unknown\".\r\nDo not invent sectors, roles, geos, channels, revenue models, offices, or claims.\r\n\r\n3) ASSUMPTIONS MUST BE JUSTIFIED (INLINE)\r\nYou MAY infer only when justified.\r\nAny inferred content must be labeled \"[Assumed]\" and include justification inline in EXACT format:\r\n[Assumed | Confidence: Very High/High/Medium/Low | Evidence: <field/path> | Reason: <short reason>]\r\nDo NOT create a separate inferences section.\r\n\r\n4) COMPANY DESCRIPTION (IDENTITY ONLY)\r\ncompany_description MUST be identity-only and must NOT list ICP sectors/roles/industries.\r\nMax 35 words.\r\nIt may mention business lines at a high level (e.g., \"staffing + franchising\"), but no ICP lists.\r\n\r\n5) MULTIPLE BUSINESS LINES\r\nIf the company clearly operates multiple lines, output each as a separate business_lines item.\r\nMax business_lines items: 3.\r\nIf more exist, include the 3 most emphasized by the input and mention the rest briefly as \"other lines: unknown\" in company_description.\r\n\r\n6) BUYER SEGMENTS (CRITICAL)\r\nEach business line MUST include buyer_segments (minimum 1 segment).\r\nbuyer_segments max items: 3.\r\n\r\nbuyer_segments represent \"same buyer-role pattern\", not \"one industry\".\r\n\r\nSECTOR INVENTORY COMPLETENESS (CRITICAL):\r\n- If the input explicitly lists industries/sectors served, you MUST include ALL of them inside buyer_segments.target_sector.\r\n- You may GROUP multiple sectors into one buyer_segment ONLY when the decision-maker roles are the same.\r\n- Do NOT drop sectors due to brevity. If there are many, group them.\r\n\r\nGROUPING FORMAT:\r\n- When grouping, list sectors in target_sector separated by \"; \" (semicolon + space).\r\n- target_role should list the decision-maker roles that match that grouped sector set.\r\n- If you cannot specify sector+role, use \"unknown\".\r\n\r\n6.1) VOLUME INTENT (NEW, PER BUYER SEGMENT)\r\nFor EACH buyer_segment, output volume_intent as:\r\n- MAXIMIZE = they likely want as many clients as possible in this segment (broad coverage / scale language).\r\n- SELECTIVE = they likely want fewer, higher-value clients (selective/boutique/retained/premium language).\r\n- UNKNOWN = not enough evidence.\r\nProvide volume_intent_reason as ONE short sentence.\r\nIf inferred, mark [Assumed ...] with evidence_path.\r\n\r\n7) HQ + AREA OF OPERATIONS (CRITICAL)\r\nFor EACH business line, area_operations MUST include:\r\n- HQ: <location or unknown>\r\n- Operates: <region/country/city or unknown>\r\nIf HQ is not present in input, write \"HQ: unknown\".\r\n\r\n8) OFFICE / LOCATION SPECIALIZATION (CRITICAL)\r\nIf the input mentions specific offices/locations AND what they specialize in, you MUST include that detail in the relevant business line:\r\n- either in business_model.offering OR business_model.area_operations.\r\nDo not hide specializations inside target_geo unless geo is truly different.\r\n\r\n9) SEPARATION\r\nDo NOT mix revenue mechanics into acquisition steps.\r\nBusiness model and acquisition are separate.\r\n\r\n10) EXAMPLES FORMAT (example_steps_revenue / example_steps_CAO)\r\n- Maximum 3 lines each.\r\n- Each line MUST be EXACTLY:\r\n  Logic: ... | Action: ... | Result: ...\r\n- Must include how the client and the company found each other (observed or [Assumed] with justification).\r\n- No extra lines.\r\n\r\n11) CONCISENESS\r\nStrip fluff. Outputs should be short and structured.\r\n\r\n12) OUTPUT ONLY JSON\r\nReturn ONLY valid JSON. No markdown. No commentary.\r\n\r\n13) EXACT OUTPUT SCHEMA\r\nUse exactly these keys and nesting. Do not add keys. Do not rename keys. Do not change nesting.\r\n\r\n# FIT + HIT (MINIMAL, NOT FEASIBILITY)\r\n- FIT = whether ANY business_line has b2b_b2c = \"B2B\"\r\n  If none -> b2b_presence.status=\"NO\" and hit_filter.verdict=\"DROP\"\r\n- HIT = whether the company matches sales_nav_target_definition (on-target for the current search)\r\n  If FIT=YES but off-target -> verdict=\"STORAGE\"\r\n  If FIT=YES and on-target -> verdict=\"HIT\"\r\nIf sales_nav_target_definition is not provided, set hit_filter.verdict=\"STORAGE\" and reason=\"sales_nav_target_definition not provided\".\r\nDo NOT mention AOS feasibility.\r\n\r\n# OUTPUT SCHEMA (EXACT)\r\n{\r\n    \"company_name\": \"string\",\r\n    \"company_description\": \"string\",\r\n    \"business_lines\": [\r\n      {\r\n        \"line_name\": \"string\",\r\n        \"b2b_b2c\": \"B2B|B2C|UNKNOWN\",\r\n        \"business_model\": {\r\n          \"classification\": \"string\",\r\n          \"offering\": \"string\",\r\n          \"revenue_mechanics\": \"string\",\r\n          \"area_operations\": \"string\",\r\n          \"example_steps_revenue\": \"string\"\r\n        },\r\n        \"buyer_segments\": [\r\n          {\r\n            \"target_sector\": \"string\",\r\n            \"target_role\": \"string\",\r\n            \"target_geo\": \"string\",\r\n            \"volume_intent\": \"MAXIMIZE|SELECTIVE|UNKNOWN\",\r\n            \"volume_intent_reason\": \"string\"\r\n          }\r\n        ],\r\n        \"client_acquisition_operation\": {\r\n          \"definition\": \"string\",\r\n          \"channels_observed\": \"string\",\r\n          \"channels_assumed\": \"string\",\r\n          \"example_steps_CAO\": \"string\"\r\n        }\r\n      }\r\n    ],\r\n    \"b2b_presence\": {\r\n      \"status\": \"YES|NO|UNKNOWN\",\r\n      \"notes\": \"string\"\r\n    },\r\n    \"hit_filter\": {\r\n      \"verdict\": \"HIT|STORAGE|DROP\",\r\n      \"reason\": \"string\"\r\n    }\r\n  }\r\n}\r\n\nOUTPUT REQUIREMENTS\r\n- Output MUST be exactly one JSON object that matches the required output format.\r\n- Do NOT wrap the output in code fences (```).\r\n- Do NOT output anything except the JSON object."
                        }
                    ]
                }
            },
            "metadata": {
                "designer": {
                    "x": 600,
                    "y": 4,
                    "name": "Business Intel (3proPrev) 5"
                },
                "restore": {
                    "expect": {
                        "model": {
                            "mode": "chose",
                            "label": "gemini-3-pro-preview"
                        },
                        "contents": {
                            "mode": "chose",
                            "items": [
                                {
                                    "role": {
                                        "mode": "chose",
                                        "label": "User"
                                    },
                                    "parts": {
                                        "mode": "chose",
                                        "items": [
                                            {
                                                "type": {
                                                    "mode": "chose",
                                                    "label": "Text"
                                                }
                                            }
                                        ]
                                    }
                                }
                            ]
                        },
                        "url_context": {
                            "mode": "chose"
                        },
                        "code_execution": {
                            "mode": "chose"
                        },
                        "safetySettings": {
                            "mode": "chose"
                        },
                        "generationConfig": {
                            "nested": {
                                "imageConfig": {
                                    "nested": {
                                        "imageSize": {
                                            "mode": "chose",
                                            "label": "Empty"
                                        }
                                    }
                                },
                                "stopSequences": {
                                    "mode": "chose",
                                    "items": [
                                        null
                                    ],
                                    "collapsed": true
                                },
                                "thinkingConfig": {
                                    "nested": {
                                        "thinking_level": {
                                            "mode": "chose",
                                            "label": "Empty"
                                        },
                                        "include_thoughts": {
                                            "mode": "chose"
                                        }
                                    }
                                },
                                "mediaResolution": {
                                    "mode": "chose",
                                    "label": "Empty"
                                },
                                "responseMimeType": {
                                    "mode": "chose",
                                    "label": "JSON Output"
                                },
                                "new_responseSchema": {
                                    "mode": "chose"
                                },
                                "responseModalities": {
                                    "mode": "chose"
                                }
                            }
                        },
                        "system_instruction": {
                            "nested": {
                                "parts": {
                                    "mode": "chose",
                                    "items": [
                                        null
                                    ]
                                }
                            }
                        },
                        "google_maps_context": {
                            "mode": "chose"
                        },
                        "google_search_context": {
                            "mode": "chose"
                        },
                        "file_search_store_context": {
                            "mode": "chose"
                        },
                        "function_declarations_context": {
                            "mode": "chose"
                        }
                    },
                    "parameters": {
                        "__IMTCONN__": {
                            "data": {
                                "scoped": "true",
                                "connection": "gemini-ai-q9zyjp"
                            },
                            "label": "GeminiConnection_AOS_2"
                        }
                    }
                },
                "parameters": [
                    {
                        "name": "__IMTCONN__",
                        "type": "account:gemini-ai-q9zyjp",
                        "label": "Connection",
                        "required": true
                    }
                ],
                "expect": [
                    {
                        "name": "model",
                        "type": "select",
                        "label": "AI Model",
                        "required": true
                    },
                    {
                        "name": "contents",
                        "spec": [
                            {
                                "name": "role",
                                "type": "select",
                                "label": "Role",
                                "options": [
                                    {
                                        "label": "User",
                                        "value": "user"
                                    },
                                    {
                                        "label": "Model",
                                        "value": "model"
                                    }
                                ]
                            },
                            {
                                "name": "parts",
                                "spec": [
                                    {
                                        "name": "type",
                                        "type": "select",
                                        "label": "Message Type",
                                        "options": [
                                            {
                                                "label": "Text",
                                                "value": "text",
                                                "nested": [
                                                    {
                                                        "name": "text",
                                                        "type": "text",
                                                        "label": "Text",
                                                        "required": false
                                                    }
                                                ]
                                            },
                                            {
                                                "label": "File",
                                                "value": "file",
                                                "nested": [
                                                    {
                                                        "name": "file_data",
                                                        "spec": [
                                                            {
                                                                "name": "mime_type",
                                                                "type": "text",
                                                                "label": "Mime Type",
                                                                "required": false
                                                            },
                                                            {
                                                                "help": "You get this from the 'Upload a File' module.",
                                                                "name": "file_uri",
                                                                "type": "text",
                                                                "label": "File URI",
                                                                "required": false
                                                            }
                                                        ],
                                                        "type": "collection",
                                                        "label": "File Data",
                                                        "required": false
                                                    }
                                                ]
                                            },
                                            {
                                                "label": "Function Call",
                                                "value": "functionCall",
                                                "nested": [
                                                    {
                                                        "name": "functionCall",
                                                        "spec": [
                                                            {
                                                                "help": "The name of the function to call.",
                                                                "name": "name",
                                                                "type": "text",
                                                                "label": "Name",
                                                                "required": true,
                                                                "validate": {
                                                                    "max": 64
                                                                }
                                                            },
                                                            {
                                                                "help": "The function parameters and values in JSON object format.",
                                                                "name": "args",
                                                                "type": "json",
                                                                "label": "Arguments"
                                                            },
                                                            {
                                                                "help": "The unique ID of the function call.",
                                                                "name": "id",
                                                                "type": "text",
                                                                "label": "Function Call ID"
                                                            }
                                                        ],
                                                        "type": "collection",
                                                        "label": "Function Call"
                                                    }
                                                ]
                                            },
                                            {
                                                "label": "Function Response",
                                                "value": "functionResponse",
                                                "nested": [
                                                    {
                                                        "name": "functionResponse",
                                                        "spec": [
                                                            {
                                                                "help": "The name of the function to call.",
                                                                "name": "name",
                                                                "type": "text",
                                                                "label": "Name",
                                                                "required": true,
                                                                "validate": {
                                                                    "max": 64
                                                                }
                                                            },
                                                            {
                                                                "help": "The function response in JSON object format.",
                                                                "name": "response",
                                                                "type": "json",
                                                                "label": "Response",
                                                                "required": true
                                                            }
                                                        ],
                                                        "type": "collection",
                                                        "label": "Function Response"
                                                    }
                                                ]
                                            }
                                        ]
                                    },
                                    {
                                        "name": "thoughtSignature",
                                        "type": "text",
                                        "label": "Thought Signature"
                                    }
                                ],
                                "type": "array",
                                "label": "Parts"
                            }
                        ],
                        "type": "array",
                        "label": "Messages",
                        "required": true
                    },
                    {
                        "name": "system_instruction",
                        "spec": [
                            {
                                "name": "parts",
                                "spec": {
                                    "name": "value",
                                    "spec": [
                                        {
                                            "name": "text",
                                            "type": "text",
                                            "label": "Value"
                                        }
                                    ],
                                    "type": "collection",
                                    "label": "Prompt"
                                },
                                "type": "array",
                                "label": "Prompts"
                            }
                        ],
                        "type": "collection",
                        "label": "System Instructions"
                    },
                    {
                        "name": "safetySettings",
                        "spec": [
                            {
                                "name": "category",
                                "type": "select",
                                "label": "Category",
                                "options": [
                                    {
                                        "label": "Harassment content",
                                        "value": "HARM_CATEGORY_HARASSMENT"
                                    },
                                    {
                                        "label": "Hate speech and content",
                                        "value": "HARM_CATEGORY_HATE_SPEECH"
                                    },
                                    {
                                        "label": "Sexually explicit content.",
                                        "value": "HARM_CATEGORY_SEXUALLY_EXPLICIT"
                                    },
                                    {
                                        "label": "Dangerous content:",
                                        "value": "HARM_CATEGORY_DANGEROUS_CONTENT"
                                    }
                                ]
                            },
                            {
                                "name": "threshold",
                                "type": "select",
                                "label": "Threshold",
                                "options": [
                                    {
                                        "label": "Block low and above.",
                                        "value": "BLOCK_LOW_AND_ABOVE"
                                    },
                                    {
                                        "label": "Block medium and above.",
                                        "value": "BLOCK_MEDIUM_AND_ABOVE"
                                    },
                                    {
                                        "label": "Block only high.",
                                        "value": "BLOCK_ONLY_HIGH"
                                    },
                                    {
                                        "label": "Block none.",
                                        "value": "BLOCK_NONE"
                                    }
                                ]
                            }
                        ],
                        "type": "array",
                        "label": "Safety Settings"
                    },
                    {
                        "name": "generationConfig",
                        "spec": [
                            {
                                "name": "stopSequences",
                                "spec": {
                                    "name": "value",
                                    "type": "text",
                                    "label": "Stop Sequence"
                                },
                                "type": "array",
                                "label": "Stop Sequences"
                            },
                            {
                                "name": "responseModalities",
                                "type": "select",
                                "label": "Response Modalities",
                                "multiple": true,
                                "validate": {
                                    "enum": [
                                        "text",
                                        "image"
                                    ]
                                }
                            },
                            {
                                "name": "maxOutputTokens",
                                "type": "number",
                                "label": "Max Output Tokens"
                            },
                            {
                                "name": "temperature",
                                "type": "number",
                                "label": "Temperature",
                                "validate": {
                                    "max": 1,
                                    "min": 0
                                }
                            },
                            {
                                "name": "topP",
                                "type": "number",
                                "label": "Top P",
                                "validate": {
                                    "max": 1,
                                    "min": 0
                                }
                            },
                            {
                                "name": "topK",
                                "type": "number",
                                "label": "Top K"
                            },
                            {
                                "name": "thinkingConfig",
                                "spec": [
                                    {
                                        "name": "thinkingBudget",
                                        "type": "number",
                                        "label": "Thinking Budget"
                                    },
                                    {
                                        "name": "include_thoughts",
                                        "type": "boolean",
                                        "label": "Include Thoughts"
                                    },
                                    {
                                        "name": "thinking_level",
                                        "type": "select",
                                        "label": "Thinking Level",
                                        "validate": {
                                            "enum": [
                                                "low",
                                                "high"
                                            ]
                                        }
                                    }
                                ],
                                "type": "collection",
                                "label": "Thinking Config"
                            },
                            {
                                "name": "mediaResolution",
                                "type": "select",
                                "label": "Media Resolution",
                                "validate": {
                                    "enum": [
                                        "media_resolution_low",
                                        "media_resolution_medium",
                                        "media_resolution_high"
                                    ]
                                }
                            },
                            {
                                "name": "imageConfig",
                                "spec": [
                                    {
                                        "name": "imageSize",
                                        "type": "select",
                                        "label": "Image Size",
                                        "validate": {
                                            "enum": [
                                                "1K",
                                                "2K",
                                                "4K"
                                            ]
                                        }
                                    }
                                ],
                                "type": "collection",
                                "label": "Image Configuration"
                            },
                            {
                                "name": "responseMimeType",
                                "type": "select",
                                "label": "Response Format"
                            },
                            {
                                "name": "responseSchema",
                                "type": "any",
                                "label": "Response Schema (Deprecated)"
                            },
                            {
                                "name": "new_responseSchema",
                                "spec": [
                                    {
                                        "name": "type",
                                        "type": "select",
                                        "label": "Value Type",
                                        "options": [
                                            {
                                                "label": "String",
                                                "value": "string",
                                                "nested": "rpc://gemini-ai/1/createResponseSchema?type=string"
                                            },
                                            {
                                                "label": "Enum",
                                                "value": "enum",
                                                "nested": "rpc://gemini-ai/1/createResponseSchema?type=enum"
                                            },
                                            {
                                                "label": "Number",
                                                "value": "number",
                                                "nested": "rpc://gemini-ai/1/createResponseSchema?type=number"
                                            },
                                            {
                                                "label": "Integer",
                                                "value": "integer",
                                                "nested": "rpc://gemini-ai/1/createResponseSchema?type=integer"
                                            },
                                            {
                                                "label": "Boolean",
                                                "value": "boolean",
                                                "nested": "rpc://gemini-ai/1/createResponseSchema?type=boolean"
                                            },
                                            {
                                                "label": "Object",
                                                "value": "object",
                                                "nested": "rpc://gemini-ai/1/createResponseSchema?type=object"
                                            }
                                        ]
                                    }
                                ],
                                "type": "array",
                                "label": "Response Schema"
                            }
                        ],
                        "type": "collection",
                        "label": "Generation configurations"
                    },
                    {
                        "name": "tools",
                        "type": "any",
                        "label": "Tools"
                    },
                    {
                        "name": "tool_config",
                        "type": "any",
                        "label": "Tool Config"
                    },
                    {
                        "name": "function_declarations_context",
                        "type": "boolean",
                        "label": "Function Declarations Grounding"
                    },
                    {
                        "name": "url_context",
                        "type": "boolean",
                        "label": "URL Context"
                    },
                    {
                        "name": "google_search_context",
                        "type": "boolean",
                        "label": "Google Search Grounding"
                    },
                    {
                        "name": "code_execution",
                        "type": "boolean",
                        "label": "Code Execution"
                    },
                    {
                        "name": "google_maps_context",
                        "type": "boolean",
                        "label": "Google Maps Grounding"
                    },
                    {
                        "name": "file_search_store_context",
                        "type": "boolean",
                        "label": "File Search Store Context"
                    }
                ],
                "advanced": true
            }
        },
        {
            "id": 208,
            "module": "builtin:BasicRouter",
            "version": 1,
            "filter": {
                "name": "COMPANY B2B",
                "conditions": [
                    [
                        {
                            "a": "{{205.result.b2b_presence.status}}",
                            "b": "YES",
                            "o": "text:equal"
                        }
                    ]
                ]
            },
            "mapper": null,
            "metadata": {
                "designer": {
                    "x": 926,
                    "y": 7
                }
            },
            "routes": [
                {
                    "flow": [
                        {
                            "id": 184,
                            "module": "gemini-ai:createACompletionGeminiPro",
                            "version": 1,
                            "parameters": {
                                "__IMTCONN__": 13301844
                            },
                            "filter": {
                                "name": "COMPANY HIT",
                                "conditions": [
                                    [
                                        {
                                            "a": "{{205.result.hit_filter.verdict}}",
                                            "b": "HIT",
                                            "o": "text:equal"
                                        }
                                    ]
                                ]
                            },
                            "mapper": {
                                "model": "gemini-3-pro-preview",
                                "contents": [
                                    {
                                        "role": "user",
                                        "parts": [
                                            {
                                                "text": "Analyze the following persona input and return ONLY the JSON specified by the system schema.\r\n\r\n\nExtractor_output: \n{{194.result}} \n\nLinkedin Data:\n{\n\"person\": {\n   \"firstName\": \"{{1.`2`}}\",\n   \"lastName\": \"{{1.`3`}}\",\n   \"title\": \"{{1.`4`}}\",\n   \"titleDescription\": \"{{1.`5`}}\",\n   \"personSummary\": \"{{1.`6`}}\",\n   \"durationInRole\": \"{{1.`8`}}\",\n   \"durationInCompany\": \"{{1.`9`}}\",\n   \"personLocation\": \"{{1.`7`}}\"\n},\n\"company\": {\n   \"companyName\": \"{{1.`16`}}\",\n   \"companyDescription\": \"{{1.`17`}}\",\n   \"companyTagline\": \"{{1.`18`}}\",\n   \"industry\": \"{{1.`19`}}\",\n   \"employeeCount\": \"{{1.`20`}}\",\n   \"companyLocation\": \"{{1.`21`}}\",\n   \"companyRevenue\": {\n      \"minRevenue\": \"{{1.`27`}}\",\n      \"maxRevenue\": \"{{1.`28`}}\"\n   },\n   \"headcountGrowth\": {\n      \"growth6Mth\": \"{{1.`29`}}\",\n      \"growth1Yr\": \"{{1.`30`}}\",\n      \"growth2Yr\": \"{{1.`31`}}\"\n   }\n}\n\nTarget_definition:\n\"Recruiting and Staffing Companies\"",
                                                "type": "text"
                                            }
                                        ]
                                    }
                                ],
                                "generationConfig": {
                                    "imageConfig": {},
                                    "temperature": "0.2",
                                    "stopSequences": [
                                        ""
                                    ],
                                    "thinkingConfig": {
                                        "thinkingBudget": "256"
                                    },
                                    "maxOutputTokens": "2048",
                                    "responseMimeType": "application/json",
                                    "new_responseSchema": [
                                        {
                                            "type": "object",
                                            "required": true,
                                            "properties": [
                                                {
                                                    "type": "enum",
                                                    "required": true,
                                                    "enum_values": [
                                                        "FIT",
                                                        "DROP"
                                                    ],
                                                    "property_name": "decision_maker_fit"
                                                },
                                                {
                                                    "type": "string",
                                                    "required": true,
                                                    "property_name": "decision_maker_reason"
                                                }
                                            ],
                                            "property_name": "Decision-Maker"
                                        },
                                        {
                                            "type": "object",
                                            "array": false,
                                            "required": true,
                                            "properties": [
                                                {
                                                    "type": "string",
                                                    "required": true,
                                                    "description": "A 2-3 word label defining their real role in the ecosystem. E.g., 'Empire Builder' (Founder), 'Process Guardian' (HR), 'Quota Hunter' (Sales).",
                                                    "property_name": "professional_archetype"
                                                },
                                                {
                                                    "type": "string",
                                                    "required": true,
                                                    "description": "Inferred description of their daily operational reality. IMPORTANT: Must explicitly mention what they likely DELEGATE or IGNORE. E.g., 'Focuses on franchise expansion; ignores daily candidate sourcing.'",
                                                    "property_name": "core_day_to_day_operation"
                                                },
                                                {
                                                    "type": "object",
                                                    "required": true,
                                                    "properties": [
                                                        {
                                                            "type": "string",
                                                            "required": true,
                                                            "description": "A dense sentence summarizing what drives them (Ambition vs Fear, Legacy vs Survival). The emotional 'why' behind their job.",
                                                            "property_name": "motivation_statement"
                                                        },
                                                        {
                                                            "type": "string",
                                                            "required": true,
                                                            "description": "The metric (explicit or implicit) they look at on Friday afternoon. E.g., 'Revenue Growth & Brand Reach' vs 'Inbox Zero'.",
                                                            "property_name": "success_metric"
                                                        },
                                                        {
                                                            "type": "enum",
                                                            "required": true,
                                                            "description": "Their willingness to try new operational models.",
                                                            "enum_values": [
                                                                "Risk Taker / Disruptor",
                                                                "Calculated / Strategic",
                                                                "Risk Averse / Conservative"
                                                            ],
                                                            "property_name": "risk_profile"
                                                        }
                                                    ],
                                                    "property_name": "psychological_vibe"
                                                }
                                            ],
                                            "description": "The psychological and operational profile of the target.",
                                            "property_name": "human_profile"
                                        },
                                        {
                                            "type": "object",
                                            "required": true,
                                            "properties": [
                                                {
                                                    "type": "string",
                                                    "required": true,
                                                    "description": "Direct instruction on tone and style. E.g., 'Be direct, use high-energy language, focus on ROI.'",
                                                    "property_name": "do_this"
                                                },
                                                {
                                                    "type": "string",
                                                    "required": true,
                                                    "description": "Negative triggers to avoid. E.g., 'Avoid technical jargon, do not use subservient language, hate operational minutiae.'",
                                                    "property_name": "avoid_this"
                                                }
                                            ],
                                            "property_name": "communication_guide"
                                        }
                                    ]
                                },
                                "system_instruction": {
                                    "parts": [
                                        {
                                            "text": "{\r\n# ROLE: AOS Module 2 (Human Profiler)\r\n\r\n# GOAL\r\nAnalyze the provided raw LinkedIn profile data and Extractor Data to decode the HUMAN behind the title. Your output provides the psychological and operational \"Intel\" required for downstream copywriting modules.\r\n\r\n# CORE METHODOLOGY: THE \"CURRENCY\" DECODER\r\nYou must identify what \"currency\" this person trades in based on their role and tenure:\r\n- Owners/Founders trade in Asset Value & Growth (Revenue, Expansion, Legacy).\r\n- Managers/Directors trade in Efficiency & Performance (KPIs, Time-saving, Process).\r\n- Individual Contributors trade in Sanity & Execution (Getting tasks done, Job Security).\r\n\r\n# STRICT OPERATIONAL RULES\r\n1) TRANSPARENT INFERENCE:\r\nYou are REQUIRED to infer the profile based on Job Title + Time in Role + Company Size when explicit text is missing.\r\nHowever, you must label these logical deductions as [Assumed].\r\n\r\n2) DEFINE BY CONTRAST:\r\nWhen describing core_day_to_day_operation, explicitly state what they likely DELEGATE or IGNORE.\r\nUse [Assumed] if deduced.\r\n\r\n3) NO FLUFF:\r\nDo not describe career history. Describe their current mindset.\r\n\r\n4) THIRD PERSON ONLY:\r\nAlways refer to the analyzed person as \"They\" or by their name. NEVER use \"We\" or \"I\".\r\n\r\n5) COMMUNICATION GUARDRAILS:\r\nIn communication_guide, extract specific triggers:\r\n- do_this: what resonates\r\n- avoid_this: what annoys them\r\n\r\n6) DECISION-MAKER FIT FILTER (CRITICAL):\r\nOutput human_profile.decision_maker_fit as FIT or DROP.\r\nFIT if they are a likely buyer/strong influencer for client acquisition (e.g., Founder/Owner/CEO/President/Partner/CRO/VP/Head/Director of Sales/Growth/Marketing/BD/Revenue/Operations).\r\nDROP if they are a coordinator/intern/assistant/IC without ownership, unless the input explicitly indicates buying authority.\r\nAlso output human_profile.decision_maker_reason as one short sentence; if inferred, mark [Assumed] and cite the evidence path.\r\n\r\n# INPUT DATA\r\nThe user will provide raw JSON data from LinkedIn scraping and JSON from an Extractor Module. Ignore system fields (IDs, URLs) and focus on Text, Descriptions, Titles, and Tenure.\r\n\r\n# OUTPUT ONLY JSON\r\nReturn ONLY valid JSON. No markdown. No commentary.\r\n\r\n# EXACT SCHEMA\r\nUse exactly these keys and nesting (do not add or rename fields).\r\n​"
                                        }
                                    ]
                                }
                            },
                            "metadata": {
                                "designer": {
                                    "x": 1260,
                                    "y": 10,
                                    "name": "Person Understanding (3proPrev) 2"
                                },
                                "restore": {
                                    "expect": {
                                        "model": {
                                            "mode": "chose",
                                            "label": "gemini-3-pro-preview"
                                        },
                                        "contents": {
                                            "mode": "chose",
                                            "items": [
                                                {
                                                    "role": {
                                                        "mode": "chose",
                                                        "label": "User"
                                                    },
                                                    "parts": {
                                                        "mode": "chose",
                                                        "items": [
                                                            {
                                                                "type": {
                                                                    "mode": "chose",
                                                                    "label": "Text"
                                                                }
                                                            }
                                                        ]
                                                    }
                                                }
                                            ]
                                        },
                                        "url_context": {
                                            "mode": "chose"
                                        },
                                        "code_execution": {
                                            "mode": "chose"
                                        },
                                        "safetySettings": {
                                            "mode": "chose"
                                        },
                                        "generationConfig": {
                                            "nested": {
                                                "imageConfig": {
                                                    "nested": {
                                                        "imageSize": {
                                                            "mode": "chose",
                                                            "label": "Empty"
                                                        }
                                                    }
                                                },
                                                "stopSequences": {
                                                    "mode": "chose",
                                                    "items": [
                                                        null
                                                    ],
                                                    "collapsed": true
                                                },
                                                "thinkingConfig": {
                                                    "nested": {
                                                        "thinking_level": {
                                                            "mode": "chose",
                                                            "label": "Empty"
                                                        },
                                                        "include_thoughts": {
                                                            "mode": "chose"
                                                        }
                                                    }
                                                },
                                                "mediaResolution": {
                                                    "mode": "chose",
                                                    "label": "Empty"
                                                },
                                                "responseMimeType": {
                                                    "mode": "chose",
                                                    "label": "JSON Output"
                                                },
                                                "new_responseSchema": {
                                                    "mode": "chose",
                                                    "items": [
                                                        {
                                                            "type": {
                                                                "mode": "chose",
                                                                "label": "Object",
                                                                "nested": [
                                                                    {
                                                                        "help": null,
                                                                        "name": "property_name",
                                                                        "spec": null,
                                                                        "type": "text",
                                                                        "label": "Property Name",
                                                                        "options": null,
                                                                        "required": true
                                                                    },
                                                                    {
                                                                        "help": null,
                                                                        "name": "description",
                                                                        "spec": null,
                                                                        "type": "text",
                                                                        "label": "Description",
                                                                        "options": null,
                                                                        "required": false
                                                                    },
                                                                    {
                                                                        "help": null,
                                                                        "name": "required",
                                                                        "spec": null,
                                                                        "type": "boolean",
                                                                        "label": "Required Property?",
                                                                        "options": null,
                                                                        "required": null
                                                                    },
                                                                    {
                                                                        "help": null,
                                                                        "name": "array",
                                                                        "spec": null,
                                                                        "type": "boolean",
                                                                        "label": "Make property an array?",
                                                                        "options": null,
                                                                        "required": null
                                                                    },
                                                                    {
                                                                        "help": null,
                                                                        "name": "properties",
                                                                        "spec": [
                                                                            {
                                                                                "name": "type",
                                                                                "type": "select",
                                                                                "label": "Value Type",
                                                                                "options": [
                                                                                    {
                                                                                        "label": "String",
                                                                                        "value": "string",
                                                                                        "nested": "rpc://gemini-ai/1/createResponseSchema?type=string"
                                                                                    },
                                                                                    {
                                                                                        "label": "Enum",
                                                                                        "value": "enum",
                                                                                        "nested": "rpc://gemini-ai/1/createResponseSchema?type=enum"
                                                                                    },
                                                                                    {
                                                                                        "label": "Number",
                                                                                        "value": "number",
                                                                                        "nested": "rpc://gemini-ai/1/createResponseSchema?type=number"
                                                                                    },
                                                                                    {
                                                                                        "label": "Integer",
                                                                                        "value": "integer",
                                                                                        "nested": "rpc://gemini-ai/1/createResponseSchema?type=integer"
                                                                                    },
                                                                                    {
                                                                                        "label": "Boolean",
                                                                                        "value": "boolean",
                                                                                        "nested": "rpc://gemini-ai/1/createResponseSchema?type=boolean"
                                                                                    },
                                                                                    {
                                                                                        "label": "Object",
                                                                                        "value": "object",
                                                                                        "nested": "rpc://gemini-ai/1/createResponseSchema?type=object"
                                                                                    }
                                                                                ]
                                                                            }
                                                                        ],
                                                                        "type": "array",
                                                                        "label": "Object Properties",
                                                                        "options": null,
                                                                        "required": true
                                                                    }
                                                                ]
                                                            },
                                                            "array": {
                                                                "mode": "chose"
                                                            },
                                                            "required": {
                                                                "mode": "chose"
                                                            },
                                                            "properties": {
                                                                "mode": "chose",
                                                                "items": [
                                                                    {
                                                                        "type": {
                                                                            "mode": "chose",
                                                                            "label": "Enum",
                                                                            "nested": [
                                                                                {
                                                                                    "help": null,
                                                                                    "name": "property_name",
                                                                                    "spec": null,
                                                                                    "type": "text",
                                                                                    "label": "Property Name",
                                                                                    "options": null,
                                                                                    "required": true
                                                                                },
                                                                                {
                                                                                    "help": null,
                                                                                    "name": "description",
                                                                                    "spec": null,
                                                                                    "type": "text",
                                                                                    "label": "Description",
                                                                                    "options": null,
                                                                                    "required": false
                                                                                },
                                                                                {
                                                                                    "help": "These are the allowed values for the property.",
                                                                                    "name": "enum_values",
                                                                                    "spec": {
                                                                                        "name": "value",
                                                                                        "type": "text"
                                                                                    },
                                                                                    "type": "array",
                                                                                    "label": "Enum Values",
                                                                                    "options": null,
                                                                                    "required": null
                                                                                },
                                                                                {
                                                                                    "help": null,
                                                                                    "name": "required",
                                                                                    "spec": null,
                                                                                    "type": "boolean",
                                                                                    "label": "Required Property?",
                                                                                    "options": null,
                                                                                    "required": null
                                                                                },
                                                                                {
                                                                                    "help": null,
                                                                                    "name": "array",
                                                                                    "spec": null,
                                                                                    "type": "boolean",
                                                                                    "label": "Make property an array?",
                                                                                    "options": null,
                                                                                    "required": null
                                                                                }
                                                                            ]
                                                                        },
                                                                        "array": {
                                                                            "mode": "chose"
                                                                        },
                                                                        "required": {
                                                                            "mode": "chose"
                                                                        },
                                                                        "enum_values": {
                                                                            "mode": "chose",
                                                                            "items": [
                                                                                null,
                                                                                null
                                                                            ]
                                                                        }
                                                                    },
                                                                    {
                                                                        "type": {
                                                                            "mode": "chose",
                                                                            "label": "String",
                                                                            "nested": [
                                                                                {
                                                                                    "help": null,
                                                                                    "name": "property_name",
                                                                                    "spec": null,
                                                                                    "type": "text",
                                                                                    "label": "Property Name",
                                                                                    "options": null,
                                                                                    "required": true
                                                                                },
                                                                                {
                                                                                    "help": null,
                                                                                    "name": "description",
                                                                                    "spec": null,
                                                                                    "type": "text",
                                                                                    "label": "Description",
                                                                                    "options": null,
                                                                                    "required": false
                                                                                },
                                                                                {
                                                                                    "help": "The format is not being validated post generation. Add guidance in the prompt and/or property description.",
                                                                                    "name": "format",
                                                                                    "spec": null,
                                                                                    "type": "select",
                                                                                    "label": "Format",
                                                                                    "options": [
                                                                                        {
                                                                                            "label": "Date-Time",
                                                                                            "value": "date-time"
                                                                                        },
                                                                                        {
                                                                                            "label": "Date",
                                                                                            "value": "date"
                                                                                        },
                                                                                        {
                                                                                            "label": "Time",
                                                                                            "value": "time"
                                                                                        },
                                                                                        {
                                                                                            "label": "Email",
                                                                                            "value": "email"
                                                                                        },
                                                                                        {
                                                                                            "label": "Hostname",
                                                                                            "value": "hostname"
                                                                                        },
                                                                                        {
                                                                                            "label": "IPv4",
                                                                                            "value": "ipv4"
                                                                                        },
                                                                                        {
                                                                                            "label": "IPv6",
                                                                                            "value": "ipv6"
                                                                                        },
                                                                                        {
                                                                                            "label": "URI",
                                                                                            "value": "uri"
                                                                                        },
                                                                                        {
                                                                                            "label": "UUID",
                                                                                            "value": "uuid"
                                                                                        },
                                                                                        {
                                                                                            "label": "Regex",
                                                                                            "value": "regex"
                                                                                        }
                                                                                    ],
                                                                                    "required": null
                                                                                },
                                                                                {
                                                                                    "help": null,
                                                                                    "name": "required",
                                                                                    "spec": null,
                                                                                    "type": "boolean",
                                                                                    "label": "Required Property?",
                                                                                    "options": null,
                                                                                    "required": null
                                                                                },
                                                                                {
                                                                                    "help": null,
                                                                                    "name": "array",
                                                                                    "spec": null,
                                                                                    "type": "boolean",
                                                                                    "label": "Make property an array?",
                                                                                    "options": null,
                                                                                    "required": null
                                                                                }
                                                                            ]
                                                                        },
                                                                        "array": {
                                                                            "mode": "chose"
                                                                        },
                                                                        "format": {
                                                                            "mode": "chose",
                                                                            "label": "Empty"
                                                                        },
                                                                        "required": {
                                                                            "mode": "chose"
                                                                        }
                                                                    }
                                                                ]
                                                            }
                                                        },
                                                        {
                                                            "type": {
                                                                "mode": "chose",
                                                                "label": "Object",
                                                                "nested": [
                                                                    {
                                                                        "help": null,
                                                                        "name": "property_name",
                                                                        "spec": null,
                                                                        "type": "text",
                                                                        "label": "Property Name",
                                                                        "options": null,
                                                                        "required": true
                                                                    },
                                                                    {
                                                                        "help": null,
                                                                        "name": "description",
                                                                        "spec": null,
                                                                        "type": "text",
                                                                        "label": "Description",
                                                                        "options": null,
                                                                        "required": false
                                                                    },
                                                                    {
                                                                        "help": null,
                                                                        "name": "required",
                                                                        "spec": null,
                                                                        "type": "boolean",
                                                                        "label": "Required Property?",
                                                                        "options": null,
                                                                        "required": null
                                                                    },
                                                                    {
                                                                        "help": null,
                                                                        "name": "array",
                                                                        "spec": null,
                                                                        "type": "boolean",
                                                                        "label": "Make property an array?",
                                                                        "options": null,
                                                                        "required": null
                                                                    },
                                                                    {
                                                                        "help": null,
                                                                        "name": "properties",
                                                                        "spec": [
                                                                            {
                                                                                "name": "type",
                                                                                "type": "select",
                                                                                "label": "Value Type",
                                                                                "options": [
                                                                                    {
                                                                                        "label": "String",
                                                                                        "value": "string",
                                                                                        "nested": "rpc://gemini-ai/1/createResponseSchema?type=string"
                                                                                    },
                                                                                    {
                                                                                        "label": "Enum",
                                                                                        "value": "enum",
                                                                                        "nested": "rpc://gemini-ai/1/createResponseSchema?type=enum"
                                                                                    },
                                                                                    {
                                                                                        "label": "Number",
                                                                                        "value": "number",
                                                                                        "nested": "rpc://gemini-ai/1/createResponseSchema?type=number"
                                                                                    },
                                                                                    {
                                                                                        "label": "Integer",
                                                                                        "value": "integer",
                                                                                        "nested": "rpc://gemini-ai/1/createResponseSchema?type=integer"
                                                                                    },
                                                                                    {
                                                                                        "label": "Boolean",
                                                                                        "value": "boolean",
                                                                                        "nested": "rpc://gemini-ai/1/createResponseSchema?type=boolean"
                                                                                    },
                                                                                    {
                                                                                        "label": "Object",
                                                                                        "value": "object",
                                                                                        "nested": "rpc://gemini-ai/1/createResponseSchema?type=object"
                                                                                    }
                                                                                ]
                                                                            }
                                                                        ],
                                                                        "type": "array",
                                                                        "label": "Object Properties",
                                                                        "options": null,
                                                                        "required": true
                                                                    }
                                                                ]
                                                            },
                                                            "array": {
                                                                "mode": "chose"
                                                            },
                                                            "required": {
                                                                "mode": "chose"
                                                            },
                                                            "properties": {
                                                                "mode": "chose",
                                                                "items": [
                                                                    {
                                                                        "type": {
                                                                            "mode": "chose",
                                                                            "label": "String",
                                                                            "nested": [
                                                                                {
                                                                                    "help": null,
                                                                                    "name": "property_name",
                                                                                    "spec": null,
                                                                                    "type": "text",
                                                                                    "label": "Property Name",
                                                                                    "options": null,
                                                                                    "required": true
                                                                                },
                                                                                {
                                                                                    "help": null,
                                                                                    "name": "description",
                                                                                    "spec": null,
                                                                                    "type": "text",
                                                                                    "label": "Description",
                                                                                    "options": null,
                                                                                    "required": false
                                                                                },
                                                                                {
                                                                                    "help": "The format is not being validated post generation. Add guidance in the prompt and/or property description.",
                                                                                    "name": "format",
                                                                                    "spec": null,
                                                                                    "type": "select",
                                                                                    "label": "Format",
                                                                                    "options": [
                                                                                        {
                                                                                            "label": "Date-Time",
                                                                                            "value": "date-time"
                                                                                        },
                                                                                        {
                                                                                            "label": "Date",
                                                                                            "value": "date"
                                                                                        },
                                                                                        {
                                                                                            "label": "Time",
                                                                                            "value": "time"
                                                                                        },
                                                                                        {
                                                                                            "label": "Email",
                                                                                            "value": "email"
                                                                                        },
                                                                                        {
                                                                                            "label": "Hostname",
                                                                                            "value": "hostname"
                                                                                        },
                                                                                        {
                                                                                            "label": "IPv4",
                                                                                            "value": "ipv4"
                                                                                        },
                                                                                        {
                                                                                            "label": "IPv6",
                                                                                            "value": "ipv6"
                                                                                        },
                                                                                        {
                                                                                            "label": "URI",
                                                                                            "value": "uri"
                                                                                        },
                                                                                        {
                                                                                            "label": "UUID",
                                                                                            "value": "uuid"
                                                                                        },
                                                                                        {
                                                                                            "label": "Regex",
                                                                                            "value": "regex"
                                                                                        }
                                                                                    ],
                                                                                    "required": null
                                                                                },
                                                                                {
                                                                                    "help": null,
                                                                                    "name": "required",
                                                                                    "spec": null,
                                                                                    "type": "boolean",
                                                                                    "label": "Required Property?",
                                                                                    "options": null,
                                                                                    "required": null
                                                                                },
                                                                                {
                                                                                    "help": null,
                                                                                    "name": "array",
                                                                                    "spec": null,
                                                                                    "type": "boolean",
                                                                                    "label": "Make property an array?",
                                                                                    "options": null,
                                                                                    "required": null
                                                                                }
                                                                            ]
                                                                        },
                                                                        "array": {
                                                                            "mode": "chose"
                                                                        },
                                                                        "format": {
                                                                            "mode": "chose",
                                                                            "label": "Empty"
                                                                        },
                                                                        "required": {
                                                                            "mode": "chose"
                                                                        }
                                                                    },
                                                                    {
                                                                        "type": {
                                                                            "mode": "chose",
                                                                            "label": "String",
                                                                            "nested": [
                                                                                {
                                                                                    "help": null,
                                                                                    "name": "property_name",
                                                                                    "spec": null,
                                                                                    "type": "text",
                                                                                    "label": "Property Name",
                                                                                    "options": null,
                                                                                    "required": true
                                                                                },
                                                                                {
                                                                                    "help": null,
                                                                                    "name": "description",
                                                                                    "spec": null,
                                                                                    "type": "text",
                                                                                    "label": "Description",
                                                                                    "options": null,
                                                                                    "required": false
                                                                                },
                                                                                {
                                                                                    "help": "The format is not being validated post generation. Add guidance in the prompt and/or property description.",
                                                                                    "name": "format",
                                                                                    "spec": null,
                                                                                    "type": "select",
                                                                                    "label": "Format",
                                                                                    "options": [
                                                                                        {
                                                                                            "label": "Date-Time",
                                                                                            "value": "date-time"
                                                                                        },
                                                                                        {
                                                                                            "label": "Date",
                                                                                            "value": "date"
                                                                                        },
                                                                                        {
                                                                                            "label": "Time",
                                                                                            "value": "time"
                                                                                        },
                                                                                        {
                                                                                            "label": "Email",
                                                                                            "value": "email"
                                                                                        },
                                                                                        {
                                                                                            "label": "Hostname",
                                                                                            "value": "hostname"
                                                                                        },
                                                                                        {
                                                                                            "label": "IPv4",
                                                                                            "value": "ipv4"
                                                                                        },
                                                                                        {
                                                                                            "label": "IPv6",
                                                                                            "value": "ipv6"
                                                                                        },
                                                                                        {
                                                                                            "label": "URI",
                                                                                            "value": "uri"
                                                                                        },
                                                                                        {
                                                                                            "label": "UUID",
                                                                                            "value": "uuid"
                                                                                        },
                                                                                        {
                                                                                            "label": "Regex",
                                                                                            "value": "regex"
                                                                                        }
                                                                                    ],
                                                                                    "required": null
                                                                                },
                                                                                {
                                                                                    "help": null,
                                                                                    "name": "required",
                                                                                    "spec": null,
                                                                                    "type": "boolean",
                                                                                    "label": "Required Property?",
                                                                                    "options": null,
                                                                                    "required": null
                                                                                },
                                                                                {
                                                                                    "help": null,
                                                                                    "name": "array",
                                                                                    "spec": null,
                                                                                    "type": "boolean",
                                                                                    "label": "Make property an array?",
                                                                                    "options": null,
                                                                                    "required": null
                                                                                }
                                                                            ]
                                                                        },
                                                                        "array": {
                                                                            "mode": "chose"
                                                                        },
                                                                        "format": {
                                                                            "mode": "chose",
                                                                            "label": "Empty"
                                                                        },
                                                                        "required": {
                                                                            "mode": "chose"
                                                                        }
                                                                    },
                                                                    {
                                                                        "type": {
                                                                            "mode": "chose",
                                                                            "label": "Object",
                                                                            "nested": [
                                                                                {
                                                                                    "help": null,
                                                                                    "name": "property_name",
                                                                                    "spec": null,
                                                                                    "type": "text",
                                                                                    "label": "Property Name",
                                                                                    "options": null,
                                                                                    "required": true
                                                                                },
                                                                                {
                                                                                    "help": null,
                                                                                    "name": "description",
                                                                                    "spec": null,
                                                                                    "type": "text",
                                                                                    "label": "Description",
                                                                                    "options": null,
                                                                                    "required": false
                                                                                },
                                                                                {
                                                                                    "help": null,
                                                                                    "name": "required",
                                                                                    "spec": null,
                                                                                    "type": "boolean",
                                                                                    "label": "Required Property?",
                                                                                    "options": null,
                                                                                    "required": null
                                                                                },
                                                                                {
                                                                                    "help": null,
                                                                                    "name": "array",
                                                                                    "spec": null,
                                                                                    "type": "boolean",
                                                                                    "label": "Make property an array?",
                                                                                    "options": null,
                                                                                    "required": null
                                                                                },
                                                                                {
                                                                                    "help": null,
                                                                                    "name": "properties",
                                                                                    "spec": [
                                                                                        {
                                                                                            "name": "type",
                                                                                            "type": "select",
                                                                                            "label": "Value Type",
                                                                                            "options": [
                                                                                                {
                                                                                                    "label": "String",
                                                                                                    "value": "string",
                                                                                                    "nested": "rpc://gemini-ai/1/createResponseSchema?type=string"
                                                                                                },
                                                                                                {
                                                                                                    "label": "Enum",
                                                                                                    "value": "enum",
                                                                                                    "nested": "rpc://gemini-ai/1/createResponseSchema?type=enum"
                                                                                                },
                                                                                                {
                                                                                                    "label": "Number",
                                                                                                    "value": "number",
                                                                                                    "nested": "rpc://gemini-ai/1/createResponseSchema?type=number"
                                                                                                },
                                                                                                {
                                                                                                    "label": "Integer",
                                                                                                    "value": "integer",
                                                                                                    "nested": "rpc://gemini-ai/1/createResponseSchema?type=integer"
                                                                                                },
                                                                                                {
                                                                                                    "label": "Boolean",
                                                                                                    "value": "boolean",
                                                                                                    "nested": "rpc://gemini-ai/1/createResponseSchema?type=boolean"
                                                                                                },
                                                                                                {
                                                                                                    "label": "Object",
                                                                                                    "value": "object",
                                                                                                    "nested": "rpc://gemini-ai/1/createResponseSchema?type=object"
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ],
                                                                                    "type": "array",
                                                                                    "label": "Object Properties",
                                                                                    "options": null,
                                                                                    "required": true
                                                                                }
                                                                            ]
                                                                        },
                                                                        "array": {
                                                                            "mode": "chose"
                                                                        },
                                                                        "required": {
                                                                            "mode": "chose"
                                                                        },
                                                                        "properties": {
                                                                            "mode": "chose",
                                                                            "items": [
                                                                                {
                                                                                    "type": {
                                                                                        "mode": "chose",
                                                                                        "label": "String",
                                                                                        "nested": [
                                                                                            {
                                                                                                "help": null,
                                                                                                "name": "property_name",
                                                                                                "spec": null,
                                                                                                "type": "text",
                                                                                                "label": "Property Name",
                                                                                                "options": null,
                                                                                                "required": true
                                                                                            },
                                                                                            {
                                                                                                "help": null,
                                                                                                "name": "description",
                                                                                                "spec": null,
                                                                                                "type": "text",
                                                                                                "label": "Description",
                                                                                                "options": null,
                                                                                                "required": false
                                                                                            },
                                                                                            {
                                                                                                "help": "The format is not being validated post generation. Add guidance in the prompt and/or property description.",
                                                                                                "name": "format",
                                                                                                "spec": null,
                                                                                                "type": "select",
                                                                                                "label": "Format",
                                                                                                "options": [
                                                                                                    {
                                                                                                        "label": "Date-Time",
                                                                                                        "value": "date-time"
                                                                                                    },
                                                                                                    {
                                                                                                        "label": "Date",
                                                                                                        "value": "date"
                                                                                                    },
                                                                                                    {
                                                                                                        "label": "Time",
                                                                                                        "value": "time"
                                                                                                    },
                                                                                                    {
                                                                                                        "label": "Email",
                                                                                                        "value": "email"
                                                                                                    },
                                                                                                    {
                                                                                                        "label": "Hostname",
                                                                                                        "value": "hostname"
                                                                                                    },
                                                                                                    {
                                                                                                        "label": "IPv4",
                                                                                                        "value": "ipv4"
                                                                                                    },
                                                                                                    {
                                                                                                        "label": "IPv6",
                                                                                                        "value": "ipv6"
                                                                                                    },
                                                                                                    {
                                                                                                        "label": "URI",
                                                                                                        "value": "uri"
                                                                                                    },
                                                                                                    {
                                                                                                        "label": "UUID",
                                                                                                        "value": "uuid"
                                                                                                    },
                                                                                                    {
                                                                                                        "label": "Regex",
                                                                                                        "value": "regex"
                                                                                                    }
                                                                                                ],
                                                                                                "required": null
                                                                                            },
                                                                                            {
                                                                                                "help": null,
                                                                                                "name": "required",
                                                                                                "spec": null,
                                                                                                "type": "boolean",
                                                                                                "label": "Required Property?",
                                                                                                "options": null,
                                                                                                "required": null
                                                                                            },
                                                                                            {
                                                                                                "help": null,
                                                                                                "name": "array",
                                                                                                "spec": null,
                                                                                                "type": "boolean",
                                                                                                "label": "Make property an array?",
                                                                                                "options": null,
                                                                                                "required": null
                                                                                            }
                                                                                        ]
                                                                                    },
                                                                                    "array": {
                                                                                        "mode": "chose"
                                                                                    },
                                                                                    "format": {
                                                                                        "mode": "chose",
                                                                                        "label": "Empty"
                                                                                    },
                                                                                    "required": {
                                                                                        "mode": "chose"
                                                                                    }
                                                                                },
                                                                                {
                                                                                    "type": {
                                                                                        "mode": "chose",
                                                                                        "label": "String",
                                                                                        "nested": [
                                                                                            {
                                                                                                "help": null,
                                                                                                "name": "property_name",
                                                                                                "spec": null,
                                                                                                "type": "text",
                                                                                                "label": "Property Name",
                                                                                                "options": null,
                                                                                                "required": true
                                                                                            },
                                                                                            {
                                                                                                "help": null,
                                                                                                "name": "description",
                                                                                                "spec": null,
                                                                                                "type": "text",
                                                                                                "label": "Description",
                                                                                                "options": null,
                                                                                                "required": false
                                                                                            },
                                                                                            {
                                                                                                "help": "The format is not being validated post generation. Add guidance in the prompt and/or property description.",
                                                                                                "name": "format",
                                                                                                "spec": null,
                                                                                                "type": "select",
                                                                                                "label": "Format",
                                                                                                "options": [
                                                                                                    {
                                                                                                        "label": "Date-Time",
                                                                                                        "value": "date-time"
                                                                                                    },
                                                                                                    {
                                                                                                        "label": "Date",
                                                                                                        "value": "date"
                                                                                                    },
                                                                                                    {
                                                                                                        "label": "Time",
                                                                                                        "value": "time"
                                                                                                    },
                                                                                                    {
                                                                                                        "label": "Email",
                                                                                                        "value": "email"
                                                                                                    },
                                                                                                    {
                                                                                                        "label": "Hostname",
                                                                                                        "value": "hostname"
                                                                                                    },
                                                                                                    {
                                                                                                        "label": "IPv4",
                                                                                                        "value": "ipv4"
                                                                                                    },
                                                                                                    {
                                                                                                        "label": "IPv6",
                                                                                                        "value": "ipv6"
                                                                                                    },
                                                                                                    {
                                                                                                        "label": "URI",
                                                                                                        "value": "uri"
                                                                                                    },
                                                                                                    {
                                                                                                        "label": "UUID",
                                                                                                        "value": "uuid"
                                                                                                    },
                                                                                                    {
                                                                                                        "label": "Regex",
                                                                                                        "value": "regex"
                                                                                                    }
                                                                                                ],
                                                                                                "required": null
                                                                                            },
                                                                                            {
                                                                                                "help": null,
                                                                                                "name": "required",
                                                                                                "spec": null,
                                                                                                "type": "boolean",
                                                                                                "label": "Required Property?",
                                                                                                "options": null,
                                                                                                "required": null
                                                                                            },
                                                                                            {
                                                                                                "help": null,
                                                                                                "name": "array",
                                                                                                "spec": null,
                                                                                                "type": "boolean",
                                                                                                "label": "Make property an array?",
                                                                                                "options": null,
                                                                                                "required": null
                                                                                            }
                                                                                        ]
                                                                                    },
                                                                                    "array": {
                                                                                        "mode": "chose"
                                                                                    },
                                                                                    "format": {
                                                                                        "mode": "chose",
                                                                                        "label": "Empty"
                                                                                    },
                                                                                    "required": {
                                                                                        "mode": "chose"
                                                                                    }
                                                                                },
                                                                                {
                                                                                    "type": {
                                                                                        "mode": "chose",
                                                                                        "label": "Enum",
                                                                                        "nested": [
                                                                                            {
                                                                                                "help": null,
                                                                                                "name": "property_name",
                                                                                                "spec": null,
                                                                                                "type": "text",
                                                                                                "label": "Property Name",
                                                                                                "options": null,
                                                                                                "required": true
                                                                                            },
                                                                                            {
                                                                                                "help": null,
                                                                                                "name": "description",
                                                                                                "spec": null,
                                                                                                "type": "text",
                                                                                                "label": "Description",
                                                                                                "options": null,
                                                                                                "required": false
                                                                                            },
                                                                                            {
                                                                                                "help": "These are the allowed values for the property.",
                                                                                                "name": "enum_values",
                                                                                                "spec": {
                                                                                                    "name": "value",
                                                                                                    "type": "text"
                                                                                                },
                                                                                                "type": "array",
                                                                                                "label": "Enum Values",
                                                                                                "options": null,
                                                                                                "required": null
                                                                                            },
                                                                                            {
                                                                                                "help": null,
                                                                                                "name": "required",
                                                                                                "spec": null,
                                                                                                "type": "boolean",
                                                                                                "label": "Required Property?",
                                                                                                "options": null,
                                                                                                "required": null
                                                                                            },
                                                                                            {
                                                                                                "help": null,
                                                                                                "name": "array",
                                                                                                "spec": null,
                                                                                                "type": "boolean",
                                                                                                "label": "Make property an array?",
                                                                                                "options": null,
                                                                                                "required": null
                                                                                            }
                                                                                        ]
                                                                                    },
                                                                                    "array": {
                                                                                        "mode": "chose"
                                                                                    },
                                                                                    "required": {
                                                                                        "mode": "chose"
                                                                                    },
                                                                                    "enum_values": {
                                                                                        "mode": "chose",
                                                                                        "items": [
                                                                                            null,
                                                                                            null,
                                                                                            null
                                                                                        ]
                                                                                    }
                                                                                }
                                                                            ]
                                                                        }
                                                                    }
                                                                ]
                                                            }
                                                        },
                                                        {
                                                            "type": {
                                                                "mode": "chose",
                                                                "label": "Object",
                                                                "nested": [
                                                                    {
                                                                        "help": null,
                                                                        "name": "property_name",
                                                                        "spec": null,
                                                                        "type": "text",
                                                                        "label": "Property Name",
                                                                        "options": null,
                                                                        "required": true
                                                                    },
                                                                    {
                                                                        "help": null,
                                                                        "name": "description",
                                                                        "spec": null,
                                                                        "type": "text",
                                                                        "label": "Description",
                                                                        "options": null,
                                                                        "required": false
                                                                    },
                                                                    {
                                                                        "help": null,
                                                                        "name": "required",
                                                                        "spec": null,
                                                                        "type": "boolean",
                                                                        "label": "Required Property?",
                                                                        "options": null,
                                                                        "required": null
                                                                    },
                                                                    {
                                                                        "help": null,
                                                                        "name": "array",
                                                                        "spec": null,
                                                                        "type": "boolean",
                                                                        "label": "Make property an array?",
                                                                        "options": null,
                                                                        "required": null
                                                                    },
                                                                    {
                                                                        "help": null,
                                                                        "name": "properties",
                                                                        "spec": [
                                                                            {
                                                                                "name": "type",
                                                                                "type": "select",
                                                                                "label": "Value Type",
                                                                                "options": [
                                                                                    {
                                                                                        "label": "String",
                                                                                        "value": "string",
                                                                                        "nested": "rpc://gemini-ai/1/createResponseSchema?type=string"
                                                                                    },
                                                                                    {
                                                                                        "label": "Enum",
                                                                                        "value": "enum",
                                                                                        "nested": "rpc://gemini-ai/1/createResponseSchema?type=enum"
                                                                                    },
                                                                                    {
                                                                                        "label": "Number",
                                                                                        "value": "number",
                                                                                        "nested": "rpc://gemini-ai/1/createResponseSchema?type=number"
                                                                                    },
                                                                                    {
                                                                                        "label": "Integer",
                                                                                        "value": "integer",
                                                                                        "nested": "rpc://gemini-ai/1/createResponseSchema?type=integer"
                                                                                    },
                                                                                    {
                                                                                        "label": "Boolean",
                                                                                        "value": "boolean",
                                                                                        "nested": "rpc://gemini-ai/1/createResponseSchema?type=boolean"
                                                                                    },
                                                                                    {
                                                                                        "label": "Object",
                                                                                        "value": "object",
                                                                                        "nested": "rpc://gemini-ai/1/createResponseSchema?type=object"
                                                                                    }
                                                                                ]
                                                                            }
                                                                        ],
                                                                        "type": "array",
                                                                        "label": "Object Properties",
                                                                        "options": null,
                                                                        "required": true
                                                                    }
                                                                ]
                                                            },
                                                            "array": {
                                                                "mode": "chose"
                                                            },
                                                            "required": {
                                                                "mode": "chose"
                                                            },
                                                            "properties": {
                                                                "mode": "chose",
                                                                "items": [
                                                                    {
                                                                        "type": {
                                                                            "mode": "chose",
                                                                            "label": "String",
                                                                            "nested": [
                                                                                {
                                                                                    "help": null,
                                                                                    "name": "property_name",
                                                                                    "spec": null,
                                                                                    "type": "text",
                                                                                    "label": "Property Name",
                                                                                    "options": null,
                                                                                    "required": true
                                                                                },
                                                                                {
                                                                                    "help": null,
                                                                                    "name": "description",
                                                                                    "spec": null,
                                                                                    "type": "text",
                                                                                    "label": "Description",
                                                                                    "options": null,
                                                                                    "required": false
                                                                                },
                                                                                {
                                                                                    "help": "The format is not being validated post generation. Add guidance in the prompt and/or property description.",
                                                                                    "name": "format",
                                                                                    "spec": null,
                                                                                    "type": "select",
                                                                                    "label": "Format",
                                                                                    "options": [
                                                                                        {
                                                                                            "label": "Date-Time",
                                                                                            "value": "date-time"
                                                                                        },
                                                                                        {
                                                                                            "label": "Date",
                                                                                            "value": "date"
                                                                                        },
                                                                                        {
                                                                                            "label": "Time",
                                                                                            "value": "time"
                                                                                        },
                                                                                        {
                                                                                            "label": "Email",
                                                                                            "value": "email"
                                                                                        },
                                                                                        {
                                                                                            "label": "Hostname",
                                                                                            "value": "hostname"
                                                                                        },
                                                                                        {
                                                                                            "label": "IPv4",
                                                                                            "value": "ipv4"
                                                                                        },
                                                                                        {
                                                                                            "label": "IPv6",
                                                                                            "value": "ipv6"
                                                                                        },
                                                                                        {
                                                                                            "label": "URI",
                                                                                            "value": "uri"
                                                                                        },
                                                                                        {
                                                                                            "label": "UUID",
                                                                                            "value": "uuid"
                                                                                        },
                                                                                        {
                                                                                            "label": "Regex",
                                                                                            "value": "regex"
                                                                                        }
                                                                                    ],
                                                                                    "required": null
                                                                                },
                                                                                {
                                                                                    "help": null,
                                                                                    "name": "required",
                                                                                    "spec": null,
                                                                                    "type": "boolean",
                                                                                    "label": "Required Property?",
                                                                                    "options": null,
                                                                                    "required": null
                                                                                },
                                                                                {
                                                                                    "help": null,
                                                                                    "name": "array",
                                                                                    "spec": null,
                                                                                    "type": "boolean",
                                                                                    "label": "Make property an array?",
                                                                                    "options": null,
                                                                                    "required": null
                                                                                }
                                                                            ]
                                                                        },
                                                                        "array": {
                                                                            "mode": "chose"
                                                                        },
                                                                        "format": {
                                                                            "mode": "chose",
                                                                            "label": "Empty"
                                                                        },
                                                                        "required": {
                                                                            "mode": "chose"
                                                                        }
                                                                    },
                                                                    {
                                                                        "type": {
                                                                            "mode": "chose",
                                                                            "label": "String",
                                                                            "nested": [
                                                                                {
                                                                                    "help": null,
                                                                                    "name": "property_name",
                                                                                    "spec": null,
                                                                                    "type": "text",
                                                                                    "label": "Property Name",
                                                                                    "options": null,
                                                                                    "required": true
                                                                                },
                                                                                {
                                                                                    "help": null,
                                                                                    "name": "description",
                                                                                    "spec": null,
                                                                                    "type": "text",
                                                                                    "label": "Description",
                                                                                    "options": null,
                                                                                    "required": false
                                                                                },
                                                                                {
                                                                                    "help": "The format is not being validated post generation. Add guidance in the prompt and/or property description.",
                                                                                    "name": "format",
                                                                                    "spec": null,
                                                                                    "type": "select",
                                                                                    "label": "Format",
                                                                                    "options": [
                                                                                        {
                                                                                            "label": "Date-Time",
                                                                                            "value": "date-time"
                                                                                        },
                                                                                        {
                                                                                            "label": "Date",
                                                                                            "value": "date"
                                                                                        },
                                                                                        {
                                                                                            "label": "Time",
                                                                                            "value": "time"
                                                                                        },
                                                                                        {
                                                                                            "label": "Email",
                                                                                            "value": "email"
                                                                                        },
                                                                                        {
                                                                                            "label": "Hostname",
                                                                                            "value": "hostname"
                                                                                        },
                                                                                        {
                                                                                            "label": "IPv4",
                                                                                            "value": "ipv4"
                                                                                        },
                                                                                        {
                                                                                            "label": "IPv6",
                                                                                            "value": "ipv6"
                                                                                        },
                                                                                        {
                                                                                            "label": "URI",
                                                                                            "value": "uri"
                                                                                        },
                                                                                        {
                                                                                            "label": "UUID",
                                                                                            "value": "uuid"
                                                                                        },
                                                                                        {
                                                                                            "label": "Regex",
                                                                                            "value": "regex"
                                                                                        }
                                                                                    ],
                                                                                    "required": null
                                                                                },
                                                                                {
                                                                                    "help": null,
                                                                                    "name": "required",
                                                                                    "spec": null,
                                                                                    "type": "boolean",
                                                                                    "label": "Required Property?",
                                                                                    "options": null,
                                                                                    "required": null
                                                                                },
                                                                                {
                                                                                    "help": null,
                                                                                    "name": "array",
                                                                                    "spec": null,
                                                                                    "type": "boolean",
                                                                                    "label": "Make property an array?",
                                                                                    "options": null,
                                                                                    "required": null
                                                                                }
                                                                            ]
                                                                        },
                                                                        "array": {
                                                                            "mode": "chose"
                                                                        },
                                                                        "format": {
                                                                            "mode": "chose",
                                                                            "label": "Empty"
                                                                        },
                                                                        "required": {
                                                                            "mode": "chose"
                                                                        }
                                                                    }
                                                                ]
                                                            }
                                                        }
                                                    ]
                                                },
                                                "responseModalities": {
                                                    "mode": "chose"
                                                }
                                            }
                                        },
                                        "system_instruction": {
                                            "nested": {
                                                "parts": {
                                                    "mode": "chose",
                                                    "items": [
                                                        null
                                                    ]
                                                }
                                            }
                                        },
                                        "google_maps_context": {
                                            "mode": "chose"
                                        },
                                        "google_search_context": {
                                            "mode": "chose"
                                        },
                                        "file_search_store_context": {
                                            "mode": "chose"
                                        },
                                        "function_declarations_context": {
                                            "mode": "chose"
                                        }
                                    },
                                    "parameters": {
                                        "__IMTCONN__": {
                                            "data": {
                                                "scoped": "true",
                                                "connection": "gemini-ai-q9zyjp"
                                            },
                                            "label": "GeminiConnection_AOS_2"
                                        }
                                    }
                                },
                                "parameters": [
                                    {
                                        "name": "__IMTCONN__",
                                        "type": "account:gemini-ai-q9zyjp",
                                        "label": "Connection",
                                        "required": true
                                    }
                                ],
                                "expect": [
                                    {
                                        "name": "model",
                                        "type": "select",
                                        "label": "AI Model",
                                        "required": true
                                    },
                                    {
                                        "name": "contents",
                                        "spec": [
                                            {
                                                "name": "role",
                                                "type": "select",
                                                "label": "Role",
                                                "options": [
                                                    {
                                                        "label": "User",
                                                        "value": "user"
                                                    },
                                                    {
                                                        "label": "Model",
                                                        "value": "model"
                                                    }
                                                ]
                                            },
                                            {
                                                "name": "parts",
                                                "spec": [
                                                    {
                                                        "name": "type",
                                                        "type": "select",
                                                        "label": "Message Type",
                                                        "options": [
                                                            {
                                                                "label": "Text",
                                                                "value": "text",
                                                                "nested": [
                                                                    {
                                                                        "name": "text",
                                                                        "type": "text",
                                                                        "label": "Text",
                                                                        "required": false
                                                                    }
                                                                ]
                                                            },
                                                            {
                                                                "label": "File",
                                                                "value": "file",
                                                                "nested": [
                                                                    {
                                                                        "name": "file_data",
                                                                        "spec": [
                                                                            {
                                                                                "name": "mime_type",
                                                                                "type": "text",
                                                                                "label": "Mime Type",
                                                                                "required": false
                                                                            },
                                                                            {
                                                                                "help": "You get this from the 'Upload a File' module.",
                                                                                "name": "file_uri",
                                                                                "type": "text",
                                                                                "label": "File URI",
                                                                                "required": false
                                                                            }
                                                                        ],
                                                                        "type": "collection",
                                                                        "label": "File Data",
                                                                        "required": false
                                                                    }
                                                                ]
                                                            },
                                                            {
                                                                "label": "Function Call",
                                                                "value": "functionCall",
                                                                "nested": [
                                                                    {
                                                                        "name": "functionCall",
                                                                        "spec": [
                                                                            {
                                                                                "help": "The name of the function to call.",
                                                                                "name": "name",
                                                                                "type": "text",
                                                                                "label": "Name",
                                                                                "required": true,
                                                                                "validate": {
                                                                                    "max": 64
                                                                                }
                                                                            },
                                                                            {
                                                                                "help": "The function parameters and values in JSON object format.",
                                                                                "name": "args",
                                                                                "type": "json",
                                                                                "label": "Arguments"
                                                                            },
                                                                            {
                                                                                "help": "The unique ID of the function call.",
                                                                                "name": "id",
                                                                                "type": "text",
                                                                                "label": "Function Call ID"
                                                                            }
                                                                        ],
                                                                        "type": "collection",
                                                                        "label": "Function Call"
                                                                    }
                                                                ]
                                                            },
                                                            {
                                                                "label": "Function Response",
                                                                "value": "functionResponse",
                                                                "nested": [
                                                                    {
                                                                        "name": "functionResponse",
                                                                        "spec": [
                                                                            {
                                                                                "help": "The name of the function to call.",
                                                                                "name": "name",
                                                                                "type": "text",
                                                                                "label": "Name",
                                                                                "required": true,
                                                                                "validate": {
                                                                                    "max": 64
                                                                                }
                                                                            },
                                                                            {
                                                                                "help": "The function response in JSON object format.",
                                                                                "name": "response",
                                                                                "type": "json",
                                                                                "label": "Response",
                                                                                "required": true
                                                                            }
                                                                        ],
                                                                        "type": "collection",
                                                                        "label": "Function Response"
                                                                    }
                                                                ]
                                                            }
                                                        ]
                                                    },
                                                    {
                                                        "name": "thoughtSignature",
                                                        "type": "text",
                                                        "label": "Thought Signature"
                                                    }
                                                ],
                                                "type": "array",
                                                "label": "Parts"
                                            }
                                        ],
                                        "type": "array",
                                        "label": "Messages",
                                        "required": true
                                    },
                                    {
                                        "name": "system_instruction",
                                        "spec": [
                                            {
                                                "name": "parts",
                                                "spec": {
                                                    "name": "value",
                                                    "spec": [
                                                        {
                                                            "name": "text",
                                                            "type": "text",
                                                            "label": "Value"
                                                        }
                                                    ],
                                                    "type": "collection",
                                                    "label": "Prompt"
                                                },
                                                "type": "array",
                                                "label": "Prompts"
                                            }
                                        ],
                                        "type": "collection",
                                        "label": "System Instructions"
                                    },
                                    {
                                        "name": "safetySettings",
                                        "spec": [
                                            {
                                                "name": "category",
                                                "type": "select",
                                                "label": "Category",
                                                "options": [
                                                    {
                                                        "label": "Harassment content",
                                                        "value": "HARM_CATEGORY_HARASSMENT"
                                                    },
                                                    {
                                                        "label": "Hate speech and content",
                                                        "value": "HARM_CATEGORY_HATE_SPEECH"
                                                    },
                                                    {
                                                        "label": "Sexually explicit content.",
                                                        "value": "HARM_CATEGORY_SEXUALLY_EXPLICIT"
                                                    },
                                                    {
                                                        "label": "Dangerous content:",
                                                        "value": "HARM_CATEGORY_DANGEROUS_CONTENT"
                                                    }
                                                ]
                                            },
                                            {
                                                "name": "threshold",
                                                "type": "select",
                                                "label": "Threshold",
                                                "options": [
                                                    {
                                                        "label": "Block low and above.",
                                                        "value": "BLOCK_LOW_AND_ABOVE"
                                                    },
                                                    {
                                                        "label": "Block medium and above.",
                                                        "value": "BLOCK_MEDIUM_AND_ABOVE"
                                                    },
                                                    {
                                                        "label": "Block only high.",
                                                        "value": "BLOCK_ONLY_HIGH"
                                                    },
                                                    {
                                                        "label": "Block none.",
                                                        "value": "BLOCK_NONE"
                                                    }
                                                ]
                                            }
                                        ],
                                        "type": "array",
                                        "label": "Safety Settings"
                                    },
                                    {
                                        "name": "generationConfig",
                                        "spec": [
                                            {
                                                "name": "stopSequences",
                                                "spec": {
                                                    "name": "value",
                                                    "type": "text",
                                                    "label": "Stop Sequence"
                                                },
                                                "type": "array",
                                                "label": "Stop Sequences"
                                            },
                                            {
                                                "name": "responseModalities",
                                                "type": "select",
                                                "label": "Response Modalities",
                                                "multiple": true,
                                                "validate": {
                                                    "enum": [
                                                        "text",
                                                        "image"
                                                    ]
                                                }
                                            },
                                            {
                                                "name": "maxOutputTokens",
                                                "type": "number",
                                                "label": "Max Output Tokens"
                                            },
                                            {
                                                "name": "temperature",
                                                "type": "number",
                                                "label": "Temperature",
                                                "validate": {
                                                    "max": 1,
                                                    "min": 0
                                                }
                                            },
                                            {
                                                "name": "topP",
                                                "type": "number",
                                                "label": "Top P",
                                                "validate": {
                                                    "max": 1,
                                                    "min": 0
                                                }
                                            },
                                            {
                                                "name": "topK",
                                                "type": "number",
                                                "label": "Top K"
                                            },
                                            {
                                                "name": "thinkingConfig",
                                                "spec": [
                                                    {
                                                        "name": "thinkingBudget",
                                                        "type": "number",
                                                        "label": "Thinking Budget"
                                                    },
                                                    {
                                                        "name": "include_thoughts",
                                                        "type": "boolean",
                                                        "label": "Include Thoughts"
                                                    },
                                                    {
                                                        "name": "thinking_level",
                                                        "type": "select",
                                                        "label": "Thinking Level",
                                                        "validate": {
                                                            "enum": [
                                                                "low",
                                                                "high"
                                                            ]
                                                        }
                                                    }
                                                ],
                                                "type": "collection",
                                                "label": "Thinking Config"
                                            },
                                            {
                                                "name": "mediaResolution",
                                                "type": "select",
                                                "label": "Media Resolution",
                                                "validate": {
                                                    "enum": [
                                                        "media_resolution_low",
                                                        "media_resolution_medium",
                                                        "media_resolution_high"
                                                    ]
                                                }
                                            },
                                            {
                                                "name": "imageConfig",
                                                "spec": [
                                                    {
                                                        "name": "imageSize",
                                                        "type": "select",
                                                        "label": "Image Size",
                                                        "validate": {
                                                            "enum": [
                                                                "1K",
                                                                "2K",
                                                                "4K"
                                                            ]
                                                        }
                                                    }
                                                ],
                                                "type": "collection",
                                                "label": "Image Configuration"
                                            },
                                            {
                                                "name": "responseMimeType",
                                                "type": "select",
                                                "label": "Response Format"
                                            },
                                            {
                                                "name": "responseSchema",
                                                "type": "any",
                                                "label": "Response Schema (Deprecated)"
                                            },
                                            {
                                                "name": "new_responseSchema",
                                                "spec": [
                                                    {
                                                        "name": "type",
                                                        "type": "select",
                                                        "label": "Value Type",
                                                        "options": [
                                                            {
                                                                "label": "String",
                                                                "value": "string",
                                                                "nested": "rpc://gemini-ai/1/createResponseSchema?type=string"
                                                            },
                                                            {
                                                                "label": "Enum",
                                                                "value": "enum",
                                                                "nested": "rpc://gemini-ai/1/createResponseSchema?type=enum"
                                                            },
                                                            {
                                                                "label": "Number",
                                                                "value": "number",
                                                                "nested": "rpc://gemini-ai/1/createResponseSchema?type=number"
                                                            },
                                                            {
                                                                "label": "Integer",
                                                                "value": "integer",
                                                                "nested": "rpc://gemini-ai/1/createResponseSchema?type=integer"
                                                            },
                                                            {
                                                                "label": "Boolean",
                                                                "value": "boolean",
                                                                "nested": "rpc://gemini-ai/1/createResponseSchema?type=boolean"
                                                            },
                                                            {
                                                                "label": "Object",
                                                                "value": "object",
                                                                "nested": "rpc://gemini-ai/1/createResponseSchema?type=object"
                                                            }
                                                        ]
                                                    }
                                                ],
                                                "type": "array",
                                                "label": "Response Schema"
                                            }
                                        ],
                                        "type": "collection",
                                        "label": "Generation configurations"
                                    },
                                    {
                                        "name": "tools",
                                        "type": "any",
                                        "label": "Tools"
                                    },
                                    {
                                        "name": "tool_config",
                                        "type": "any",
                                        "label": "Tool Config"
                                    },
                                    {
                                        "name": "function_declarations_context",
                                        "type": "boolean",
                                        "label": "Function Declarations Grounding"
                                    },
                                    {
                                        "name": "url_context",
                                        "type": "boolean",
                                        "label": "URL Context"
                                    },
                                    {
                                        "name": "google_search_context",
                                        "type": "boolean",
                                        "label": "Google Search Grounding"
                                    },
                                    {
                                        "name": "code_execution",
                                        "type": "boolean",
                                        "label": "Code Execution"
                                    },
                                    {
                                        "name": "google_maps_context",
                                        "type": "boolean",
                                        "label": "Google Maps Grounding"
                                    },
                                    {
                                        "name": "file_search_store_context",
                                        "type": "boolean",
                                        "label": "File Search Store Context"
                                    }
                                ],
                                "advanced": true
                            }
                        },
                        {
                            "id": 189,
                            "module": "gemini-ai:createACompletionGeminiPro",
                            "version": 1,
                            "parameters": {
                                "__IMTCONN__": 13301844
                            },
                            "filter": {
                                "name": "PERSON FIT",
                                "conditions": [
                                    [
                                        {
                                            "a": "{{184.result.`Decision-Maker`.decision_maker_fit}}",
                                            "b": "FIT",
                                            "o": "text:equal"
                                        }
                                    ]
                                ]
                            },
                            "mapper": {
                                "model": "gemini-3-pro-preview",
                                "contents": [
                                    {
                                        "role": "user",
                                        "parts": [
                                            {
                                                "text": "\"CompanyUnderstaning\": \"{{205.result}}\",\n\"PersonUnderstanding\": \"{{184.result}}\",\n\"CompanyName\": \"{{1.`16`}}\",\n\"InternalSignalsLinkedin\": \"{{194.result}}\"",
                                                "type": "text"
                                            }
                                        ]
                                    }
                                ],
                                "generationConfig": {
                                    "imageConfig": {},
                                    "temperature": "0.2",
                                    "stopSequences": [
                                        ""
                                    ],
                                    "thinkingConfig": {
                                        "thinkingBudget": "512"
                                    },
                                    "maxOutputTokens": "4096",
                                    "responseMimeType": "application/json"
                                },
                                "system_instruction": {
                                    "parts": [
                                        {
                                            "text": "You are the AOS module: \"Feasibility + Base Contribution (v3, per line + per buyer segment)\".\r\n\r\nGOAL:\r\n1) Decide where AOS-CAO can be inserted (which B2B business lines AND which buyer segments within them).\r\n2) Run two checks PER buyer segment: Sourceability and Signal Detectability.\r\n3) Build Base Contribution ONLY from inserted segments (segments that pass BOTH checks).\r\n4) Final verdict rule:\r\n   - If Base Contribution has ZERO inserted segments => DROP\r\n   - If Base Contribution has >=1 inserted segment => FIT\r\n\r\nINPUTS PROVIDED BY USER:\r\n- business_intel_json (Module 1 output; guaranteed to have >=1 B2B line)\r\n- optional: extractor_json (LinkedIn facts/inferences)\r\n- optional: signals_json (combined internal/external signals output, if available)\r\n- aos_context (string describing AOS USPs + capabilities; keep it short)\r\n- optional: sales_nav_target_definition (string)\r\n\r\nHARD RULES:\r\n- Output ONLY valid JSON matching the exact schema and keys provided.\r\n- Arrays are allowed.\r\n- Do NOT invent facts. If unknown, output \"unknown\" conservatively.\r\n- Keep assumptions minimal. Any inferred content must be labeled \"[Assumed]\" and include inline justification:\r\n  [Assumed | Confidence: Very High/High/Medium/Low | Evidence: <field/path> | Reason: <short reason>]\r\n\r\nCRITICAL NON-NEGOTIABLE RULE (NO SEGMENT DROPPING):\r\n- You MUST evaluate EVERY buyer segment coming from Business Intel.\r\n- Do NOT reduce, merge, omit, or re-select segments.\r\n- line_evaluations[].segment_evaluations[] MUST contain the exact same number of segments as business_intel_json.result.business_lines[].buyer_segments[] for that line, and preserve the same order.\r\n- If a segment is not viable, mark it inserted=false and explain why. Do NOT delete it.\r\n\r\nDEFINITIONS:\r\nAOS-CAO can be inserted into a buyer segment only if:\r\nA) The parent business line is B2B (b2b_b2c == \"B2B\")\r\nB) Sourceability PASS for that segment (Sales Nav can isolate the buyer role + sector + geo at scale)\r\nC) Signal Detectability PASS for that segment (why-now / relevance signals can be detected with allowed tools)\r\n\r\nCHECK 1 — SOURCEABILITY (PER SEGMENT):\r\nPASS only if you can define plausible LinkedIn Sales Navigator filter configurations that isolate:\r\n- buyer role(s)\r\n- sector/industry\r\n- geo\r\nFAIL if roles are unknown, ICP is vague, geo unusable, or Sales Nav isolation is not plausible.\r\n\r\nCHECK 2 — SIGNAL DETECTABILITY (PER SEGMENT):\r\nPASS only if you can name concrete detection tracks using ONLY:\r\n- LinkedIn (profile + company page + posts + hiring/headcount cues + beliefs)\r\n- Crunchbase (funding/financial/company events signals when applicable)\r\n- BuiltWith (tech stack signals when applicable)\r\n- Perplexity AI (competitor/market/regulation/demand signals)\r\nFAIL if you cannot define concrete tracks that produce relevance / why-now angles.\r\n\r\nVOLUME DEFINITIONS (SOURCEABILITY):\r\n- HIGH = thousands+\r\n- MEDIUM = ~hundreds to low thousands\r\n- LOW = <~hundreds\r\n- UNKNOWN = cannot justify\r\n\r\nLINE INSERTION RULE:\r\n- A business line is considered inserted_into_base_contribution = true if it has >=1 segment with inserted=true.\r\n- Segments that fail are excluded but must remain listed with reasons.\r\n\r\nBASE CONTRIBUTION BUILD RULE:\r\n- Base Contribution is built ONLY from segments with inserted=true.\r\n- If there are zero inserted segments across all lines => final_verdict=DROP and base_contribution fields are \"N/A\".\r\n\r\nCOMMERCIAL FRAMING REQUIREMENT (AOS CONTEXT):\r\nBase Contribution must reflect AOS positioning (relevance-first + cost-efficient + deliverability/inboxing + automation at scale).\r\n- Do NOT write the email hook/angle.\r\n- Do describe the installed CAO-with-AOS in a way that could be pasted into email “Details” without the crafter inventing capabilities.\r\n- If signals_json is provided, you may reference the *types* of signals used for relevance (e.g., hiring spikes, competitor moves, headcount growth, tech stack, funding, beliefs), but do NOT fabricate specific events.\r\n\r\nPROMISE GUARDRAIL (PER SEGMENT):\r\nFor each segment, output promise_guardrail so downstream copy does not overpromise:\r\n- HIGH/MEDIUM => can imply scale\r\n- LOW => must imply selective/limited coverage\r\n- UNKNOWN => avoid volume claims\r\n\r\nOUTPUT ONLY JSON. No markdown. No commentary.\r\n\r\nEXACT OUTPUT SCHEMA (DO NOT CHANGE):\r\n{\r\n  \"base_contribution\": {\r\n    \"cao_with_aos\": {\r\n      \"one_liner\": \"string\",\r\n      \"expanded\": \"string\",\r\n      \"icp_targeting_statement\": \"string\"\r\n    }\r\n  },\r\n  \"line_evaluations\": [\r\n    {\r\n      \"line_name\": \"string\",\r\n      \"b2b_b2c\": \"B2B|B2C|UNKNOWN\",\r\n      \"inserted_into_base_contribution\": true,\r\n      \"line_exclusion_reason\": \"string\",\r\n      \"segment_evaluations\": [\r\n        {\r\n          \"segment_index\": 1,\r\n          \"target_sector\": \"string\",\r\n          \"target_role\": \"string\",\r\n          \"target_geo\": \"string\",\r\n          \"inserted_into_base_contribution\": true,\r\n          \"segment_exclusion_reason\": \"string\",\r\n          \"sourceability_check\": {\r\n            \"status\": \"PASS|FAIL\",\r\n            \"sales_nav_configuration\": \"string\",\r\n            \"estimated_sourceable_volume\": \"HIGH|MEDIUM|LOW|UNKNOWN\"\r\n          },\r\n          \"signal_detectability_check\": {\r\n            \"status\": \"PASS|FAIL\",\r\n            \"detection_method\": \"string\"\r\n          },\r\n          \"promise_guardrail\": {\r\n            \"recommended_framing\": \"string\",\r\n            \"avoid_claims\": \"string\"\r\n          }\r\n        }\r\n      ]\r\n    }\r\n  ],\r\n  \"final_verdict\": {\r\n    \"result\": \"FIT|DROP\",\r\n    \"operational_summary\": \"string\"\r\n  }\r\n}\n\r\n\r\nBASE CONTRIBUTION FIELD REQUIREMENTS (STRICT):\r\n- one_liner:\r\n  ONE sentence. Must include outcome (appointments/conversations), ICP buyer titles/org type, and geo.\r\n  If multiple inserted segments exist, include them as clauses (still one sentence).\r\n  If DROP => \"N/A\".\r\n\r\n- expanded:\r\n  3–6 lines separated by \"\\n\".\r\n  Must explicitly cover: sourcing → qualification → enrichment for relevance → 1:1 personalized copy → deliverability/inboxing → outbound execution.\r\n  If multiple inserted lines exist, structure as:\r\n  \"TRACK 1 (Line: <line_name>): ...\\nTRACK 2 (Line: ...): ...\"\r\n  If DROP => \"N/A\".\r\n\r\n- icp_targeting_statement:\r\n  Must list ONLY inserted segments, grouped by line:\r\n  \"LINE: <line_name>\\n- Segment: <sector> | Roles: <roles> | Geo: <geo> | Volume: <HIGH/MED/LOW/UNK>\\n...\"\r\n  If DROP => \"N/A\". \n\n\nOUTPUT REQUIREMENTS\r\n- Output MUST be exactly one JSON object that matches the required output format.\r\n- Do NOT wrap the output in code fences (```).\r\n- Do NOT output anything except the JSON object."
                                        }
                                    ]
                                }
                            },
                            "metadata": {
                                "designer": {
                                    "x": 1584,
                                    "y": 5,
                                    "name": "Feasibility (3proPrev) 5"
                                },
                                "restore": {
                                    "expect": {
                                        "model": {
                                            "mode": "chose",
                                            "label": "gemini-3-pro-preview"
                                        },
                                        "contents": {
                                            "mode": "chose",
                                            "items": [
                                                {
                                                    "role": {
                                                        "mode": "chose",
                                                        "label": "User"
                                                    },
                                                    "parts": {
                                                        "mode": "chose",
                                                        "items": [
                                                            {
                                                                "type": {
                                                                    "mode": "chose",
                                                                    "label": "Text"
                                                                }
                                                            }
                                                        ]
                                                    }
                                                }
                                            ]
                                        },
                                        "url_context": {
                                            "mode": "chose"
                                        },
                                        "code_execution": {
                                            "mode": "chose"
                                        },
                                        "safetySettings": {
                                            "mode": "chose"
                                        },
                                        "generationConfig": {
                                            "nested": {
                                                "imageConfig": {
                                                    "nested": {
                                                        "imageSize": {
                                                            "mode": "chose",
                                                            "label": "Empty"
                                                        }
                                                    }
                                                },
                                                "stopSequences": {
                                                    "mode": "chose",
                                                    "items": [
                                                        null
                                                    ],
                                                    "collapsed": true
                                                },
                                                "thinkingConfig": {
                                                    "nested": {
                                                        "thinking_level": {
                                                            "mode": "chose",
                                                            "label": "Empty"
                                                        },
                                                        "include_thoughts": {
                                                            "mode": "chose"
                                                        }
                                                    }
                                                },
                                                "mediaResolution": {
                                                    "mode": "chose",
                                                    "label": "Empty"
                                                },
                                                "responseMimeType": {
                                                    "mode": "chose",
                                                    "label": "JSON Output"
                                                },
                                                "new_responseSchema": {
                                                    "mode": "chose"
                                                },
                                                "responseModalities": {
                                                    "mode": "chose"
                                                }
                                            }
                                        },
                                        "system_instruction": {
                                            "nested": {
                                                "parts": {
                                                    "mode": "chose",
                                                    "items": [
                                                        null
                                                    ]
                                                }
                                            }
                                        },
                                        "google_maps_context": {
                                            "mode": "chose"
                                        },
                                        "google_search_context": {
                                            "mode": "chose"
                                        },
                                        "file_search_store_context": {
                                            "mode": "chose"
                                        },
                                        "function_declarations_context": {
                                            "mode": "chose"
                                        }
                                    },
                                    "parameters": {
                                        "__IMTCONN__": {
                                            "data": {
                                                "scoped": "true",
                                                "connection": "gemini-ai-q9zyjp"
                                            },
                                            "label": "GeminiConnection_AOS_2"
                                        }
                                    }
                                },
                                "parameters": [
                                    {
                                        "name": "__IMTCONN__",
                                        "type": "account:gemini-ai-q9zyjp",
                                        "label": "Connection",
                                        "required": true
                                    }
                                ],
                                "expect": [
                                    {
                                        "name": "model",
                                        "type": "select",
                                        "label": "AI Model",
                                        "required": true
                                    },
                                    {
                                        "name": "contents",
                                        "spec": [
                                            {
                                                "name": "role",
                                                "type": "select",
                                                "label": "Role",
                                                "options": [
                                                    {
                                                        "label": "User",
                                                        "value": "user"
                                                    },
                                                    {
                                                        "label": "Model",
                                                        "value": "model"
                                                    }
                                                ]
                                            },
                                            {
                                                "name": "parts",
                                                "spec": [
                                                    {
                                                        "name": "type",
                                                        "type": "select",
                                                        "label": "Message Type",
                                                        "options": [
                                                            {
                                                                "label": "Text",
                                                                "value": "text",
                                                                "nested": [
                                                                    {
                                                                        "name": "text",
                                                                        "type": "text",
                                                                        "label": "Text",
                                                                        "required": false
                                                                    }
                                                                ]
                                                            },
                                                            {
                                                                "label": "File",
                                                                "value": "file",
                                                                "nested": [
                                                                    {
                                                                        "name": "file_data",
                                                                        "spec": [
                                                                            {
                                                                                "name": "mime_type",
                                                                                "type": "text",
                                                                                "label": "Mime Type",
                                                                                "required": false
                                                                            },
                                                                            {
                                                                                "help": "You get this from the 'Upload a File' module.",
                                                                                "name": "file_uri",
                                                                                "type": "text",
                                                                                "label": "File URI",
                                                                                "required": false
                                                                            }
                                                                        ],
                                                                        "type": "collection",
                                                                        "label": "File Data",
                                                                        "required": false
                                                                    }
                                                                ]
                                                            },
                                                            {
                                                                "label": "Function Call",
                                                                "value": "functionCall",
                                                                "nested": [
                                                                    {
                                                                        "name": "functionCall",
                                                                        "spec": [
                                                                            {
                                                                                "help": "The name of the function to call.",
                                                                                "name": "name",
                                                                                "type": "text",
                                                                                "label": "Name",
                                                                                "required": true,
                                                                                "validate": {
                                                                                    "max": 64
                                                                                }
                                                                            },
                                                                            {
                                                                                "help": "The function parameters and values in JSON object format.",
                                                                                "name": "args",
                                                                                "type": "json",
                                                                                "label": "Arguments"
                                                                            },
                                                                            {
                                                                                "help": "The unique ID of the function call.",
                                                                                "name": "id",
                                                                                "type": "text",
                                                                                "label": "Function Call ID"
                                                                            }
                                                                        ],
                                                                        "type": "collection",
                                                                        "label": "Function Call"
                                                                    }
                                                                ]
                                                            },
                                                            {
                                                                "label": "Function Response",
                                                                "value": "functionResponse",
                                                                "nested": [
                                                                    {
                                                                        "name": "functionResponse",
                                                                        "spec": [
                                                                            {
                                                                                "help": "The name of the function to call.",
                                                                                "name": "name",
                                                                                "type": "text",
                                                                                "label": "Name",
                                                                                "required": true,
                                                                                "validate": {
                                                                                    "max": 64
                                                                                }
                                                                            },
                                                                            {
                                                                                "help": "The function response in JSON object format.",
                                                                                "name": "response",
                                                                                "type": "json",
                                                                                "label": "Response",
                                                                                "required": true
                                                                            }
                                                                        ],
                                                                        "type": "collection",
                                                                        "label": "Function Response"
                                                                    }
                                                                ]
                                                            }
                                                        ]
                                                    },
                                                    {
                                                        "name": "thoughtSignature",
                                                        "type": "text",
                                                        "label": "Thought Signature"
                                                    }
                                                ],
                                                "type": "array",
                                                "label": "Parts"
                                            }
                                        ],
                                        "type": "array",
                                        "label": "Messages",
                                        "required": true
                                    },
                                    {
                                        "name": "system_instruction",
                                        "spec": [
                                            {
                                                "name": "parts",
                                                "spec": {
                                                    "name": "value",
                                                    "spec": [
                                                        {
                                                            "name": "text",
                                                            "type": "text",
                                                            "label": "Value"
                                                        }
                                                    ],
                                                    "type": "collection",
                                                    "label": "Prompt"
                                                },
                                                "type": "array",
                                                "label": "Prompts"
                                            }
                                        ],
                                        "type": "collection",
                                        "label": "System Instructions"
                                    },
                                    {
                                        "name": "safetySettings",
                                        "spec": [
                                            {
                                                "name": "category",
                                                "type": "select",
                                                "label": "Category",
                                                "options": [
                                                    {
                                                        "label": "Harassment content",
                                                        "value": "HARM_CATEGORY_HARASSMENT"
                                                    },
                                                    {
                                                        "label": "Hate speech and content",
                                                        "value": "HARM_CATEGORY_HATE_SPEECH"
                                                    },
                                                    {
                                                        "label": "Sexually explicit content.",
                                                        "value": "HARM_CATEGORY_SEXUALLY_EXPLICIT"
                                                    },
                                                    {
                                                        "label": "Dangerous content:",
                                                        "value": "HARM_CATEGORY_DANGEROUS_CONTENT"
                                                    }
                                                ]
                                            },
                                            {
                                                "name": "threshold",
                                                "type": "select",
                                                "label": "Threshold",
                                                "options": [
                                                    {
                                                        "label": "Block low and above.",
                                                        "value": "BLOCK_LOW_AND_ABOVE"
                                                    },
                                                    {
                                                        "label": "Block medium and above.",
                                                        "value": "BLOCK_MEDIUM_AND_ABOVE"
                                                    },
                                                    {
                                                        "label": "Block only high.",
                                                        "value": "BLOCK_ONLY_HIGH"
                                                    },
                                                    {
                                                        "label": "Block none.",
                                                        "value": "BLOCK_NONE"
                                                    }
                                                ]
                                            }
                                        ],
                                        "type": "array",
                                        "label": "Safety Settings"
                                    },
                                    {
                                        "name": "generationConfig",
                                        "spec": [
                                            {
                                                "name": "stopSequences",
                                                "spec": {
                                                    "name": "value",
                                                    "type": "text",
                                                    "label": "Stop Sequence"
                                                },
                                                "type": "array",
                                                "label": "Stop Sequences"
                                            },
                                            {
                                                "name": "responseModalities",
                                                "type": "select",
                                                "label": "Response Modalities",
                                                "multiple": true,
                                                "validate": {
                                                    "enum": [
                                                        "text",
                                                        "image"
                                                    ]
                                                }
                                            },
                                            {
                                                "name": "maxOutputTokens",
                                                "type": "number",
                                                "label": "Max Output Tokens"
                                            },
                                            {
                                                "name": "temperature",
                                                "type": "number",
                                                "label": "Temperature",
                                                "validate": {
                                                    "max": 1,
                                                    "min": 0
                                                }
                                            },
                                            {
                                                "name": "topP",
                                                "type": "number",
                                                "label": "Top P",
                                                "validate": {
                                                    "max": 1,
                                                    "min": 0
                                                }
                                            },
                                            {
                                                "name": "topK",
                                                "type": "number",
                                                "label": "Top K"
                                            },
                                            {
                                                "name": "thinkingConfig",
                                                "spec": [
                                                    {
                                                        "name": "thinkingBudget",
                                                        "type": "number",
                                                        "label": "Thinking Budget"
                                                    },
                                                    {
                                                        "name": "include_thoughts",
                                                        "type": "boolean",
                                                        "label": "Include Thoughts"
                                                    },
                                                    {
                                                        "name": "thinking_level",
                                                        "type": "select",
                                                        "label": "Thinking Level",
                                                        "validate": {
                                                            "enum": [
                                                                "low",
                                                                "high"
                                                            ]
                                                        }
                                                    }
                                                ],
                                                "type": "collection",
                                                "label": "Thinking Config"
                                            },
                                            {
                                                "name": "mediaResolution",
                                                "type": "select",
                                                "label": "Media Resolution",
                                                "validate": {
                                                    "enum": [
                                                        "media_resolution_low",
                                                        "media_resolution_medium",
                                                        "media_resolution_high"
                                                    ]
                                                }
                                            },
                                            {
                                                "name": "imageConfig",
                                                "spec": [
                                                    {
                                                        "name": "imageSize",
                                                        "type": "select",
                                                        "label": "Image Size",
                                                        "validate": {
                                                            "enum": [
                                                                "1K",
                                                                "2K",
                                                                "4K"
                                                            ]
                                                        }
                                                    }
                                                ],
                                                "type": "collection",
                                                "label": "Image Configuration"
                                            },
                                            {
                                                "name": "responseMimeType",
                                                "type": "select",
                                                "label": "Response Format"
                                            },
                                            {
                                                "name": "responseSchema",
                                                "type": "any",
                                                "label": "Response Schema (Deprecated)"
                                            },
                                            {
                                                "name": "new_responseSchema",
                                                "spec": [
                                                    {
                                                        "name": "type",
                                                        "type": "select",
                                                        "label": "Value Type",
                                                        "options": [
                                                            {
                                                                "label": "String",
                                                                "value": "string",
                                                                "nested": "rpc://gemini-ai/1/createResponseSchema?type=string"
                                                            },
                                                            {
                                                                "label": "Enum",
                                                                "value": "enum",
                                                                "nested": "rpc://gemini-ai/1/createResponseSchema?type=enum"
                                                            },
                                                            {
                                                                "label": "Number",
                                                                "value": "number",
                                                                "nested": "rpc://gemini-ai/1/createResponseSchema?type=number"
                                                            },
                                                            {
                                                                "label": "Integer",
                                                                "value": "integer",
                                                                "nested": "rpc://gemini-ai/1/createResponseSchema?type=integer"
                                                            },
                                                            {
                                                                "label": "Boolean",
                                                                "value": "boolean",
                                                                "nested": "rpc://gemini-ai/1/createResponseSchema?type=boolean"
                                                            },
                                                            {
                                                                "label": "Object",
                                                                "value": "object",
                                                                "nested": "rpc://gemini-ai/1/createResponseSchema?type=object"
                                                            }
                                                        ]
                                                    }
                                                ],
                                                "type": "array",
                                                "label": "Response Schema"
                                            }
                                        ],
                                        "type": "collection",
                                        "label": "Generation configurations"
                                    },
                                    {
                                        "name": "tools",
                                        "type": "any",
                                        "label": "Tools"
                                    },
                                    {
                                        "name": "tool_config",
                                        "type": "any",
                                        "label": "Tool Config"
                                    },
                                    {
                                        "name": "function_declarations_context",
                                        "type": "boolean",
                                        "label": "Function Declarations Grounding"
                                    },
                                    {
                                        "name": "url_context",
                                        "type": "boolean",
                                        "label": "URL Context"
                                    },
                                    {
                                        "name": "google_search_context",
                                        "type": "boolean",
                                        "label": "Google Search Grounding"
                                    },
                                    {
                                        "name": "code_execution",
                                        "type": "boolean",
                                        "label": "Code Execution"
                                    },
                                    {
                                        "name": "google_maps_context",
                                        "type": "boolean",
                                        "label": "Google Maps Grounding"
                                    },
                                    {
                                        "name": "file_search_store_context",
                                        "type": "boolean",
                                        "label": "File Search Store Context"
                                    }
                                ],
                                "advanced": true
                            }
                        },
                        {
                            "id": 225,
                            "module": "builtin:BasicRouter",
                            "version": 1,
                            "mapper": null,
                            "metadata": {
                                "designer": {
                                    "x": 1886,
                                    "y": 9
                                }
                            },
                            "routes": [
                                {
                                    "flow": [
                                        {
                                            "id": 195,
                                            "module": "perplexity-ai:createAChatCompletion",
                                            "version": 1,
                                            "parameters": {
                                                "__IMTCONN__": 13314140
                                            },
                                            "filter": {
                                                "name": "Feasibility FIT",
                                                "conditions": [
                                                    [
                                                        {
                                                            "a": "{{189.result.final_verdict.result}}",
                                                            "b": "FIT",
                                                            "o": "text:equal"
                                                        }
                                                    ]
                                                ]
                                            },
                                            "mapper": {
                                                "model": "sonar",
                                                "messages": [
                                                    {
                                                        "role": "system",
                                                        "content": "You are the AOS Signals Research Agent.\r\n\r\nGOAL\r\nExtract a small set of high-quality, persona-relevant signals that can later support “why now” angles.\r\nSignals must be INSIDE THE ORBIT of AOS: outbound outreach that generates conversations/meetings with ICP decision-makers via relevant messaging.\r\n\r\nDEFINITIONS (CRITICAL)\r\n- INTERNAL signal = information published/controlled by the company or the person:\r\n  company website (incl. blog, press page, careers page), company LinkedIn page/posts, the person’s LinkedIn/profile/posts.\r\n- EXTERNAL signal = information NOT published/controlled by the company:\r\n  competitor moves, regulation, market demand shifts, funding/news articles about competitors, third-party reviews, industry reports, etc.\r\n- If the evidence source is the company website or official LinkedIn, it MUST be labeled INTERNAL (never external).\r\n\r\nHARD RULES\r\n1) OUTPUT JSON ONLY. No markdown. No commentary.\r\n2) DO NOT write email copy. DO NOT write angles. DO NOT write narratives.\r\n3) DO NOT invent facts. If evidence is missing or weak, set evidence.url=\"unknown\" and lower confidence.\r\n4) MANDATORY TWO-PHASE WORKFLOW:\r\n   Phase 1: extract INTERNAL signals by checking the company website first (mandatory) and then LinkedIn if provided.\r\n   Phase 2: extract EXTERNAL signals from the web (market/competitors/regulation/demand).\r\n   You MUST return at least 2 INTERNAL signals (if any internal evidence exists) AND at least 2 EXTERNAL signals (if any external evidence exists).\r\n5) QUALITY OVER QUANTITY: target 4–8 total signals. Fewer is acceptable only if sources are truly limited.\r\n6) FILTERING: include a signal only if it is:\r\n   - persona-relevant (respects DO/DON'T),\r\n   - orbit-fit (solvable by applying CAO-with-AOS),\r\n   - and can be expressed as an outreach application.\r\n7) REJECTION TEST (MANDATORY):\r\n   Reject any signal whose outreach_application_hint cannot be phrased as:\r\n   \"get in front of [ICP decision-makers] to achieve [outcome]\".\r\n8) Weak signals allowed only as cluster support: mark potency low and explain briefly.\r\n\r\nOUTPUT SHAPE (EXACT)\r\nReturn only:\r\n{\r\n  \"signals\": [\r\n    {\r\n      \"signal_id\": \"S1\",\r\n      \"signal_class\": \"INTERNAL| encourages_EXTERNAL|EXTERNAL\",\r\n      \"signal_title\": \"string\",\r\n      \"signal_summary\": \"string\",\r\n      \"persona_relevance\": \"string\",\r\n      \"orbit_fit_reason\": \"string\",\r\n      \"outreach_application_hint\": \"string\",\r\n      \"potency\": \"HIGH|MEDIUM|LOW\",\r\n      \"confidence\": \"Very High|High|Medium|Low\",\r\n      \"evidence\": {\r\n        \"source\": \"company_website|company_linkedin|person_linkedin|third_party_web\",\r\n        \"url\": \"string\"\r\n      }\r\n    }\r\n  ]\r\n}\r\n\r\nIMPORTANT:\r\n- signal_class must be INTERNAL if evidence.source is company_website, company_linkedin, or person_linkedin.\r\n- Keep signals short, factual, and actionable.\r\n\r\n​"
                                                    },
                                                    {
                                                        "role": "user",
                                                        "content": "Extract signals for this lead using ONLY the context below + web sources you can access.\r\n\r\nLEAD\r\n- Name: {{1.`2`}} {{1.`3`}}\r\n- Title: {{1.`4`}}\r\n- Company: {{1.`16`}}\r\n- Lead LinkedIn URL (optional): {{1.`11`}}\r\n- Company Website URL (preferred): {{1.`22`}}\r\n- Company LinkedIn URL (optional): {{1.`33`}}\r\n\r\nCONTEXT OBJECTS (raw JSON)\r\nBusiness Intel:\r\n{{205.result}}\r\n\r\nPerson Understanding:\r\n{{184.result}}\r\n\r\nBase Contribution (CAO-with-AOS):\r\n{{189.result.base_contribution}}\r\n\r\nTASK\r\n1) Find INTERNAL signals first by checking the company website (and company LinkedIn if provided).\r\n2) Then find EXTERNAL signals (market, competitor moves, regulation, demand shifts) that impact the company.\r\n3) Output 4–8 strongest signals total (fewer is ok if sources are weak).\r\n4) Each signal MUST include:\r\n   - a short factual statement (signal),\r\n   - evidence (url + snippet) when possible,\r\n   - why_it_matters (1 sentence for this persona),\r\n   - outreach_application_hint (1 sentence describing how this could be addressed via outreach within CAO-with-AOS),\r\n   - scores (0–10) for persona_relevance, orbit_fit, implication_hint, confidence, potency.\r\n5) If you cannot provide evidence, use url=\"unknown\" and set confidence low.\r\n6) Do NOT write angles. Do NOT write email copy. Do NOT write long narratives.\r\n\r\nOUTPUT JSON ONLY with this exact shape:\r\n\r\n{\r\n  \"signals\": [\r\n    {\r\n      \"signal_id\": \"sig_001\",\r\n      \"origin\": \"internal|external\",\r\n      \"scope\": \"person|company|market|competitor\",\r\n      \"category\": \"belief|positioning|metric|movement|hiring|funding|demand_shift|regulation|competitor_move|reputation|product|pricing|other\",\r\n      \"signal\": \"string\",\r\n      \"evidence\": { \"url\": \"string\", \"snippet\": \"string\" },\r\n      \"why_it_matters\": \"string\",\r\n      \"outreach_application_hint\": \"string\",\r\n      \"recency\": \"YYYY-MM|unknown\",\r\n      \"scores\": {\r\n        \"persona_relevance\": 0,\r\n        \"orbit_fit\": 0,\r\n        \"implication_hint\": 0,\r\n        \"confidence\": 0,\r\n        \"potency\": 0\r\n      }\r\n    }\r\n  ]\r\n}\r\n"
                                                    }
                                                ],
                                                "web_search_options": {
                                                    "search_context_size": "medium"
                                                }
                                            },
                                            "metadata": {
                                                "designer": {
                                                    "x": 2268,
                                                    "y": -1,
                                                    "name": "Internal/External Signals 3"
                                                },
                                                "restore": {
                                                    "expect": {
                                                        "model": {
                                                            "mode": "chose",
                                                            "label": "sonar"
                                                        },
                                                        "messages": {
                                                            "mode": "chose",
                                                            "items": [
                                                                {
                                                                    "role": {
                                                                        "mode": "chose",
                                                                        "label": "System"
                                                                    }
                                                                },
                                                                {
                                                                    "role": {
                                                                        "mode": "chose",
                                                                        "label": "User"
                                                                    }
                                                                }
                                                            ]
                                                        },
                                                        "return_images": {
                                                            "mode": "chose"
                                                        },
                                                        "web_search_options": {
                                                            "nested": {
                                                                "search_context_size": {
                                                                    "mode": "chose",
                                                                    "label": "Medium"
                                                                }
                                                            }
                                                        },
                                                        "search_domain_filter": {
                                                            "mode": "chose"
                                                        },
                                                        "search_recency_filter": {
                                                            "mode": "chose",
                                                            "label": "Empty"
                                                        },
                                                        "return_related_questions": {
                                                            "mode": "chose"
                                                        }
                                                    },
                                                    "parameters": {
                                                        "__IMTCONN__": {
                                                            "data": {
                                                                "scoped": "true",
                                                                "connection": "perplexity-ai"
                                                            },
                                                            "label": "PerplexityConnection_AOS_1"
                                                        }
                                                    }
                                                },
                                                "parameters": [
                                                    {
                                                        "name": "__IMTCONN__",
                                                        "type": "account:perplexity-ai",
                                                        "label": "Connection",
                                                        "required": true
                                                    }
                                                ],
                                                "expect": [
                                                    {
                                                        "name": "model",
                                                        "type": "select",
                                                        "label": "Model",
                                                        "required": true
                                                    },
                                                    {
                                                        "name": "messages",
                                                        "spec": [
                                                            {
                                                                "name": "content",
                                                                "type": "text",
                                                                "label": "Content",
                                                                "required": true
                                                            },
                                                            {
                                                                "name": "role",
                                                                "type": "select",
                                                                "label": "Role",
                                                                "options": [
                                                                    {
                                                                        "label": "User",
                                                                        "value": "user"
                                                                    },
                                                                    {
                                                                        "label": "Assistant",
                                                                        "value": "assistant"
                                                                    },
                                                                    {
                                                                        "label": "System",
                                                                        "value": "system"
                                                                    }
                                                                ],
                                                                "required": true
                                                            }
                                                        ],
                                                        "type": "array",
                                                        "label": "Messages",
                                                        "required": true
                                                    },
                                                    {
                                                        "name": "max_tokens",
                                                        "type": "number",
                                                        "label": "Max Tokens"
                                                    },
                                                    {
                                                        "name": "temperature",
                                                        "type": "number",
                                                        "label": "Temperature",
                                                        "validate": {
                                                            "max": 1.999,
                                                            "min": 0
                                                        }
                                                    },
                                                    {
                                                        "name": "web_search_options",
                                                        "spec": [
                                                            {
                                                                "name": "search_context_size",
                                                                "type": "select",
                                                                "label": "Search Context Size",
                                                                "validate": {
                                                                    "enum": [
                                                                        "low",
                                                                        "medium",
                                                                        "high"
                                                                    ]
                                                                }
                                                            }
                                                        ],
                                                        "type": "collection",
                                                        "label": "Web Search Options"
                                                    },
                                                    {
                                                        "name": "top_p",
                                                        "type": "number",
                                                        "label": "Top P",
                                                        "validate": {
                                                            "max": 1,
                                                            "min": 0
                                                        }
                                                    },
                                                    {
                                                        "name": "top_k",
                                                        "type": "number",
                                                        "label": "Top K",
                                                        "validate": {
                                                            "max": 2048,
                                                            "min": 0
                                                        }
                                                    },
                                                    {
                                                        "name": "presence_penalty",
                                                        "type": "number",
                                                        "label": "Presence Penalty",
                                                        "validate": {
                                                            "max": 2,
                                                            "min": -2
                                                        }
                                                    },
                                                    {
                                                        "name": "frequency_penalty",
                                                        "type": "number",
                                                        "label": "Frequency Penalty",
                                                        "validate": {
                                                            "min": 0
                                                        }
                                                    },
                                                    {
                                                        "name": "search_domain_filter",
                                                        "spec": {
                                                            "name": "value",
                                                            "type": "text"
                                                        },
                                                        "type": "array",
                                                        "label": "Search Domain Filter"
                                                    },
                                                    {
                                                        "name": "search_recency_filter",
                                                        "type": "select",
                                                        "label": "Search Recency Filter",
                                                        "validate": {
                                                            "enum": [
                                                                "month",
                                                                "week",
                                                                "day",
                                                                "hour"
                                                            ]
                                                        }
                                                    },
                                                    {
                                                        "name": "return_images",
                                                        "type": "boolean",
                                                        "label": "Return Images"
                                                    },
                                                    {
                                                        "name": "return_related_questions",
                                                        "type": "boolean",
                                                        "label": "Return Related Questions"
                                                    }
                                                ],
                                                "advanced": true
                                            }
                                        },
                                        {
                                            "id": 199,
                                            "module": "gemini-ai:createACompletionGeminiPro",
                                            "version": 1,
                                            "parameters": {
                                                "__IMTCONN__": 13301844
                                            },
                                            "mapper": {
                                                "model": "gemini-3-pro-preview",
                                                "contents": [
                                                    {
                                                        "role": "user",
                                                        "parts": [
                                                            {
                                                                "text": "Build the BASE ANGLE baseline for this lead.\r\n\r\nCONTEXT OBJECTS (raw JSON)\r\nBusiness Intel: \n{{205.result}}\n\nPerson Understanding:\r\n{{184.result}}\r\n\r\nBase Contribution (CAO-with-AOS):\r\n{{189.result.base_contribution}}\r\n\r\nSignals (raw JSON array from Perplexity):\r\n{{195.choices[].message.content}}\r\n \n\nLinkedin Metrics and Signals: \n{{194.result}}\n\r\nPain Point Library (raw text/JSON):\r\n\r\n{\r\n  \"library_version\": \"v1.0\",\r\n  \"sets\": {\r\n    \"mid_big_company\": {\r\n      \"description\": \"Teams with established sales capacity where outbound exists/should exist, and scaling is primarily constrained by cost, workforce, and consistency.\",\r\n      \"pain_points\": [\r\n        {\r\n          \"id\": \"mb_01\",\r\n          \"pain\": \"Cold outbound customer acquisition is expensive and time-consuming because sales effort produces too few meetings per hour, making each meeting costly.\"\r\n        },\r\n        {\r\n          \"id\": \"mb_02\",\r\n          \"pain\": \"Scaling outbound typically requires hiring and managing SDR workforce, which is expensive and slow to ramp.\"\r\n        },\r\n        {\r\n          \"id\": \"mb_03\",\r\n          \"pain\": \"Manual outreach is inefficient at high quality: to keep messages relevant and converting, a large time investment is required to contact a small number of decision-makers.\"\r\n        },\r\n        {\r\n          \"id\": \"mb_04\",\r\n          \"pain\": \"Manual outbound degrades in quality over time: repetition increases errors and non-relevance, reducing response rates and harming brand perception.\"\r\n        },\r\n        {\r\n          \"id\": \"mb_05\",\r\n          \"pain\": \"Without a scalable outbound system, you get the number of new customers you can (inbound/referrals), not the number you want, because inbound is unpredictable.\"\r\n        },\r\n        {\r\n          \"id\": \"mb_06\",\r\n          \"pain\": \"Timing disadvantage: if you do not reach decision-makers early, competitors with faster sequencing capture mindshare and accounts first.\"\r\n        },\r\n        {\r\n          \"id\": \"mb_07\",\r\n          \"pain\": \"Inconsistency and deliverability constraints limit scale: without a disciplined outreach system, results fluctuate and capacity is capped by operational friction.\"\r\n        }\r\n      ],\r\n      \"missed_opportunities\": [\r\n        {\r\n          \"id\": \"mb_mo_01\",\r\n          \"missed\": \"Growing as much as the market allows without being limited by human capacity and SDR headcount.\"\r\n        },\r\n        {\r\n          \"id\": \"mb_mo_02\",\r\n          \"missed\": \"Reducing acquisition cost per meeting by replacing resource-heavy manual work with an automated, relevance-first system.\"\r\n        },\r\n        {\r\n          \"id\": \"mb_mo_03\",\r\n          \"missed\": \"Turning outbound into a predictable system rather than relying on volatile inbound/referrals.\"\r\n        }\r\n      ]\r\n    },\r\n    \"small_team\": {\r\n      \"description\": \"Founder-led or lean teams where outbound is necessary but competes with core execution and cannot be staffed heavily.\",\r\n      \"pain_points\": [\r\n        {\r\n          \"id\": \"st_01\",\r\n          \"pain\": \"A small team must do a large volume of work to contact enough people for outbound to produce customers, while already wearing multiple roles.\"\r\n        },\r\n        {\r\n          \"id\": \"st_02\",\r\n          \"pain\": \"Finding new customers takes too much time away from important tasks because manual outreach is slow and inefficient.\"\r\n        },\r\n        {\r\n          \"id\": \"st_03\",\r\n          \"pain\": \"Growth is limited because time available for customer generation—especially outbound—is limited, and the method is inefficient and hard to scale via hiring.\"\r\n        },\r\n        {\r\n          \"id\": \"st_04\",\r\n          \"pain\": \"You need outbound because inbound/referrals are inconsistent, but doing outbound manually drains time and energy from execution and product/service quality.\"\r\n        },\r\n        {\r\n          \"id\": \"st_05\",\r\n          \"pain\": \"Timing disadvantage: if outreach is sporadic, you repeatedly arrive late to opportunities and lose to faster, more consistent competitors.\"\r\n        },\r\n        {\r\n          \"id\": \"st_06\",\r\n          \"pain\": \"Quality control is hard at speed: without a system, messages drift into generic outreach, lowering replies and wasting scarce founder/team attention.\"\r\n        }\r\n      ],\r\n      \"missed_opportunities\": [\r\n        {\r\n          \"id\": \"st_mo_01\",\r\n          \"missed\": \"Scaling growth without sacrificing execution time by offloading outreach into a system.\"\r\n        },\r\n        {\r\n          \"id\": \"st_mo_02\",\r\n          \"missed\": \"Keeping focus on founder-critical priorities while still generating a steady flow of new conversations.\"\r\n        },\r\n        {\r\n          \"id\": \"st_mo_03\",\r\n          \"missed\": \"Building a consistent acquisition engine instead of oscillating between ‘busy building’ and ‘panic outreach’.\"\r\n        }\r\n      ]\r\n    }\r\n  }\r\n}\r\n\r\nTASK\r\n1) Select the most likely segment (mid_big_company or small_team). Use signals to justify, but do not invent facts. If unclear, set segment=\"unknown\".\r\n2) Choose 1–3 pain points from the library that best fit this lead and persona.\r\n3) Produce a baseline angle object that:\r\n   - states a clear baseline why_now_thesis (structural, not event-based),\r\n   - provides 1–2 situation_facts (anchor pain, structural),\r\n   - provides 1–2 implication_outcomes (missed opportunities / opportunity cost),\r\n   - provides orbit_application as an OUTREACH APPLICATION within CAO-with-AOS (get in front of ICP decision-makers to generate conversations),\r\n   - includes persona_fit_note reflecting DO/DON’T.\r\n4) Scores:\r\n   - novelty must be 2–4\r\n   - orbit_fit should be 8–10\r\n   - persona_fit should be 7–10 if aligned\r\n   - confidence should reflect signal support\r\n   - implication_magnitude should be calibrated to the lead context\r\n5) supporting_signals: include only the signal_id(s) that helped you choose segment/pain points (can be empty).\r\n6) evidence_pack: optional; include evidence from supporting signals if available, else [].\r\n7) baseline_meta.baseline_bar MUST equal base_angle.scores.implication_magnitude.\r\n\r\nOUTPUT JSON ONLY in this exact shape:\r\n\r\n{\r\n  \"base_angle\": {\r\n    \"angle_id\": \"base_001\",\r\n    \"angle_type\": \"internal_pain\",\r\n    \"why_now_thesis\": \"string\",\r\n    \"supporting_signals\": [\"sig_001\"],\r\n    \"situation_facts\": [\"string\"],\r\n    \"implication_outcomes\": [\"string\"],\r\n    \"orbit_application\": \"string\",\r\n    \"persona_fit_note\": \"string\",\r\n    \"scores\": {\r\n      \"implication_magnitude\": 0,\r\n      \"orbit_fit\": 0,\r\n      \"persona_fit\": 0,\r\n      \"novelty\": 0,\r\n      \"confidence\": 0\r\n    },\r\n    \"evidence_pack\": [\r\n      { \"url\": \"string\", \"snippet\": \"string\" }\r\n    ]\r\n  },\r\n  \"baseline_meta\": {\r\n    \"segment\": \"mid_big_company|small_team|unknown\",\r\n    \"selected_pain_points\": [\"string\"],\r\n    \"baseline_bar\": 0\r\n  }\r\n}\r\n\nOUTPUT REQUIREMENTS\r\n- Output MUST be exactly one JSON object that matches the required output format.\r\n- Do NOT wrap the output in code fences (```).\r\n- Do NOT output anything except the JSON object.",
                                                                "type": "text"
                                                            }
                                                        ]
                                                    }
                                                ],
                                                "generationConfig": {
                                                    "imageConfig": {},
                                                    "temperature": "0.2",
                                                    "stopSequences": [
                                                        ""
                                                    ],
                                                    "thinkingConfig": {
                                                        "thinkingBudget": "512"
                                                    },
                                                    "maxOutputTokens": "4096"
                                                },
                                                "system_instruction": {
                                                    "parts": [
                                                        {
                                                            "text": "You are the AOS Base Angle Builder.\r\n\r\nGOAL\r\nBuild the baseline “why now” (base angle) using a pain-point library, AFTER signals have been collected.\r\nThis base angle is the fallback bar that signal-based angles must beat or strongly reinforce.\r\n\r\nHARD RULES\r\n1) OUTPUT JSON ONLY. No markdown. No commentary.\r\n2) DO NOT write email copy. DO NOT write hooks/bridges as paragraph-ready lines.\r\n3) DO NOT invent facts. You may only use:\r\n   - provided pain-point library (structural truths),\r\n   - provided Company/Persona context,\r\n   - and provided signals ONLY to choose the most relevant pain set and calibrate intensity.\r\n4) The base angle MUST be inside the ORBIT of AOS:\r\n   An outreach system that gets in front of ICP decision-makers to generate conversations/meetings via relevant outbound messaging.\r\n5) Persona relevance is mandatory: respect Persona DO/DON’T.\r\n6) Output MUST be aligned with the angle object format used by the Angle Synthesizer.\r\n\r\nSEGMENT SELECTION\r\n- Choose the most likely segment: mid_big_company or small_team.\r\n- Use signals to support the choice. If unclear, use \"unknown\" and be conservative.\r\n\r\nSCORING GUIDELINES\r\n- novelty must be low (baseline).\r\n- orbit_fit should be high (baseline is defined inside orbit).\r\n- confidence depends on how well signals support the segment/context.\r\n- implication_magnitude should reflect the seriousness of the pain + missed opportunity for this lead.\r\n​"
                                                        }
                                                    ]
                                                }
                                            },
                                            "metadata": {
                                                "designer": {
                                                    "x": 2558,
                                                    "y": 7,
                                                    "name": "Base Angle (3proPrev) 1"
                                                },
                                                "restore": {
                                                    "expect": {
                                                        "model": {
                                                            "mode": "chose",
                                                            "label": "gemini-3-pro-preview"
                                                        },
                                                        "contents": {
                                                            "mode": "chose",
                                                            "items": [
                                                                {
                                                                    "role": {
                                                                        "mode": "chose",
                                                                        "label": "User"
                                                                    },
                                                                    "parts": {
                                                                        "mode": "chose",
                                                                        "items": [
                                                                            {
                                                                                "type": {
                                                                                    "mode": "chose",
                                                                                    "label": "Text"
                                                                                }
                                                                            }
                                                                        ]
                                                                    }
                                                                }
                                                            ]
                                                        },
                                                        "url_context": {
                                                            "mode": "chose"
                                                        },
                                                        "code_execution": {
                                                            "mode": "chose"
                                                        },
                                                        "safetySettings": {
                                                            "mode": "chose"
                                                        },
                                                        "generationConfig": {
                                                            "nested": {
                                                                "imageConfig": {
                                                                    "nested": {
                                                                        "imageSize": {
                                                                            "mode": "chose",
                                                                            "label": "Empty"
                                                                        }
                                                                    }
                                                                },
                                                                "stopSequences": {
                                                                    "mode": "chose",
                                                                    "items": [
                                                                        null
                                                                    ],
                                                                    "collapsed": true
                                                                },
                                                                "thinkingConfig": {
                                                                    "nested": {
                                                                        "thinking_level": {
                                                                            "mode": "chose",
                                                                            "label": "Empty"
                                                                        },
                                                                        "include_thoughts": {
                                                                            "mode": "chose"
                                                                        }
                                                                    }
                                                                },
                                                                "mediaResolution": {
                                                                    "mode": "chose",
                                                                    "label": "Empty"
                                                                },
                                                                "responseMimeType": {
                                                                    "mode": "chose",
                                                                    "label": "Empty"
                                                                },
                                                                "responseModalities": {
                                                                    "mode": "chose"
                                                                }
                                                            }
                                                        },
                                                        "system_instruction": {
                                                            "nested": {
                                                                "parts": {
                                                                    "mode": "chose",
                                                                    "items": [
                                                                        null
                                                                    ]
                                                                }
                                                            }
                                                        },
                                                        "google_maps_context": {
                                                            "mode": "chose"
                                                        },
                                                        "google_search_context": {
                                                            "mode": "chose"
                                                        },
                                                        "file_search_store_context": {
                                                            "mode": "chose"
                                                        },
                                                        "function_declarations_context": {
                                                            "mode": "chose"
                                                        }
                                                    },
                                                    "parameters": {
                                                        "__IMTCONN__": {
                                                            "data": {
                                                                "scoped": "true",
                                                                "connection": "gemini-ai-q9zyjp"
                                                            },
                                                            "label": "GeminiConnection_AOS_2"
                                                        }
                                                    }
                                                },
                                                "parameters": [
                                                    {
                                                        "name": "__IMTCONN__",
                                                        "type": "account:gemini-ai-q9zyjp",
                                                        "label": "Connection",
                                                        "required": true
                                                    }
                                                ],
                                                "expect": [
                                                    {
                                                        "name": "model",
                                                        "type": "select",
                                                        "label": "AI Model",
                                                        "required": true
                                                    },
                                                    {
                                                        "name": "contents",
                                                        "spec": [
                                                            {
                                                                "name": "role",
                                                                "type": "select",
                                                                "label": "Role",
                                                                "options": [
                                                                    {
                                                                        "label": "User",
                                                                        "value": "user"
                                                                    },
                                                                    {
                                                                        "label": "Model",
                                                                        "value": "model"
                                                                    }
                                                                ]
                                                            },
                                                            {
                                                                "name": "parts",
                                                                "spec": [
                                                                    {
                                                                        "name": "type",
                                                                        "type": "select",
                                                                        "label": "Message Type",
                                                                        "options": [
                                                                            {
                                                                                "label": "Text",
                                                                                "value": "text",
                                                                                "nested": [
                                                                                    {
                                                                                        "name": "text",
                                                                                        "type": "text",
                                                                                        "label": "Text",
                                                                                        "required": false
                                                                                    }
                                                                                ]
                                                                            },
                                                                            {
                                                                                "label": "File",
                                                                                "value": "file",
                                                                                "nested": [
                                                                                    {
                                                                                        "name": "file_data",
                                                                                        "spec": [
                                                                                            {
                                                                                                "name": "mime_type",
                                                                                                "type": "text",
                                                                                                "label": "Mime Type",
                                                                                                "required": false
                                                                                            },
                                                                                            {
                                                                                                "help": "You get this from the 'Upload a File' module.",
                                                                                                "name": "file_uri",
                                                                                                "type": "text",
                                                                                                "label": "File URI",
                                                                                                "required": false
                                                                                            }
                                                                                        ],
                                                                                        "type": "collection",
                                                                                        "label": "File Data",
                                                                                        "required": false
                                                                                    }
                                                                                ]
                                                                            },
                                                                            {
                                                                                "label": "Function Call",
                                                                                "value": "functionCall",
                                                                                "nested": [
                                                                                    {
                                                                                        "name": "functionCall",
                                                                                        "spec": [
                                                                                            {
                                                                                                "help": "The name of the function to call.",
                                                                                                "name": "name",
                                                                                                "type": "text",
                                                                                                "label": "Name",
                                                                                                "required": true,
                                                                                                "validate": {
                                                                                                    "max": 64
                                                                                                }
                                                                                            },
                                                                                            {
                                                                                                "help": "The function parameters and values in JSON object format.",
                                                                                                "name": "args",
                                                                                                "type": "json",
                                                                                                "label": "Arguments"
                                                                                            },
                                                                                            {
                                                                                                "help": "The unique ID of the function call.",
                                                                                                "name": "id",
                                                                                                "type": "text",
                                                                                                "label": "Function Call ID"
                                                                                            }
                                                                                        ],
                                                                                        "type": "collection",
                                                                                        "label": "Function Call"
                                                                                    }
                                                                                ]
                                                                            },
                                                                            {
                                                                                "label": "Function Response",
                                                                                "value": "functionResponse",
                                                                                "nested": [
                                                                                    {
                                                                                        "name": "functionResponse",
                                                                                        "spec": [
                                                                                            {
                                                                                                "help": "The name of the function to call.",
                                                                                                "name": "name",
                                                                                                "type": "text",
                                                                                                "label": "Name",
                                                                                                "required": true,
                                                                                                "validate": {
                                                                                                    "max": 64
                                                                                                }
                                                                                            },
                                                                                            {
                                                                                                "help": "The function response in JSON object format.",
                                                                                                "name": "response",
                                                                                                "type": "json",
                                                                                                "label": "Response",
                                                                                                "required": true
                                                                                            }
                                                                                        ],
                                                                                        "type": "collection",
                                                                                        "label": "Function Response"
                                                                                    }
                                                                                ]
                                                                            }
                                                                        ]
                                                                    },
                                                                    {
                                                                        "name": "thoughtSignature",
                                                                        "type": "text",
                                                                        "label": "Thought Signature"
                                                                    }
                                                                ],
                                                                "type": "array",
                                                                "label": "Parts"
                                                            }
                                                        ],
                                                        "type": "array",
                                                        "label": "Messages",
                                                        "required": true
                                                    },
                                                    {
                                                        "name": "system_instruction",
                                                        "spec": [
                                                            {
                                                                "name": "parts",
                                                                "spec": {
                                                                    "name": "value",
                                                                    "spec": [
                                                                        {
                                                                            "name": "text",
                                                                            "type": "text",
                                                                            "label": "Value"
                                                                        }
                                                                    ],
                                                                    "type": "collection",
                                                                    "label": "Prompt"
                                                                },
                                                                "type": "array",
                                                                "label": "Prompts"
                                                            }
                                                        ],
                                                        "type": "collection",
                                                        "label": "System Instructions"
                                                    },
                                                    {
                                                        "name": "safetySettings",
                                                        "spec": [
                                                            {
                                                                "name": "category",
                                                                "type": "select",
                                                                "label": "Category",
                                                                "options": [
                                                                    {
                                                                        "label": "Harassment content",
                                                                        "value": "HARM_CATEGORY_HARASSMENT"
                                                                    },
                                                                    {
                                                                        "label": "Hate speech and content",
                                                                        "value": "HARM_CATEGORY_HATE_SPEECH"
                                                                    },
                                                                    {
                                                                        "label": "Sexually explicit content.",
                                                                        "value": "HARM_CATEGORY_SEXUALLY_EXPLICIT"
                                                                    },
                                                                    {
                                                                        "label": "Dangerous content:",
                                                                        "value": "HARM_CATEGORY_DANGEROUS_CONTENT"
                                                                    }
                                                                ]
                                                            },
                                                            {
                                                                "name": "threshold",
                                                                "type": "select",
                                                                "label": "Threshold",
                                                                "options": [
                                                                    {
                                                                        "label": "Block low and above.",
                                                                        "value": "BLOCK_LOW_AND_ABOVE"
                                                                    },
                                                                    {
                                                                        "label": "Block medium and above.",
                                                                        "value": "BLOCK_MEDIUM_AND_ABOVE"
                                                                    },
                                                                    {
                                                                        "label": "Block only high.",
                                                                        "value": "BLOCK_ONLY_HIGH"
                                                                    },
                                                                    {
                                                                        "label": "Block none.",
                                                                        "value": "BLOCK_NONE"
                                                                    }
                                                                ]
                                                            }
                                                        ],
                                                        "type": "array",
                                                        "label": "Safety Settings"
                                                    },
                                                    {
                                                        "name": "generationConfig",
                                                        "spec": [
                                                            {
                                                                "name": "stopSequences",
                                                                "spec": {
                                                                    "name": "value",
                                                                    "type": "text",
                                                                    "label": "Stop Sequence"
                                                                },
                                                                "type": "array",
                                                                "label": "Stop Sequences"
                                                            },
                                                            {
                                                                "name": "responseModalities",
                                                                "type": "select",
                                                                "label": "Response Modalities",
                                                                "multiple": true,
                                                                "validate": {
                                                                    "enum": [
                                                                        "text",
                                                                        "image"
                                                                    ]
                                                                }
                                                            },
                                                            {
                                                                "name": "maxOutputTokens",
                                                                "type": "number",
                                                                "label": "Max Output Tokens"
                                                            },
                                                            {
                                                                "name": "temperature",
                                                                "type": "number",
                                                                "label": "Temperature",
                                                                "validate": {
                                                                    "max": 1,
                                                                    "min": 0
                                                                }
                                                            },
                                                            {
                                                                "name": "topP",
                                                                "type": "number",
                                                                "label": "Top P",
                                                                "validate": {
                                                                    "max": 1,
                                                                    "min": 0
                                                                }
                                                            },
                                                            {
                                                                "name": "topK",
                                                                "type": "number",
                                                                "label": "Top K"
                                                            },
                                                            {
                                                                "name": "thinkingConfig",
                                                                "spec": [
                                                                    {
                                                                        "name": "thinkingBudget",
                                                                        "type": "number",
                                                                        "label": "Thinking Budget"
                                                                    },
                                                                    {
                                                                        "name": "include_thoughts",
                                                                        "type": "boolean",
                                                                        "label": "Include Thoughts"
                                                                    },
                                                                    {
                                                                        "name": "thinking_level",
                                                                        "type": "select",
                                                                        "label": "Thinking Level",
                                                                        "validate": {
                                                                            "enum": [
                                                                                "low",
                                                                                "high"
                                                                            ]
                                                                        }
                                                                    }
                                                                ],
                                                                "type": "collection",
                                                                "label": "Thinking Config"
                                                            },
                                                            {
                                                                "name": "mediaResolution",
                                                                "type": "select",
                                                                "label": "Media Resolution",
                                                                "validate": {
                                                                    "enum": [
                                                                        "media_resolution_low",
                                                                        "media_resolution_medium",
                                                                        "media_resolution_high"
                                                                    ]
                                                                }
                                                            },
                                                            {
                                                                "name": "imageConfig",
                                                                "spec": [
                                                                    {
                                                                        "name": "imageSize",
                                                                        "type": "select",
                                                                        "label": "Image Size",
                                                                        "validate": {
                                                                            "enum": [
                                                                                "1K",
                                                                                "2K",
                                                                                "4K"
                                                                            ]
                                                                        }
                                                                    }
                                                                ],
                                                                "type": "collection",
                                                                "label": "Image Configuration"
                                                            },
                                                            {
                                                                "name": "responseMimeType",
                                                                "type": "select",
                                                                "label": "Response Format"
                                                            }
                                                        ],
                                                        "type": "collection",
                                                        "label": "Generation configurations"
                                                    },
                                                    {
                                                        "name": "tools",
                                                        "type": "any",
                                                        "label": "Tools"
                                                    },
                                                    {
                                                        "name": "tool_config",
                                                        "type": "any",
                                                        "label": "Tool Config"
                                                    },
                                                    {
                                                        "name": "function_declarations_context",
                                                        "type": "boolean",
                                                        "label": "Function Declarations Grounding"
                                                    },
                                                    {
                                                        "name": "url_context",
                                                        "type": "boolean",
                                                        "label": "URL Context"
                                                    },
                                                    {
                                                        "name": "google_search_context",
                                                        "type": "boolean",
                                                        "label": "Google Search Grounding"
                                                    },
                                                    {
                                                        "name": "code_execution",
                                                        "type": "boolean",
                                                        "label": "Code Execution"
                                                    },
                                                    {
                                                        "name": "google_maps_context",
                                                        "type": "boolean",
                                                        "label": "Google Maps Grounding"
                                                    },
                                                    {
                                                        "name": "file_search_store_context",
                                                        "type": "boolean",
                                                        "label": "File Search Store Context"
                                                    }
                                                ],
                                                "advanced": true
                                            }
                                        },
                                        {
                                            "id": 196,
                                            "module": "gemini-ai:createACompletionGeminiPro",
                                            "version": 1,
                                            "parameters": {
                                                "__IMTCONN__": 13301844
                                            },
                                            "mapper": {
                                                "model": "gemini-3-pro-preview",
                                                "contents": [
                                                    {
                                                        "role": "user",
                                                        "parts": [
                                                            {
                                                                "text": "Synthesize EXACTLY THREE angles from the provided signals for AOS outreach.\r\n\r\nLEAD CONTEXT\r\nCompany name: {{1.`16`}} \nLead name/title: {{1.`2`}} {{1.`3`}} — {{1.`4`}} \n\nBusiness Intel: \n{{205.result}}\r\n\r\nPerson Understanding:\r\n{{184.result}}\r\n\r\nBase contribution:\r\n{{189.result.base_contribution}}\r\n \n\r\nINPUT SIGNALS:\r\n{{195.choices[].message.content}}\r\n\nMORE INTERNAL SIGNALS:\n{{194.result}} \n\r\nTASK\r\nProduce EXACTLY THREE angles:\r\n- angle_identity (angle_type = \"identity\")\r\n- angle_1 (angle_type = threat | opportunity | internal_pain | unknown)\r\n- angle_2 (angle_type = threat | opportunity | internal_pain | unknown)\r\n\r\nangle_1 and angle_2 MUST be materially different.\r\n\r\nANGLE CONTENT RULES\r\n- NO email copy.\r\n- NO formatting for hooks, bridges, or CTA.\r\n- Describe reality and logic only.\r\n- situation_facts MUST map directly to signals.\r\n- applied_contribution MUST stay inside the Base Contribution.\r\n- Persona relevance is mandatory.\r\n\r\nOUTPUT JSON ONLY in this exact shape:\r\n\r\n{\r\n  \"angle_identity\": {\r\n    \"angle_id\": \"string\",\r\n    \"angle_type\": \"identity\",\r\n    \"why_now_summary\": \"string\",\r\n    \"situation_facts\": [\"string\"],\r\n    \"problem_statement\": \"string\",\r\n    \"applied_contribution\": \"string\",\r\n    \"orbit_alignment\": {\r\n      \"status\": \"INSIDE_BASE|EDGE|OUTSIDE_BASE\",\r\n      \"note\": \"string\"\r\n    },\r\n    \"persona_fit_note\": \"string\",\r\n    \"supporting_signals\": [\"sig_001\"],\r\n    \"scores\": {\r\n      \"implication_magnitude\": 0,\r\n      \"orbit_fit\": 0,\r\n      \"persona_fit\": 0,\r\n      \"novelty\": 0,\r\n      \"confidence\": 0\r\n    },\r\n    \"evidence_pack\": [\r\n      { \"url\": \"string\", \"snippet\": \"string\" }\r\n    ]\r\n  },\r\n  \"angle_1\": {\r\n    \"angle_id\": \"string\",\r\n    \"angle_type\": \"threat|opportunity|internal_pain|unknown\",\r\n    \"why_now_summary\": \"string\",\r\n    \"situation_facts\": [\"string\"],\r\n    \"problem_statement\": \"string\",\r\n    \"applied_contribution\": \"string\",\r\n    \"orbit_alignment\": {\r\n      \"status\": \"INSIDE_BASE|EDGE|OUTSIDE_BASE\",\r\n      \"note\": \"string\"\r\n    },\r\n    \"persona_fit_note\": \"string\",\r\n    \"supporting_signals\": [\"sig_002\"],\r\n    \"scores\": {\r\n      \"implication_magnitude\": 0,\r\n      \"orbit_fit\": 0,\r\n      \"persona_fit\": 0,\r\n      \"novelty\": 0,\r\n      \"confidence\": 0\r\n    },\r\n    \"evidence_pack\": [\r\n      { \"url\": \"string\", \"snippet\": \"string\" }\r\n    ]\r\n  },\r\n  \"angle_2\": {\r\n    \"angle_id\": \"string\",\r\n    \"angle_type\": \"threat|opportunity|internal_pain|unknown\",\r\n    \"why_now_summary\": \"string\",\r\n    \"situation_facts\": [\"string\"],\r\n    \"problem_statement\": \"string\",\r\n    \"applied_contribution\": \"string\",\r\n    \"orbit_alignment\": {\r\n      \"status\": \"INSIDE_BASE|EDGE|OUTSIDE_BASE\",\r\n      \"note\": \"string\"\r\n    },\r\n    \"persona_fit_note\": \"string\",\r\n    \"supporting_signals\": [\"sig_003\"],\r\n    \"scores\": {\r\n      \"implication_magnitude\": 0,\r\n      \"orbit_fit\": 0,\r\n      \"persona_fit\": 0,\r\n      \"novelty\": 0,\r\n      \"confidence\": 0\r\n    },\r\n    \"evidence_pack\": [\r\n      { \"url\": \"string\", \"snippet\": \"string\" }\r\n    ]\r\n  }\r\n}\r\n\r\nOUTPUT REQUIREMENTS\r\n- Output EXACTLY one JSON object.\r\n- Do NOT wrap in markdown.\r\n- Do NOT add commentary.",
                                                                "type": "text"
                                                            }
                                                        ]
                                                    }
                                                ],
                                                "generationConfig": {
                                                    "imageConfig": {},
                                                    "temperature": "0.2",
                                                    "stopSequences": [
                                                        ""
                                                    ],
                                                    "thinkingConfig": {
                                                        "thinkingBudget": "512"
                                                    },
                                                    "maxOutputTokens": "4096"
                                                },
                                                "system_instruction": {
                                                    "parts": [
                                                        {
                                                            "text": "You are the AOS Angle Synthesizer (v5).\r\n\r\nROLE\r\nYour job is to analyze many raw signals and synthesize them into a small set of coherent WHY-NOW angles.\r\nYou do NOT think about email writing, copy, hooks, or DNA structures.\r\nYou produce strategic angle intelligence ONLY.\r\n\r\nWHAT AN ANGLE IS\r\nAn angle is a structured problem–solution frame that explains:\r\n- what is happening now,\r\n- why it matters to this lead,\r\n- and how a specific slice of AOS’s feasible system (Base Contribution) addresses it.\r\n\r\nAngles are NOT copy.\r\nAngles are NOT tactics.\r\nAngles are NOT promises.\r\n\r\nSYSTEM CONTEXT YOU MUST RESPECT\r\n- Business Intel defines WHAT the company does and WHO they sell to.\r\n- Person Understanding defines WHAT this person cares about and what to avoid.\r\n- Base Contribution defines EXACTLY what AOS can operationally deliver.\r\n- Signals explain WHY NOW.\r\n\r\nYour angles MUST live strictly inside the orbit of the Base Contribution.\r\nIf an angle implies a solution AOS cannot deliver, it is INVALID.\r\n\r\nCORE OUTPUT GOAL\r\nProduce EXACTLY THREE angles:\r\n1) angle_identity — positioning, beliefs, legacy, operating philosophy\r\n2) angle_1 — strongest non-identity angle\r\n3) angle_2 — materially different backup angle\r\n\r\nNEUTRALITY REQUIREMENT\r\n- Do NOT label angles as “best”, “primary”, or “secondary”.\r\n- Do NOT bias selection.\r\n- Scoring is descriptive, not decisive.\r\n\r\nHARD RULES\r\n1) OUTPUT VALID JSON ONLY, matching the user schema exactly.\r\n2) NO email copy. No hooks. No bridges. No phrasing for emails.\r\n3) NO invented facts. situation_facts MUST be directly supported by provided signals.\r\n4) Every angle MUST:\r\n   - be persona-relevant,\r\n   - be solvable via outreach,\r\n   - and stay strictly inside the Base Contribution orbit.\r\n5) angle_1 and angle_2 MUST be materially different:\r\n   - different signal family, OR\r\n   - different causal logic, OR\r\n   - different business pressure.\r\n6) If signals are weak:\r\n   - keep facts minimal,\r\n   - lower confidence,\r\n   - still output all three angles.\r\n\r\nANGLE STRUCTURE (MENTAL MODEL)\r\nEach angle answers:\r\n- What is happening?\r\n- Why does it matter now?\r\n- What problem does this create?\r\n- Which exact part of AOS’s Base Contribution can address this?\r\n- Why this resonates with THIS person?\r\n\r\nSCORING (0–10, honest assessment)\r\n- implication_magnitude: impact if ignored\r\n- orbit_fit: how cleanly AOS outreach can address it\r\n- persona_fit: alignment with persona DO / DON’T\r\n- novelty: specificity without invention\r\n- confidence: strength of evidence\r\n\r\nTRACEABILITY\r\n- supporting_signals must list the signal_id(s) used.\r\n- evidence_pack must ONLY contain evidence from those signals.\r\n\r\nABSOLUTE GUARDRAIL\r\nFor EACH angle you MUST explicitly state:\r\n- what slice of the Base Contribution it uses\r\n- whether it is inside the feasible orbit\r\n\r\nIf you cannot justify orbit alignment → mark it OUTSIDE_BASE.\r\n​"
                                                        }
                                                    ]
                                                }
                                            },
                                            "metadata": {
                                                "designer": {
                                                    "x": 2866,
                                                    "y": 5,
                                                    "name": "Angle Synthesizer (3proPrev) 5"
                                                },
                                                "restore": {
                                                    "expect": {
                                                        "model": {
                                                            "mode": "chose",
                                                            "label": "gemini-3-pro-preview"
                                                        },
                                                        "contents": {
                                                            "mode": "chose",
                                                            "items": [
                                                                {
                                                                    "role": {
                                                                        "mode": "chose",
                                                                        "label": "User"
                                                                    },
                                                                    "parts": {
                                                                        "mode": "chose",
                                                                        "items": [
                                                                            {
                                                                                "type": {
                                                                                    "mode": "chose",
                                                                                    "label": "Text"
                                                                                }
                                                                            }
                                                                        ]
                                                                    }
                                                                }
                                                            ]
                                                        },
                                                        "url_context": {
                                                            "mode": "chose"
                                                        },
                                                        "code_execution": {
                                                            "mode": "chose"
                                                        },
                                                        "safetySettings": {
                                                            "mode": "chose"
                                                        },
                                                        "generationConfig": {
                                                            "nested": {
                                                                "imageConfig": {
                                                                    "nested": {
                                                                        "imageSize": {
                                                                            "mode": "chose",
                                                                            "label": "Empty"
                                                                        }
                                                                    }
                                                                },
                                                                "stopSequences": {
                                                                    "mode": "chose",
                                                                    "items": [
                                                                        null
                                                                    ],
                                                                    "collapsed": true
                                                                },
                                                                "thinkingConfig": {
                                                                    "nested": {
                                                                        "thinking_level": {
                                                                            "mode": "chose",
                                                                            "label": "Empty"
                                                                        },
                                                                        "include_thoughts": {
                                                                            "mode": "chose"
                                                                        }
                                                                    }
                                                                },
                                                                "mediaResolution": {
                                                                    "mode": "chose",
                                                                    "label": "Empty"
                                                                },
                                                                "responseMimeType": {
                                                                    "mode": "chose",
                                                                    "label": "Empty"
                                                                },
                                                                "responseModalities": {
                                                                    "mode": "chose"
                                                                }
                                                            }
                                                        },
                                                        "system_instruction": {
                                                            "nested": {
                                                                "parts": {
                                                                    "mode": "chose",
                                                                    "items": [
                                                                        null
                                                                    ]
                                                                }
                                                            }
                                                        },
                                                        "google_maps_context": {
                                                            "mode": "chose"
                                                        },
                                                        "google_search_context": {
                                                            "mode": "chose"
                                                        },
                                                        "file_search_store_context": {
                                                            "mode": "chose"
                                                        },
                                                        "function_declarations_context": {
                                                            "mode": "chose"
                                                        }
                                                    },
                                                    "parameters": {
                                                        "__IMTCONN__": {
                                                            "data": {
                                                                "scoped": "true",
                                                                "connection": "gemini-ai-q9zyjp"
                                                            },
                                                            "label": "GeminiConnection_AOS_2"
                                                        }
                                                    }
                                                },
                                                "parameters": [
                                                    {
                                                        "name": "__IMTCONN__",
                                                        "type": "account:gemini-ai-q9zyjp",
                                                        "label": "Connection",
                                                        "required": true
                                                    }
                                                ],
                                                "expect": [
                                                    {
                                                        "name": "model",
                                                        "type": "select",
                                                        "label": "AI Model",
                                                        "required": true
                                                    },
                                                    {
                                                        "name": "contents",
                                                        "spec": [
                                                            {
                                                                "name": "role",
                                                                "type": "select",
                                                                "label": "Role",
                                                                "options": [
                                                                    {
                                                                        "label": "User",
                                                                        "value": "user"
                                                                    },
                                                                    {
                                                                        "label": "Model",
                                                                        "value": "model"
                                                                    }
                                                                ]
                                                            },
                                                            {
                                                                "name": "parts",
                                                                "spec": [
                                                                    {
                                                                        "name": "type",
                                                                        "type": "select",
                                                                        "label": "Message Type",
                                                                        "options": [
                                                                            {
                                                                                "label": "Text",
                                                                                "value": "text",
                                                                                "nested": [
                                                                                    {
                                                                                        "name": "text",
                                                                                        "type": "text",
                                                                                        "label": "Text",
                                                                                        "required": false
                                                                                    }
                                                                                ]
                                                                            },
                                                                            {
                                                                                "label": "File",
                                                                                "value": "file",
                                                                                "nested": [
                                                                                    {
                                                                                        "name": "file_data",
                                                                                        "spec": [
                                                                                            {
                                                                                                "name": "mime_type",
                                                                                                "type": "text",
                                                                                                "label": "Mime Type",
                                                                                                "required": false
                                                                                            },
                                                                                            {
                                                                                                "help": "You get this from the 'Upload a File' module.",
                                                                                                "name": "file_uri",
                                                                                                "type": "text",
                                                                                                "label": "File URI",
                                                                                                "required": false
                                                                                            }
                                                                                        ],
                                                                                        "type": "collection",
                                                                                        "label": "File Data",
                                                                                        "required": false
                                                                                    }
                                                                                ]
                                                                            },
                                                                            {
                                                                                "label": "Function Call",
                                                                                "value": "functionCall",
                                                                                "nested": [
                                                                                    {
                                                                                        "name": "functionCall",
                                                                                        "spec": [
                                                                                            {
                                                                                                "help": "The name of the function to call.",
                                                                                                "name": "name",
                                                                                                "type": "text",
                                                                                                "label": "Name",
                                                                                                "required": true,
                                                                                                "validate": {
                                                                                                    "max": 64
                                                                                                }
                                                                                            },
                                                                                            {
                                                                                                "help": "The function parameters and values in JSON object format.",
                                                                                                "name": "args",
                                                                                                "type": "json",
                                                                                                "label": "Arguments"
                                                                                            },
                                                                                            {
                                                                                                "help": "The unique ID of the function call.",
                                                                                                "name": "id",
                                                                                                "type": "text",
                                                                                                "label": "Function Call ID"
                                                                                            }
                                                                                        ],
                                                                                        "type": "collection",
                                                                                        "label": "Function Call"
                                                                                    }
                                                                                ]
                                                                            },
                                                                            {
                                                                                "label": "Function Response",
                                                                                "value": "functionResponse",
                                                                                "nested": [
                                                                                    {
                                                                                        "name": "functionResponse",
                                                                                        "spec": [
                                                                                            {
                                                                                                "help": "The name of the function to call.",
                                                                                                "name": "name",
                                                                                                "type": "text",
                                                                                                "label": "Name",
                                                                                                "required": true,
                                                                                                "validate": {
                                                                                                    "max": 64
                                                                                                }
                                                                                            },
                                                                                            {
                                                                                                "help": "The function response in JSON object format.",
                                                                                                "name": "response",
                                                                                                "type": "json",
                                                                                                "label": "Response",
                                                                                                "required": true
                                                                                            }
                                                                                        ],
                                                                                        "type": "collection",
                                                                                        "label": "Function Response"
                                                                                    }
                                                                                ]
                                                                            }
                                                                        ]
                                                                    },
                                                                    {
                                                                        "name": "thoughtSignature",
                                                                        "type": "text",
                                                                        "label": "Thought Signature"
                                                                    }
                                                                ],
                                                                "type": "array",
                                                                "label": "Parts"
                                                            }
                                                        ],
                                                        "type": "array",
                                                        "label": "Messages",
                                                        "required": true
                                                    },
                                                    {
                                                        "name": "system_instruction",
                                                        "spec": [
                                                            {
                                                                "name": "parts",
                                                                "spec": {
                                                                    "name": "value",
                                                                    "spec": [
                                                                        {
                                                                            "name": "text",
                                                                            "type": "text",
                                                                            "label": "Value"
                                                                        }
                                                                    ],
                                                                    "type": "collection",
                                                                    "label": "Prompt"
                                                                },
                                                                "type": "array",
                                                                "label": "Prompts"
                                                            }
                                                        ],
                                                        "type": "collection",
                                                        "label": "System Instructions"
                                                    },
                                                    {
                                                        "name": "safetySettings",
                                                        "spec": [
                                                            {
                                                                "name": "category",
                                                                "type": "select",
                                                                "label": "Category",
                                                                "options": [
                                                                    {
                                                                        "label": "Harassment content",
                                                                        "value": "HARM_CATEGORY_HARASSMENT"
                                                                    },
                                                                    {
                                                                        "label": "Hate speech and content",
                                                                        "value": "HARM_CATEGORY_HATE_SPEECH"
                                                                    },
                                                                    {
                                                                        "label": "Sexually explicit content.",
                                                                        "value": "HARM_CATEGORY_SEXUALLY_EXPLICIT"
                                                                    },
                                                                    {
                                                                        "label": "Dangerous content:",
                                                                        "value": "HARM_CATEGORY_DANGEROUS_CONTENT"
                                                                    }
                                                                ]
                                                            },
                                                            {
                                                                "name": "threshold",
                                                                "type": "select",
                                                                "label": "Threshold",
                                                                "options": [
                                                                    {
                                                                        "label": "Block low and above.",
                                                                        "value": "BLOCK_LOW_AND_ABOVE"
                                                                    },
                                                                    {
                                                                        "label": "Block medium and above.",
                                                                        "value": "BLOCK_MEDIUM_AND_ABOVE"
                                                                    },
                                                                    {
                                                                        "label": "Block only high.",
                                                                        "value": "BLOCK_ONLY_HIGH"
                                                                    },
                                                                    {
                                                                        "label": "Block none.",
                                                                        "value": "BLOCK_NONE"
                                                                    }
                                                                ]
                                                            }
                                                        ],
                                                        "type": "array",
                                                        "label": "Safety Settings"
                                                    },
                                                    {
                                                        "name": "generationConfig",
                                                        "spec": [
                                                            {
                                                                "name": "stopSequences",
                                                                "spec": {
                                                                    "name": "value",
                                                                    "type": "text",
                                                                    "label": "Stop Sequence"
                                                                },
                                                                "type": "array",
                                                                "label": "Stop Sequences"
                                                            },
                                                            {
                                                                "name": "responseModalities",
                                                                "type": "select",
                                                                "label": "Response Modalities",
                                                                "multiple": true,
                                                                "validate": {
                                                                    "enum": [
                                                                        "text",
                                                                        "image"
                                                                    ]
                                                                }
                                                            },
                                                            {
                                                                "name": "maxOutputTokens",
                                                                "type": "number",
                                                                "label": "Max Output Tokens"
                                                            },
                                                            {
                                                                "name": "temperature",
                                                                "type": "number",
                                                                "label": "Temperature",
                                                                "validate": {
                                                                    "max": 1,
                                                                    "min": 0
                                                                }
                                                            },
                                                            {
                                                                "name": "topP",
                                                                "type": "number",
                                                                "label": "Top P",
                                                                "validate": {
                                                                    "max": 1,
                                                                    "min": 0
                                                                }
                                                            },
                                                            {
                                                                "name": "topK",
                                                                "type": "number",
                                                                "label": "Top K"
                                                            },
                                                            {
                                                                "name": "thinkingConfig",
                                                                "spec": [
                                                                    {
                                                                        "name": "thinkingBudget",
                                                                        "type": "number",
                                                                        "label": "Thinking Budget"
                                                                    },
                                                                    {
                                                                        "name": "include_thoughts",
                                                                        "type": "boolean",
                                                                        "label": "Include Thoughts"
                                                                    },
                                                                    {
                                                                        "name": "thinking_level",
                                                                        "type": "select",
                                                                        "label": "Thinking Level",
                                                                        "validate": {
                                                                            "enum": [
                                                                                "low",
                                                                                "high"
                                                                            ]
                                                                        }
                                                                    }
                                                                ],
                                                                "type": "collection",
                                                                "label": "Thinking Config"
                                                            },
                                                            {
                                                                "name": "mediaResolution",
                                                                "type": "select",
                                                                "label": "Media Resolution",
                                                                "validate": {
                                                                    "enum": [
                                                                        "media_resolution_low",
                                                                        "media_resolution_medium",
                                                                        "media_resolution_high"
                                                                    ]
                                                                }
                                                            },
                                                            {
                                                                "name": "imageConfig",
                                                                "spec": [
                                                                    {
                                                                        "name": "imageSize",
                                                                        "type": "select",
                                                                        "label": "Image Size",
                                                                        "validate": {
                                                                            "enum": [
                                                                                "1K",
                                                                                "2K",
                                                                                "4K"
                                                                            ]
                                                                        }
                                                                    }
                                                                ],
                                                                "type": "collection",
                                                                "label": "Image Configuration"
                                                            },
                                                            {
                                                                "name": "responseMimeType",
                                                                "type": "select",
                                                                "label": "Response Format"
                                                            }
                                                        ],
                                                        "type": "collection",
                                                        "label": "Generation configurations"
                                                    },
                                                    {
                                                        "name": "tools",
                                                        "type": "any",
                                                        "label": "Tools"
                                                    },
                                                    {
                                                        "name": "tool_config",
                                                        "type": "any",
                                                        "label": "Tool Config"
                                                    },
                                                    {
                                                        "name": "function_declarations_context",
                                                        "type": "boolean",
                                                        "label": "Function Declarations Grounding"
                                                    },
                                                    {
                                                        "name": "url_context",
                                                        "type": "boolean",
                                                        "label": "URL Context"
                                                    },
                                                    {
                                                        "name": "google_search_context",
                                                        "type": "boolean",
                                                        "label": "Google Search Grounding"
                                                    },
                                                    {
                                                        "name": "code_execution",
                                                        "type": "boolean",
                                                        "label": "Code Execution"
                                                    },
                                                    {
                                                        "name": "google_maps_context",
                                                        "type": "boolean",
                                                        "label": "Google Maps Grounding"
                                                    },
                                                    {
                                                        "name": "file_search_store_context",
                                                        "type": "boolean",
                                                        "label": "File Search Store Context"
                                                    }
                                                ],
                                                "advanced": true
                                            }
                                        },
                                        {
                                            "id": 197,
                                            "module": "gemini-ai:createACompletionGeminiPro",
                                            "version": 1,
                                            "parameters": {
                                                "__IMTCONN__": 13301844
                                            },
                                            "mapper": {
                                                "model": "gemini-3-pro-preview",
                                                "contents": [
                                                    {
                                                        "role": "user",
                                                        "parts": [
                                                            {
                                                                "text": "Decide which angle to use for this lead, including coherence validation and ranking.\r\n\r\nBASELINE (raw JSON)\r\n{{199.result}}\r\n\r\nANGLES (raw JSON)\r\nidentity_angle: \n{{196.result.angle_identity}} \n\nangle_1: \n{{196.result.angle_1}}\n\nangle_2: \n{{196.result.angle_2}}\n\nPersona guardrails:\r\nPersona DO: {{184.result.communication_guide.do_this}}\r\nPersona DON'T: {{184.result.communication_guide.avoid_this}}\r\n\r\nOrbit reminder (Base Contribution):\n{{189.result.base_contribution}}\n\nTASK\r\n1) Evaluate star_angle and secondary_angle:\r\n   - coherence_pass (using the coherence rules)\r\n   - eligibility gates (orbit_fit >= 7, persona_fit >= 7, confidence >= 5)\r\n   - beats_baseline (implication_magnitude vs baseline_bar)\r\n   - leads_to_offer_strength (0–10): how cleanly orbit_application leads into the AOS offer and matches ICP targeting\r\n\r\n2) Rank star vs secondary. You may override labels if secondary is stronger.\r\n\r\n3) Select:\r\n- If the best-ranked angle is eligible and beats baseline (or ties under tie rules), select ANGLE with that angle.\r\n- Otherwise select BASE_ONLY.\r\n\r\nOUTPUT JSON ONLY in this exact shape (no extra keys):\r\n\r\n{\r\n  \"selected_mode\": \"ANGLE|BASE_ONLY\",\r\n  \"selected_angle_key\": \"star_angle|secondary_angle|none\",\r\n  \"selected_angle_id\": \"string\",\r\n  \"identity_available\": true,\r\n  \"identity_angle_id\": \"string\",\r\n  \"decision_trace\": {\r\n    \"baseline_bar\": 0,\r\n    \"thresholds\": {\r\n      \"min_orbit_fit\": 7,\r\n      \"min_persona_fit\": 7,\r\n      \"min_confidence\": 5,\r\n      \"tie_min_novelty\": 7,\r\n      \"tie_min_confidence\": 7\r\n    },\r\n    \"ranking\": {\r\n      \"winner_key\": \"star_angle|secondary_angle|none\",\r\n      \"winner_reason\": \"string\"\r\n    },\r\n    \"evaluations\": {\r\n      \"star_angle\": {\r\n        \"coherence_pass\": true,\r\n        \"eligible\": true,\r\n        \"beats_baseline\": true,\r\n        \"leads_to_offer_strength\": 0,\r\n        \"scores_used\": {\r\n          \"implication_magnitude\": 0,\r\n          \"orbit_fit\": 0,\r\n          \"persona_fit\": 0,\r\n          \"novelty\": 0,\r\n          \"confidence\": 0\r\n        },\r\n        \"notes\": \"string\"\r\n      },\r\n      \"secondary_angle\": {\r\n        \"coherence_pass\": true,\r\n        \"eligible\": true,\r\n        \"beats_baseline\": true,\r\n        \"leads_to_offer_strength\": 0,\r\n        \"scores_used\": {\r\n          \"implication_magnitude\": 0,\r\n          \"orbit_fit\": 0,\r\n          \"persona_fit\": 0,\r\n          \"novelty\": 0,\r\n          \"confidence\": 0\r\n        },\r\n        \"notes\": \"string\"\r\n      }\r\n    },\r\n    \"final_reason\": \"string\"\r\n  }\r\n}\r\n\nOUTPUT REQUIREMENTS\r\n- Output MUST be exactly one JSON object that matches the required output format.\r\n- Do NOT wrap the output in code fences (```).\r\n- Do NOT output anything except the JSON object.",
                                                                "type": "text"
                                                            }
                                                        ]
                                                    }
                                                ],
                                                "generationConfig": {
                                                    "imageConfig": {},
                                                    "temperature": "0.2",
                                                    "stopSequences": [
                                                        ""
                                                    ],
                                                    "thinkingConfig": {
                                                        "thinkingBudget": "512"
                                                    },
                                                    "maxOutputTokens": "4096"
                                                },
                                                "system_instruction": {
                                                    "parts": [
                                                        {
                                                            "text": "You are the AOS Angle Checker.\r\n\r\nGOAL\r\nSelect the best usable angle (between angle_1 and angle_2) OR fall back to BASE_ONLY (base_angle).\r\nThis module validates coherence/quality, performs a human-like sanity check, and ranks the two candidate angles.\r\n\r\nDEFINITIONS\r\n- Orbit (AOS scope): outbound outreach that gets in front of ICP decision-makers to generate conversations/meetings via relevant messaging.\r\n  AOS is NOT a database-building, CRM, or generic research service.\r\n- Base angle: baseline internal_pain fallback bar.\r\n\r\nHARD RULES\r\n1) Output VALID JSON ONLY in the exact shape required by the user prompt.\r\n2) DO NOT write email copy.\r\n3) Do NOT invent facts. Use only what is present in the provided angle objects and baseline.\r\n4) Ranking and selection must be orbit-safe and persona-safe:\r\n   - orbit_fit is the main proxy for scope.\r\n   - persona_fit is the main proxy for persona relevance.\r\n5) The checker may OVERRIDE any upstream labeling by selecting whichever candidate is stronger/coherent.\r\n\r\nCOHERENCE CHECK (must pass to be eligible)\r\nAn angle fails coherence if any of these are true:\r\n- situation_facts are not supported by the angle’s supporting_signals (or are generic claims with no grounding).\r\n- why_now_thesis does not logically match situation_facts and implication_outcomes.\r\n- implication_outcomes are framed as AOS benefits instead of consequences for the lead.\r\n- orbit_application is not an outreach application in the form “Get in front of [ICP decision-makers] to achieve [outcome] (by applying CAO-with-AOS).”\r\n- bridge_support is missing OR does not logically flip implication into an end-state:\r\n  - solution_mechanism must describe an operational change consistent with orbit_application (no vague “you can solve it”).\r\n  - end_state must be a concrete flipped outcome for the lead (not “you get AOS”).\r\n\r\nHUMAN SANITY CHECK (explicit, must be answered per angle)\r\nFor EACH candidate angle, you MUST answer these questions with PASS/FAIL and a 1-sentence reason:\r\nA) Are we on the right path for THIS company’s business lines and ICP (from Business Intel)?\r\nB) Is this angle relevant to THIS person’s motives and DO/DON'T (from Person Understanding)?\r\nC) Would an email using this content plausibly earn a positive response (curiosity / meeting) from this person?\r\nD) Is the “why now” truly time-bound or urgency-linked (vs generic evergreen)?\r\nE) Does the bridge_support provide a vivid end-state (vs “we can solve it”)?\r\n\r\nIf 2 or more answers are FAIL => overall_sanity_pass = false for that angle.\r\n\r\nELIGIBILITY GATES\r\nAn angle is ELIGIBLE if:\r\n- coherence_pass = true\r\n- overall_sanity_pass = true\r\n- scores.orbit_fit >= 7\r\n- scores.persona_fit >= 7\r\n- scores.confidence >= 5\r\n\r\nBASELINE COMPARISON\r\nAn eligible angle BEATS the baseline if:\r\n- scores.implication_magnitude > baseline_bar\r\nTie is allowed only if:\r\n- scores.implication_magnitude == baseline_bar AND scores.novelty >= 7 AND scores.confidence >= 7\r\n\r\nRANKING (between angle_1 and angle_2)\r\nRank by:\r\n1) beats_baseline (true preferred)\r\n2) implication_magnitude (higher preferred)\r\n3) leads_to_offer_strength (0–10): how directly orbit_application matches ICP targeting and transitions into the base contribution\r\n4) confidence\r\n5) novelty\r\nIf one angle fails coherence, sanity, or eligibility, it cannot win.\r\n\r\nIDENTITY ANGLE\r\nangle_identity is not selectable as the primary angle. It is only passed forward as availability metadata.\r\n​"
                                                        }
                                                    ]
                                                }
                                            },
                                            "metadata": {
                                                "designer": {
                                                    "x": 3166,
                                                    "y": 5,
                                                    "name": "Angle Checker (3proPrev) 3"
                                                },
                                                "restore": {
                                                    "expect": {
                                                        "model": {
                                                            "mode": "chose",
                                                            "label": "gemini-3-pro-preview"
                                                        },
                                                        "contents": {
                                                            "mode": "chose",
                                                            "items": [
                                                                {
                                                                    "role": {
                                                                        "mode": "chose",
                                                                        "label": "User"
                                                                    },
                                                                    "parts": {
                                                                        "mode": "chose",
                                                                        "items": [
                                                                            {
                                                                                "type": {
                                                                                    "mode": "chose",
                                                                                    "label": "Text"
                                                                                }
                                                                            }
                                                                        ]
                                                                    }
                                                                }
                                                            ]
                                                        },
                                                        "url_context": {
                                                            "mode": "chose"
                                                        },
                                                        "code_execution": {
                                                            "mode": "chose"
                                                        },
                                                        "safetySettings": {
                                                            "mode": "chose"
                                                        },
                                                        "generationConfig": {
                                                            "nested": {
                                                                "imageConfig": {
                                                                    "nested": {
                                                                        "imageSize": {
                                                                            "mode": "chose",
                                                                            "label": "Empty"
                                                                        }
                                                                    }
                                                                },
                                                                "stopSequences": {
                                                                    "mode": "chose",
                                                                    "items": [
                                                                        null
                                                                    ],
                                                                    "collapsed": true
                                                                },
                                                                "thinkingConfig": {
                                                                    "nested": {
                                                                        "thinking_level": {
                                                                            "mode": "chose",
                                                                            "label": "Empty"
                                                                        },
                                                                        "include_thoughts": {
                                                                            "mode": "chose"
                                                                        }
                                                                    }
                                                                },
                                                                "mediaResolution": {
                                                                    "mode": "chose",
                                                                    "label": "Empty"
                                                                },
                                                                "responseMimeType": {
                                                                    "mode": "chose",
                                                                    "label": "Empty"
                                                                },
                                                                "responseModalities": {
                                                                    "mode": "chose"
                                                                }
                                                            }
                                                        },
                                                        "system_instruction": {
                                                            "nested": {
                                                                "parts": {
                                                                    "mode": "chose",
                                                                    "items": [
                                                                        null
                                                                    ]
                                                                }
                                                            }
                                                        },
                                                        "google_maps_context": {
                                                            "mode": "chose"
                                                        },
                                                        "google_search_context": {
                                                            "mode": "chose"
                                                        },
                                                        "file_search_store_context": {
                                                            "mode": "chose"
                                                        },
                                                        "function_declarations_context": {
                                                            "mode": "chose"
                                                        }
                                                    },
                                                    "parameters": {
                                                        "__IMTCONN__": {
                                                            "data": {
                                                                "scoped": "true",
                                                                "connection": "gemini-ai-q9zyjp"
                                                            },
                                                            "label": "GeminiConnection_AOS_2"
                                                        }
                                                    }
                                                },
                                                "parameters": [
                                                    {
                                                        "name": "__IMTCONN__",
                                                        "type": "account:gemini-ai-q9zyjp",
                                                        "label": "Connection",
                                                        "required": true
                                                    }
                                                ],
                                                "expect": [
                                                    {
                                                        "name": "model",
                                                        "type": "select",
                                                        "label": "AI Model",
                                                        "required": true
                                                    },
                                                    {
                                                        "name": "contents",
                                                        "spec": [
                                                            {
                                                                "name": "role",
                                                                "type": "select",
                                                                "label": "Role",
                                                                "options": [
                                                                    {
                                                                        "label": "User",
                                                                        "value": "user"
                                                                    },
                                                                    {
                                                                        "label": "Model",
                                                                        "value": "model"
                                                                    }
                                                                ]
                                                            },
                                                            {
                                                                "name": "parts",
                                                                "spec": [
                                                                    {
                                                                        "name": "type",
                                                                        "type": "select",
                                                                        "label": "Message Type",
                                                                        "options": [
                                                                            {
                                                                                "label": "Text",
                                                                                "value": "text",
                                                                                "nested": [
                                                                                    {
                                                                                        "name": "text",
                                                                                        "type": "text",
                                                                                        "label": "Text",
                                                                                        "required": false
                                                                                    }
                                                                                ]
                                                                            },
                                                                            {
                                                                                "label": "File",
                                                                                "value": "file",
                                                                                "nested": [
                                                                                    {
                                                                                        "name": "file_data",
                                                                                        "spec": [
                                                                                            {
                                                                                                "name": "mime_type",
                                                                                                "type": "text",
                                                                                                "label": "Mime Type",
                                                                                                "required": false
                                                                                            },
                                                                                            {
                                                                                                "help": "You get this from the 'Upload a File' module.",
                                                                                                "name": "file_uri",
                                                                                                "type": "text",
                                                                                                "label": "File URI",
                                                                                                "required": false
                                                                                            }
                                                                                        ],
                                                                                        "type": "collection",
                                                                                        "label": "File Data",
                                                                                        "required": false
                                                                                    }
                                                                                ]
                                                                            },
                                                                            {
                                                                                "label": "Function Call",
                                                                                "value": "functionCall",
                                                                                "nested": [
                                                                                    {
                                                                                        "name": "functionCall",
                                                                                        "spec": [
                                                                                            {
                                                                                                "help": "The name of the function to call.",
                                                                                                "name": "name",
                                                                                                "type": "text",
                                                                                                "label": "Name",
                                                                                                "required": true,
                                                                                                "validate": {
                                                                                                    "max": 64
                                                                                                }
                                                                                            },
                                                                                            {
                                                                                                "help": "The function parameters and values in JSON object format.",
                                                                                                "name": "args",
                                                                                                "type": "json",
                                                                                                "label": "Arguments"
                                                                                            },
                                                                                            {
                                                                                                "help": "The unique ID of the function call.",
                                                                                                "name": "id",
                                                                                                "type": "text",
                                                                                                "label": "Function Call ID"
                                                                                            }
                                                                                        ],
                                                                                        "type": "collection",
                                                                                        "label": "Function Call"
                                                                                    }
                                                                                ]
                                                                            },
                                                                            {
                                                                                "label": "Function Response",
                                                                                "value": "functionResponse",
                                                                                "nested": [
                                                                                    {
                                                                                        "name": "functionResponse",
                                                                                        "spec": [
                                                                                            {
                                                                                                "help": "The name of the function to call.",
                                                                                                "name": "name",
                                                                                                "type": "text",
                                                                                                "label": "Name",
                                                                                                "required": true,
                                                                                                "validate": {
                                                                                                    "max": 64
                                                                                                }
                                                                                            },
                                                                                            {
                                                                                                "help": "The function response in JSON object format.",
                                                                                                "name": "response",
                                                                                                "type": "json",
                                                                                                "label": "Response",
                                                                                                "required": true
                                                                                            }
                                                                                        ],
                                                                                        "type": "collection",
                                                                                        "label": "Function Response"
                                                                                    }
                                                                                ]
                                                                            }
                                                                        ]
                                                                    },
                                                                    {
                                                                        "name": "thoughtSignature",
                                                                        "type": "text",
                                                                        "label": "Thought Signature"
                                                                    }
                                                                ],
                                                                "type": "array",
                                                                "label": "Parts"
                                                            }
                                                        ],
                                                        "type": "array",
                                                        "label": "Messages",
                                                        "required": true
                                                    },
                                                    {
                                                        "name": "system_instruction",
                                                        "spec": [
                                                            {
                                                                "name": "parts",
                                                                "spec": {
                                                                    "name": "value",
                                                                    "spec": [
                                                                        {
                                                                            "name": "text",
                                                                            "type": "text",
                                                                            "label": "Value"
                                                                        }
                                                                    ],
                                                                    "type": "collection",
                                                                    "label": "Prompt"
                                                                },
                                                                "type": "array",
                                                                "label": "Prompts"
                                                            }
                                                        ],
                                                        "type": "collection",
                                                        "label": "System Instructions"
                                                    },
                                                    {
                                                        "name": "safetySettings",
                                                        "spec": [
                                                            {
                                                                "name": "category",
                                                                "type": "select",
                                                                "label": "Category",
                                                                "options": [
                                                                    {
                                                                        "label": "Harassment content",
                                                                        "value": "HARM_CATEGORY_HARASSMENT"
                                                                    },
                                                                    {
                                                                        "label": "Hate speech and content",
                                                                        "value": "HARM_CATEGORY_HATE_SPEECH"
                                                                    },
                                                                    {
                                                                        "label": "Sexually explicit content.",
                                                                        "value": "HARM_CATEGORY_SEXUALLY_EXPLICIT"
                                                                    },
                                                                    {
                                                                        "label": "Dangerous content:",
                                                                        "value": "HARM_CATEGORY_DANGEROUS_CONTENT"
                                                                    }
                                                                ]
                                                            },
                                                            {
                                                                "name": "threshold",
                                                                "type": "select",
                                                                "label": "Threshold",
                                                                "options": [
                                                                    {
                                                                        "label": "Block low and above.",
                                                                        "value": "BLOCK_LOW_AND_ABOVE"
                                                                    },
                                                                    {
                                                                        "label": "Block medium and above.",
                                                                        "value": "BLOCK_MEDIUM_AND_ABOVE"
                                                                    },
                                                                    {
                                                                        "label": "Block only high.",
                                                                        "value": "BLOCK_ONLY_HIGH"
                                                                    },
                                                                    {
                                                                        "label": "Block none.",
                                                                        "value": "BLOCK_NONE"
                                                                    }
                                                                ]
                                                            }
                                                        ],
                                                        "type": "array",
                                                        "label": "Safety Settings"
                                                    },
                                                    {
                                                        "name": "generationConfig",
                                                        "spec": [
                                                            {
                                                                "name": "stopSequences",
                                                                "spec": {
                                                                    "name": "value",
                                                                    "type": "text",
                                                                    "label": "Stop Sequence"
                                                                },
                                                                "type": "array",
                                                                "label": "Stop Sequences"
                                                            },
                                                            {
                                                                "name": "responseModalities",
                                                                "type": "select",
                                                                "label": "Response Modalities",
                                                                "multiple": true,
                                                                "validate": {
                                                                    "enum": [
                                                                        "text",
                                                                        "image"
                                                                    ]
                                                                }
                                                            },
                                                            {
                                                                "name": "maxOutputTokens",
                                                                "type": "number",
                                                                "label": "Max Output Tokens"
                                                            },
                                                            {
                                                                "name": "temperature",
                                                                "type": "number",
                                                                "label": "Temperature",
                                                                "validate": {
                                                                    "max": 1,
                                                                    "min": 0
                                                                }
                                                            },
                                                            {
                                                                "name": "topP",
                                                                "type": "number",
                                                                "label": "Top P",
                                                                "validate": {
                                                                    "max": 1,
                                                                    "min": 0
                                                                }
                                                            },
                                                            {
                                                                "name": "topK",
                                                                "type": "number",
                                                                "label": "Top K"
                                                            },
                                                            {
                                                                "name": "thinkingConfig",
                                                                "spec": [
                                                                    {
                                                                        "name": "thinkingBudget",
                                                                        "type": "number",
                                                                        "label": "Thinking Budget"
                                                                    },
                                                                    {
                                                                        "name": "include_thoughts",
                                                                        "type": "boolean",
                                                                        "label": "Include Thoughts"
                                                                    },
                                                                    {
                                                                        "name": "thinking_level",
                                                                        "type": "select",
                                                                        "label": "Thinking Level",
                                                                        "validate": {
                                                                            "enum": [
                                                                                "low",
                                                                                "high"
                                                                            ]
                                                                        }
                                                                    }
                                                                ],
                                                                "type": "collection",
                                                                "label": "Thinking Config"
                                                            },
                                                            {
                                                                "name": "mediaResolution",
                                                                "type": "select",
                                                                "label": "Media Resolution",
                                                                "validate": {
                                                                    "enum": [
                                                                        "media_resolution_low",
                                                                        "media_resolution_medium",
                                                                        "media_resolution_high"
                                                                    ]
                                                                }
                                                            },
                                                            {
                                                                "name": "imageConfig",
                                                                "spec": [
                                                                    {
                                                                        "name": "imageSize",
                                                                        "type": "select",
                                                                        "label": "Image Size",
                                                                        "validate": {
                                                                            "enum": [
                                                                                "1K",
                                                                                "2K",
                                                                                "4K"
                                                                            ]
                                                                        }
                                                                    }
                                                                ],
                                                                "type": "collection",
                                                                "label": "Image Configuration"
                                                            },
                                                            {
                                                                "name": "responseMimeType",
                                                                "type": "select",
                                                                "label": "Response Format"
                                                            }
                                                        ],
                                                        "type": "collection",
                                                        "label": "Generation configurations"
                                                    },
                                                    {
                                                        "name": "tools",
                                                        "type": "any",
                                                        "label": "Tools"
                                                    },
                                                    {
                                                        "name": "tool_config",
                                                        "type": "any",
                                                        "label": "Tool Config"
                                                    },
                                                    {
                                                        "name": "function_declarations_context",
                                                        "type": "boolean",
                                                        "label": "Function Declarations Grounding"
                                                    },
                                                    {
                                                        "name": "url_context",
                                                        "type": "boolean",
                                                        "label": "URL Context"
                                                    },
                                                    {
                                                        "name": "google_search_context",
                                                        "type": "boolean",
                                                        "label": "Google Search Grounding"
                                                    },
                                                    {
                                                        "name": "code_execution",
                                                        "type": "boolean",
                                                        "label": "Code Execution"
                                                    },
                                                    {
                                                        "name": "google_maps_context",
                                                        "type": "boolean",
                                                        "label": "Google Maps Grounding"
                                                    },
                                                    {
                                                        "name": "file_search_store_context",
                                                        "type": "boolean",
                                                        "label": "File Search Store Context"
                                                    }
                                                ],
                                                "advanced": true
                                            }
                                        },
                                        {
                                            "id": 216,
                                            "module": "gemini-ai:createACompletionGeminiPro",
                                            "version": 1,
                                            "parameters": {
                                                "__IMTCONN__": 13301844
                                            },
                                            "mapper": {
                                                "model": "gemini-3-pro-preview",
                                                "contents": [
                                                    {
                                                        "role": "user",
                                                        "parts": [
                                                            {
                                                                "text": "Build the Render Spec (orders) for the downstream writer using the input JSON below.\r\nReturn ONLY valid JSON matching the exact output schema.\r\n\r\nLEAD\r\nlead_id: {{1.`0`}}\r\nfirst_name: {{1.`2`}}\r\ncompany_name: {{1.`16`}}\r\ncontact_title: {{1.`4`}}\r\nlanguage: english\r\nregion: {{205.result.business_lines[].business_model.area_operations}}\r\n\r\nMODULE OUTPUTS (raw JSON)\r\nBASE ANGLE (angle-like):\r\n{{199.result}} \n\nANGLE SYNTHESIZER (angle-like objects):\r\n{{196.result}}\r\n\r\nANGLE CHECKER (decision):\r\n{{197.result}}\r\n\r\nBASE CONTRIBUTION (raw JSON):\r\n{{189.result.base_contribution}}\r\n\r\nHUMAN CONTEXT (raw JSON): \n{{184.result}}\n\r\nCONSTRAINTS (raw JSON):\r\n{\r\n \"constraints\": {\r\n    \"one_sentence_per_paragraph\": true,\r\n    \"no_invented_facts\": true,\r\n    \"no_competitor_invention\": true,\r\n    \"no_time_claims_unless_in_inputs\": true,\r\n    \"hook_max_words\": 15,\r\n    \"hook_target_words\": 10,\r\n    \"never_print_assumed_tags\": true,\r\n    \"uncertainty_language_policy\": \"ALLOW_HEDGING_IF_LOW_CERTAINTY\"\r\n  }\r\n}\r\n\r\nPROMISE GUARDRAILS (raw JSON):\r\n{\r\n  \"promise_guardrails\": {\r\n    \"volume_claim_policy\": \"Do not claim 'thousands per day' or any specific volume unless explicitly supported by inputs.\",\r\n    \"allowed_soft_claim\": \"as many as you want within your ICP’s available volume\",\r\n    \"pre_interest_claim_allowed\": false\r\n  }\r\n}\r\n\r\nDNA v6 (architecture only):\r\nenabled: true\r\n\r\nINTERNAL SELECTION RULES (must follow strictly)\r\n1) Parse objects (explicit mapping):\r\n- base_angle := BASE ANGLE input above\r\n- identity_angle := angle_synthesizer.result.angle_identity\r\n- angle_1 := angle_synthesizer.result.angle_1\r\n- angle_2 := angle_synthesizer.result.angle_2\r\n- decision := ANGLE CHECKER input above\r\n  (decision.selected_mode, decision.selected_angle_key, decision.selected_angle_id)\r\n\r\n2) Select primary angle object:\r\n- If decision.selected_mode == \"ANGLE\":\r\n    selected_angle := object referenced by decision.selected_angle_key (\"angle_1\" or \"angle_2\")\r\n  Else:\r\n    selected_angle := base_angle\r\n\r\n3) Identity angle usage:\r\n- identity_angle may be used ONLY as optional identity/tone framing guidance.\r\n- identity_angle must NEVER be used as the primary problem frame.\r\n\r\n4) Hedging policy:\r\n- hedging_required := true if selected_angle.scores.confidence exists AND selected_angle.scores.confidence < 7\r\n- If selected_angle.scores.confidence is missing, set hedging_required=true (be conservative).\r\n- If hedging_required, instruct cautious language in Hook/Situation/Implication/Bridge.\r\n- Never print “[Assumed]” tags downstream.\r\n\r\n5) Grounding policy (critical):\r\n- Situation section must be built ONLY from selected_angle.situation_facts (literal, concrete facts; max 2 facts).\r\n- Implication section must be built ONLY from selected_angle.implication_outcomes (max 1 outcome).\r\n- Hook must be derived from the implication (pain/dream punch), without adding new facts.\r\n- Bridge MUST paint an end-state flip:\r\n   - Primary source: selected_angle.bridge_support.end_state (use verbatim meaning, not necessarily verbatim wording).\r\n   - Mechanism hint (optional): selected_angle.bridge_support.solution_mechanism as a non-tactical hint (no tools, no steps).\r\n   - If bridge_support is missing, derive end-state cautiously from selected_angle.orbit_application outcome.\r\n- Bridge must NOT mention AOS, tools, or execution details.\r\n\r\n6) Offer + Details + CTA (DNA v6 template enforcement):\r\n- Contribution must use DNA v6 offer template lines, filled.\r\n- Details must use DNA v6 details template lines (no tool lists, no tactics, no invented volume claims).\r\n- CTA must use DNA v6 CTA template lines EXACTLY.\r\n\r\n7) Competitors and time claims:\r\n- Only mention competitors if explicitly present in selected_angle.situation_facts OR selected_angle.evidence_pack snippets.\r\n- Only mention timeframes if explicitly present in selected_angle.situation_facts OR selected_angle.evidence_pack snippets.\n\nOUTPUT REQUIREMENTS\r\n- Do NOT wrap the output in code fences (```).\r\n- Do NOT output anything except the JSON object.",
                                                                "type": "text"
                                                            }
                                                        ]
                                                    }
                                                ],
                                                "generationConfig": {
                                                    "imageConfig": {},
                                                    "temperature": "0.2",
                                                    "stopSequences": [
                                                        ""
                                                    ],
                                                    "thinkingConfig": {
                                                        "thinkingBudget": "512"
                                                    },
                                                    "maxOutputTokens": "4096"
                                                },
                                                "system_instruction": {
                                                    "parts": [
                                                        {
                                                            "text": "ROLE\r\nYou are AOS Crafter Architect (INSTRUCTIONS ONLY).\r\n\r\nGOAL\r\nGiven a selected Angle + Base Contribution + Human Context + constraints, output a Render Spec (orders) that tells a downstream writer (Crafter Harmonizer) exactly how to write each email section using DEEP EMAIL DNA v6 (ARCHITECTURE ONLY).\r\n\r\nABSOLUTE RULES\r\n1) OUTPUT ONLY JSON: Return only valid JSON that matches the exact output schema; no markdown, no commentary.\r\n2) INSTRUCTIONS ONLY: Do NOT output a finished email, and do NOT output full final section sentences.\r\n   You MAY output short tokens/phrases (ICP phrase, region scope, situation phrase) needed to fill templates.\r\n3) TRUTH: No invented facts. Use only what exists in inputs.\r\n4) COMPETITORS: Only mention competitors if explicitly in inputs; otherwise do not allow competitor mentions.\r\n5) TIME CLAIMS: Only allow time claims if explicitly in inputs.\r\n6) SIGNAL GROUNDING: Situation must be literal and concrete; forbid abstract summaries.\r\n7) UNCERTAINTY:\r\n   - Angle may include certainty and assumption_notes.\r\n   - Never print \"[Assumed]\" tags in downstream email.\r\n   - If certainty is LOW, set flags.hedging_required=true and instruct cautious language in Hook/Situation/Implication/Bridge.\r\n8) TEMPLATE ENFORCEMENT:\r\n   Contribution must use DNA v6 offer template lines.\r\n   Details must use DNA v6 details template lines.\r\n   CTA must use DNA v6 CTA template lines.\r\n   Pre-interest line is allowed ONLY if input says pre_interest_claim_allowed=true.\r\n\r\nDEEP EMAIL DNA v6 (ARCHITECTURE ONLY)\r\nHook → Situation → Implication → Bridge → Contribution → Details → CTA\r\n(Use the v6 rules as constraints; do not rewrite them.)\r\n{\r\nDEEP EMAIL DNA v6\r\n(ARCHITECTURE ONLY)\r\nPurpose\r\nGenerate a cold email that feels spoken, sharp, and grounded in reality.\r\nThe email must read like a single causal chain:\r\nHook → Situation → Implication → Bridge → Contribution → Details → CTA\r\nNo fluff.\r\n No abstraction.\r\n No invented facts.\r\nGlobal Rules\r\nTruth and Grounding\r\nNo invented facts.\r\n\r\nOnly use what exists in inputs (signals, angle, business/human context, base contribution).\r\n\r\nNo competitor invention. Competitor names only if explicitly provided.\r\n\r\nNo time claims unless provided.\r\n\r\nDo not add “in weeks/months” unless inputs contain that timeline.\r\n\r\nNo abstraction for signals.\r\n\r\nIf a signal exists, state it as a concrete event or fact.\r\n\r\nDo not compress into interpretations (e.g., “competitors are aggressive”).\r\n\r\nSection Definitions and Requirements\r\n1) HOOK\r\nDefinition\r\nThe opening punch sentence.\r\nJob\r\nStop attention immediately by stating the pain, threat, risk, or dream state.\r\nRules\r\nMust be one short sentence\r\n\r\nMust be pain-forward or dream-forward, not a summary\r\n\r\nMust connect to something AOS can solve later (logically)\r\n\r\nMust not pitch or mention AOS/tools\r\n\r\nOften ends with something like:\r\n “…if you don’t do something.”\r\n\r\n~10 words (maximum 15)\r\n\r\nRules for the Prompt Process\r\nMust use the angle implication and turn it into a punch phrase\r\n\r\nMust Avoid\r\nGeneric openers (“Hope you’re well”)\r\n\r\nAbstract phrasing (“The market is competitive”)\r\n\r\nSoftening language (“might,” “perhaps”), unless inputs are uncertain\r\n\r\n2) SITUATION (Signal / Event / Suceso)\r\nDefinition\r\nThe real-world fact that makes the hook true.\r\nJob\r\nGround the hook in reality so it feels factual, not speculative.\r\nRules\r\nMust be concrete and observable\r\n\r\nInternal web\r\n\r\nLinkedIn signal\r\n\r\nExternal web signal\r\n\r\nMust be stated literally, not interpreted\r\n\r\nComes immediately after the Hook\r\n\r\nRules for the Prompt Process\r\nMust use angle details content\r\n\r\nSynthesize to maximize the Implication\r\n\r\nMust Avoid\r\nVague claims (“they’re scaling fast”) without a specific signal\r\n\r\nInvented stats or adoption claims\r\n\r\n3) IMPLICATION\r\nDefinition\r\nThe consequence of the situation for the lead.\r\nJob\r\nMake the cost of inaction unavoidable and personal to their role.\r\nRules\r\nIf angle is Threat → implication must be loss / risk / erosion\r\n\r\nIf angle is Opportunity → implication must be missed capture / closing window\r\n\r\nIf angle is Pain Point → implication must be missed opportunities\r\n\r\nMust clearly show why inaction is costly\r\n\r\nMust not propose a solution yet\r\n\r\nMust Avoid\r\nBroad business philosophy\r\n\r\nLong-term, vague consequences\r\n\r\n4) BRIDGE\r\nDefinition\r\nThe flip from problem → controllable outcome.\r\nJob\r\nMake the resolution feel obvious and logical, without pitching.\r\nRules\r\nDescribes the end result of the solution, not the solution itself\r\n\r\nUses the applied contribution solution to generate the end-state\r\n\r\nMust imply resolution as an outcome, not a method\r\n\r\nMust not mention AOS, tools, or execution details\r\n\r\nMust connect naturally from the implication\r\n\r\nMust set up an implied requirement\r\n (e.g., “to get this outcome, they need X access/positioning”)\r\n\r\nOften starts with:\r\n “If you could…”\r\nMust Avoid\r\nHow-to explanations\r\n\r\nTactical steps\r\n\r\n5) CONTRIBUTION (Offer)\r\nDefinition\r\nThe Offer Phrase block: a short, spoken promise framed as “why this makes sense.”\r\nJob\r\nMake the reader think:\r\n “That is exactly what I need.”\r\n While staying inside the base contribution ceiling.\r\nMandatory Template Structure\r\nLine 1 (mandatory):\r\n If this makes sense, we can get you as many appointments as you want with (ICP – CONTEXT leads like X) (who are facing this situation → formatted),\r\nLine 2 (optional — only if supported by inputs):\r\n (All of them interested in your offer beforehand.)\r\nLine 3 (optional — only if region/scope is defined and feasible):\r\n (And we can replicate this across the entire operating region, at scale, automatically.)\r\nRules\r\nMust stay inside the base contribution ceiling\r\n\r\nMust clearly fulfill the Bridge’s implied outcome\r\n\r\nBridge suggests a specific outcome\r\n\r\nContribution must subsume that outcome\r\n\r\nNo guarantees of closing or winning specific clients\r\n\r\nMust not claim pre-interest unless explicitly supported\r\n\r\nMust Avoid\r\nNarrowing the base contribution beyond scope\r\n\r\nAdding extra promises\r\n\r\n6) DETAILS\r\nDefinition\r\nA short capability proof explaining why the Contribution is achievable and done-for-you, without revealing the playbook.\r\nJob\r\nReduce skepticism while keeping execution hidden.\r\nMandatory Template\r\nWe can do this by:\r\nSourcing (ICP) at scale\r\n\r\nWriting deeply personalized and relevant emails, designed to spark real interest\r\n\r\nManaging all outbound campaigns end-to-end\r\n\r\nWe'll take care of the whole process — (company name) will just have to close all the new deals.\r\nMandatory Content Requirements\r\nLead sourcing:\r\n\r\nDescribe what leads will be sourced\r\n\r\nMust align with base + applied contribution\r\n\r\nDeep personalization:\r\n\r\nEnriched\r\n\r\nVerified\r\n\r\nDeeply personalized\r\n\r\nOne-to-one tone\r\n\r\nEnd-to-end management:\r\n\r\nFully done-for-you execution\r\n\r\nFinal sentence must explicitly state DFY (done-for-you).\r\nMust Avoid\r\nTactical sequences or tool lists\r\n\r\nUnrealistic city-specific volumes\r\n\r\nRepeating competitor narratives across bullets\r\n\r\n7) CTA\r\nDefinition\r\nSoft invitation to the next step.\r\nJob\r\nMake booking feel easy and risk-free.\r\nMandatory Template\r\nIf you like the idea, I’d love to show you more details over a quick 10-minute demo.\r\nThere, I’ll prepare a sample of 50 leads, all with tailored messages.\r\nThat way, you can see the quality of our results first.\r\nIf you’re open to it, let me know when it’s the best time for the demo.\r\nRules\r\nShort demo (~10 minutes)\r\n\r\nRisk-free sample of 50 leads with personalized emails\r\n\r\nSoft ask for availability\r\n\r\nNo urgency or scarcity language\r\n\r\n\r\n}\r\n\r\nOUTPUT\r\nReturn the Render Spec JSON only.\r\n\r\n\r\n\r\nBuild the Render Spec (orders) for the downstream writer using the input JSON below.\r\nReturn ONLY valid JSON matching the exact output schema.\r\n​"
                                                        }
                                                    ]
                                                }
                                            },
                                            "metadata": {
                                                "designer": {
                                                    "x": 3526,
                                                    "y": -1,
                                                    "name": "Crafter Architect (3proPrev) Lucas-1"
                                                },
                                                "restore": {
                                                    "expect": {
                                                        "model": {
                                                            "mode": "chose",
                                                            "label": "gemini-3-pro-preview"
                                                        },
                                                        "contents": {
                                                            "mode": "chose",
                                                            "items": [
                                                                {
                                                                    "role": {
                                                                        "mode": "chose",
                                                                        "label": "User"
                                                                    },
                                                                    "parts": {
                                                                        "mode": "chose",
                                                                        "items": [
                                                                            {
                                                                                "type": {
                                                                                    "mode": "chose",
                                                                                    "label": "Text"
                                                                                }
                                                                            }
                                                                        ]
                                                                    }
                                                                }
                                                            ]
                                                        },
                                                        "url_context": {
                                                            "mode": "chose"
                                                        },
                                                        "code_execution": {
                                                            "mode": "chose"
                                                        },
                                                        "safetySettings": {
                                                            "mode": "chose"
                                                        },
                                                        "generationConfig": {
                                                            "nested": {
                                                                "imageConfig": {
                                                                    "nested": {
                                                                        "imageSize": {
                                                                            "mode": "chose",
                                                                            "label": "Empty"
                                                                        }
                                                                    }
                                                                },
                                                                "stopSequences": {
                                                                    "mode": "chose",
                                                                    "items": [
                                                                        null
                                                                    ],
                                                                    "collapsed": true
                                                                },
                                                                "thinkingConfig": {
                                                                    "nested": {
                                                                        "thinking_level": {
                                                                            "mode": "chose",
                                                                            "label": "Empty"
                                                                        },
                                                                        "include_thoughts": {
                                                                            "mode": "chose"
                                                                        }
                                                                    }
                                                                },
                                                                "mediaResolution": {
                                                                    "mode": "chose",
                                                                    "label": "Empty"
                                                                },
                                                                "responseMimeType": {
                                                                    "mode": "chose",
                                                                    "label": "Empty"
                                                                },
                                                                "responseModalities": {
                                                                    "mode": "chose"
                                                                }
                                                            }
                                                        },
                                                        "system_instruction": {
                                                            "nested": {
                                                                "parts": {
                                                                    "mode": "chose",
                                                                    "items": [
                                                                        null
                                                                    ]
                                                                }
                                                            }
                                                        },
                                                        "google_maps_context": {
                                                            "mode": "chose"
                                                        },
                                                        "google_search_context": {
                                                            "mode": "chose"
                                                        },
                                                        "file_search_store_context": {
                                                            "mode": "chose"
                                                        },
                                                        "function_declarations_context": {
                                                            "mode": "chose"
                                                        }
                                                    },
                                                    "parameters": {
                                                        "__IMTCONN__": {
                                                            "data": {
                                                                "scoped": "true",
                                                                "connection": "gemini-ai-q9zyjp"
                                                            },
                                                            "label": "GeminiConnection_AOS_2"
                                                        }
                                                    }
                                                },
                                                "parameters": [
                                                    {
                                                        "name": "__IMTCONN__",
                                                        "type": "account:gemini-ai-q9zyjp",
                                                        "label": "Connection",
                                                        "required": true
                                                    }
                                                ],
                                                "expect": [
                                                    {
                                                        "name": "model",
                                                        "type": "select",
                                                        "label": "AI Model",
                                                        "required": true
                                                    },
                                                    {
                                                        "name": "contents",
                                                        "spec": [
                                                            {
                                                                "name": "role",
                                                                "type": "select",
                                                                "label": "Role",
                                                                "options": [
                                                                    {
                                                                        "label": "User",
                                                                        "value": "user"
                                                                    },
                                                                    {
                                                                        "label": "Model",
                                                                        "value": "model"
                                                                    }
                                                                ]
                                                            },
                                                            {
                                                                "name": "parts",
                                                                "spec": [
                                                                    {
                                                                        "name": "type",
                                                                        "type": "select",
                                                                        "label": "Message Type",
                                                                        "options": [
                                                                            {
                                                                                "label": "Text",
                                                                                "value": "text",
                                                                                "nested": [
                                                                                    {
                                                                                        "name": "text",
                                                                                        "type": "text",
                                                                                        "label": "Text",
                                                                                        "required": false
                                                                                    }
                                                                                ]
                                                                            },
                                                                            {
                                                                                "label": "File",
                                                                                "value": "file",
                                                                                "nested": [
                                                                                    {
                                                                                        "name": "file_data",
                                                                                        "spec": [
                                                                                            {
                                                                                                "name": "mime_type",
                                                                                                "type": "text",
                                                                                                "label": "Mime Type",
                                                                                                "required": false
                                                                                            },
                                                                                            {
                                                                                                "help": "You get this from the 'Upload a File' module.",
                                                                                                "name": "file_uri",
                                                                                                "type": "text",
                                                                                                "label": "File URI",
                                                                                                "required": false
                                                                                            }
                                                                                        ],
                                                                                        "type": "collection",
                                                                                        "label": "File Data",
                                                                                        "required": false
                                                                                    }
                                                                                ]
                                                                            },
                                                                            {
                                                                                "label": "Function Call",
                                                                                "value": "functionCall",
                                                                                "nested": [
                                                                                    {
                                                                                        "name": "functionCall",
                                                                                        "spec": [
                                                                                            {
                                                                                                "help": "The name of the function to call.",
                                                                                                "name": "name",
                                                                                                "type": "text",
                                                                                                "label": "Name",
                                                                                                "required": true,
                                                                                                "validate": {
                                                                                                    "max": 64
                                                                                                }
                                                                                            },
                                                                                            {
                                                                                                "help": "The function parameters and values in JSON object format.",
                                                                                                "name": "args",
                                                                                                "type": "json",
                                                                                                "label": "Arguments"
                                                                                            },
                                                                                            {
                                                                                                "help": "The unique ID of the function call.",
                                                                                                "name": "id",
                                                                                                "type": "text",
                                                                                                "label": "Function Call ID"
                                                                                            }
                                                                                        ],
                                                                                        "type": "collection",
                                                                                        "label": "Function Call"
                                                                                    }
                                                                                ]
                                                                            },
                                                                            {
                                                                                "label": "Function Response",
                                                                                "value": "functionResponse",
                                                                                "nested": [
                                                                                    {
                                                                                        "name": "functionResponse",
                                                                                        "spec": [
                                                                                            {
                                                                                                "help": "The name of the function to call.",
                                                                                                "name": "name",
                                                                                                "type": "text",
                                                                                                "label": "Name",
                                                                                                "required": true,
                                                                                                "validate": {
                                                                                                    "max": 64
                                                                                                }
                                                                                            },
                                                                                            {
                                                                                                "help": "The function response in JSON object format.",
                                                                                                "name": "response",
                                                                                                "type": "json",
                                                                                                "label": "Response",
                                                                                                "required": true
                                                                                            }
                                                                                        ],
                                                                                        "type": "collection",
                                                                                        "label": "Function Response"
                                                                                    }
                                                                                ]
                                                                            }
                                                                        ]
                                                                    },
                                                                    {
                                                                        "name": "thoughtSignature",
                                                                        "type": "text",
                                                                        "label": "Thought Signature"
                                                                    }
                                                                ],
                                                                "type": "array",
                                                                "label": "Parts"
                                                            }
                                                        ],
                                                        "type": "array",
                                                        "label": "Messages",
                                                        "required": true
                                                    },
                                                    {
                                                        "name": "system_instruction",
                                                        "spec": [
                                                            {
                                                                "name": "parts",
                                                                "spec": {
                                                                    "name": "value",
                                                                    "spec": [
                                                                        {
                                                                            "name": "text",
                                                                            "type": "text",
                                                                            "label": "Value"
                                                                        }
                                                                    ],
                                                                    "type": "collection",
                                                                    "label": "Prompt"
                                                                },
                                                                "type": "array",
                                                                "label": "Prompts"
                                                            }
                                                        ],
                                                        "type": "collection",
                                                        "label": "System Instructions"
                                                    },
                                                    {
                                                        "name": "safetySettings",
                                                        "spec": [
                                                            {
                                                                "name": "category",
                                                                "type": "select",
                                                                "label": "Category",
                                                                "options": [
                                                                    {
                                                                        "label": "Harassment content",
                                                                        "value": "HARM_CATEGORY_HARASSMENT"
                                                                    },
                                                                    {
                                                                        "label": "Hate speech and content",
                                                                        "value": "HARM_CATEGORY_HATE_SPEECH"
                                                                    },
                                                                    {
                                                                        "label": "Sexually explicit content.",
                                                                        "value": "HARM_CATEGORY_SEXUALLY_EXPLICIT"
                                                                    },
                                                                    {
                                                                        "label": "Dangerous content:",
                                                                        "value": "HARM_CATEGORY_DANGEROUS_CONTENT"
                                                                    }
                                                                ]
                                                            },
                                                            {
                                                                "name": "threshold",
                                                                "type": "select",
                                                                "label": "Threshold",
                                                                "options": [
                                                                    {
                                                                        "label": "Block low and above.",
                                                                        "value": "BLOCK_LOW_AND_ABOVE"
                                                                    },
                                                                    {
                                                                        "label": "Block medium and above.",
                                                                        "value": "BLOCK_MEDIUM_AND_ABOVE"
                                                                    },
                                                                    {
                                                                        "label": "Block only high.",
                                                                        "value": "BLOCK_ONLY_HIGH"
                                                                    },
                                                                    {
                                                                        "label": "Block none.",
                                                                        "value": "BLOCK_NONE"
                                                                    }
                                                                ]
                                                            }
                                                        ],
                                                        "type": "array",
                                                        "label": "Safety Settings"
                                                    },
                                                    {
                                                        "name": "generationConfig",
                                                        "spec": [
                                                            {
                                                                "name": "stopSequences",
                                                                "spec": {
                                                                    "name": "value",
                                                                    "type": "text",
                                                                    "label": "Stop Sequence"
                                                                },
                                                                "type": "array",
                                                                "label": "Stop Sequences"
                                                            },
                                                            {
                                                                "name": "responseModalities",
                                                                "type": "select",
                                                                "label": "Response Modalities",
                                                                "multiple": true,
                                                                "validate": {
                                                                    "enum": [
                                                                        "text",
                                                                        "image"
                                                                    ]
                                                                }
                                                            },
                                                            {
                                                                "name": "maxOutputTokens",
                                                                "type": "number",
                                                                "label": "Max Output Tokens"
                                                            },
                                                            {
                                                                "name": "temperature",
                                                                "type": "number",
                                                                "label": "Temperature",
                                                                "validate": {
                                                                    "max": 1,
                                                                    "min": 0
                                                                }
                                                            },
                                                            {
                                                                "name": "topP",
                                                                "type": "number",
                                                                "label": "Top P",
                                                                "validate": {
                                                                    "max": 1,
                                                                    "min": 0
                                                                }
                                                            },
                                                            {
                                                                "name": "topK",
                                                                "type": "number",
                                                                "label": "Top K"
                                                            },
                                                            {
                                                                "name": "thinkingConfig",
                                                                "spec": [
                                                                    {
                                                                        "name": "thinkingBudget",
                                                                        "type": "number",
                                                                        "label": "Thinking Budget"
                                                                    },
                                                                    {
                                                                        "name": "include_thoughts",
                                                                        "type": "boolean",
                                                                        "label": "Include Thoughts"
                                                                    },
                                                                    {
                                                                        "name": "thinking_level",
                                                                        "type": "select",
                                                                        "label": "Thinking Level",
                                                                        "validate": {
                                                                            "enum": [
                                                                                "low",
                                                                                "high"
                                                                            ]
                                                                        }
                                                                    }
                                                                ],
                                                                "type": "collection",
                                                                "label": "Thinking Config"
                                                            },
                                                            {
                                                                "name": "mediaResolution",
                                                                "type": "select",
                                                                "label": "Media Resolution",
                                                                "validate": {
                                                                    "enum": [
                                                                        "media_resolution_low",
                                                                        "media_resolution_medium",
                                                                        "media_resolution_high"
                                                                    ]
                                                                }
                                                            },
                                                            {
                                                                "name": "imageConfig",
                                                                "spec": [
                                                                    {
                                                                        "name": "imageSize",
                                                                        "type": "select",
                                                                        "label": "Image Size",
                                                                        "validate": {
                                                                            "enum": [
                                                                                "1K",
                                                                                "2K",
                                                                                "4K"
                                                                            ]
                                                                        }
                                                                    }
                                                                ],
                                                                "type": "collection",
                                                                "label": "Image Configuration"
                                                            },
                                                            {
                                                                "name": "responseMimeType",
                                                                "type": "select",
                                                                "label": "Response Format"
                                                            }
                                                        ],
                                                        "type": "collection",
                                                        "label": "Generation configurations"
                                                    },
                                                    {
                                                        "name": "tools",
                                                        "type": "any",
                                                        "label": "Tools"
                                                    },
                                                    {
                                                        "name": "tool_config",
                                                        "type": "any",
                                                        "label": "Tool Config"
                                                    },
                                                    {
                                                        "name": "function_declarations_context",
                                                        "type": "boolean",
                                                        "label": "Function Declarations Grounding"
                                                    },
                                                    {
                                                        "name": "url_context",
                                                        "type": "boolean",
                                                        "label": "URL Context"
                                                    },
                                                    {
                                                        "name": "google_search_context",
                                                        "type": "boolean",
                                                        "label": "Google Search Grounding"
                                                    },
                                                    {
                                                        "name": "code_execution",
                                                        "type": "boolean",
                                                        "label": "Code Execution"
                                                    },
                                                    {
                                                        "name": "google_maps_context",
                                                        "type": "boolean",
                                                        "label": "Google Maps Grounding"
                                                    },
                                                    {
                                                        "name": "file_search_store_context",
                                                        "type": "boolean",
                                                        "label": "File Search Store Context"
                                                    }
                                                ],
                                                "advanced": true
                                            }
                                        },
                                        {
                                            "id": 203,
                                            "module": "gemini-ai:createACompletionGeminiPro",
                                            "version": 1,
                                            "parameters": {
                                                "__IMTCONN__": 13301844
                                            },
                                            "mapper": {
                                                "model": "gemini-3-pro-preview",
                                                "contents": [
                                                    {
                                                        "role": "user",
                                                        "parts": [
                                                            {
                                                                "text": "Build the Render Spec (orders) for the downstream writer.\r\n\r\nINPUT\r\nArchitect output (raw JSON): \n{{216.result}}\n\nPerson First Name:\n{{1.`2`}}\n\r\nTASK\r\nUsing ONLY the Architect output above:\r\n- Produce the final rendered email.\r\n- Respect the causal chain:\r\n  Hook → Situation → Implication → Bridge → Contribution → Details → CTA\r\n- Do not add facts, competitors, timelines, or claims.\r\n- Do not change architecture.\r\n- Preserve Offer / Details / CTA templates.\r\n- One sentence per paragraph.\r\n- Spoken, sharp, grounded.\r\n\r\nOUTPUT\r\nReturn ONLY valid JSON in this exact shape.\r\nNo extra keys.\r\nNo derived variables.\r\nNo field remapping.\r\n\r\n",
                                                                "type": "text"
                                                            }
                                                        ]
                                                    }
                                                ],
                                                "generationConfig": {
                                                    "imageConfig": {},
                                                    "temperature": "0.2",
                                                    "stopSequences": [
                                                        ""
                                                    ],
                                                    "thinkingConfig": {
                                                        "thinkingBudget": "512"
                                                    },
                                                    "maxOutputTokens": "4096"
                                                },
                                                "system_instruction": {
                                                    "parts": [
                                                        {
                                                            "text": "SYSTEM PROMPT — CRAFTER HARMONIZER (AOS)\r\n\r\nROLE\r\nYou are AOS Crafter Harmonizer.\r\n\r\nGOAL\r\nConvert a Crafter Architect Render Spec (orders/instructions) into a final cold email that:\r\n- follows the exact section order\r\n- obeys DEEP EMAIL DNA v6 templates for Offer / Details / CTA\r\n- applies DEEP STYLE DNA v6 for voice and fluency\r\n- stays grounded in truth (no invented facts)\r\n\r\nABSOLUTE RULES\r\n1) OUTPUT ONLY JSON:\r\nReturn ONLY valid JSON that matches the exact output schema below.\r\nNo markdown. No commentary.\r\n\r\n2) FOLLOW THE RENDER SPEC:\r\nUse render_spec.sections[*].instruction, render_spec.sections[*].template, and render_spec.tokens to write each section.\r\nDo not deviate from required templates.\r\n\r\n3) NO INVENTED FACTS:\r\nOnly use what exists in the input JSON (render_spec tokens, angle facts, and any explicitly included facts).\r\nNever invent:\r\n- competitors\r\n- timelines (“in weeks/months”) unless explicitly allowed by input\r\n- statistics, adoption, performance guarantees\r\n- pre-interest (“interested beforehand”) unless explicitly allowed\r\n\r\n4) ASSUMPTIONS HANDLING:\r\nNever output “[Assumed]” anywhere in the email.\r\nIf render_spec.flags.hedging_required=true, use minimal controlled hedging in Hook/Situation/Implication/Bridge only.\r\n\r\n5) SECTION ORDER (FIXED):\r\ngreeting → hook → situation → implication → bridge → contribution → details → cta\r\n\r\n6) ONE SENTENCE PER PARAGRAPH:\r\nEvery paragraph must contain exactly one sentence.\r\nParagraphs must be separated by \"\\n\\n\".\r\nBullets are allowed, but each bullet line must be a complete single sentence.\r\n\r\n7) TEMPLATE FIDELITY (STRICT)\r\nContribution:\r\n- Line 1 (mandatory): If this makes sense, we can get you as many appointments as you want with (ICP – CONTEXT leads like X) (who are facing this situation → formatted).\r\n- Line 2: optional, ONLY if supported by inputs. If included, must be verbatim:\r\n  \"All of them interested in your offer beforehand.\"\r\n- Line 3: optional, ONLY if region/scope is defined and feasible. If included, must be verbatim:\r\n  \"And we can replicate this across the [entire operating region]/[entire scope], at scale, automatically.\"\r\n\r\nYou may decide WHETHER to include optional lines.\r\nYou may NOT rewrite them.\r\n\r\nDetails:\r\n- Must include exactly:\r\n\"We can do this by:\r\n- Finding and qualifying (ICP) at scale\n\r\n- Automating Deep Research for every Lead to find the best approach for each of them\n\r\n- Automating Deep Research for every Lead to tailor each approach\n\r\n- Writing deeply personalized and relevant emails, designed to spark real interest\n\r\n- Managing all outbound campaigns end-to-end\r\n\r\nWe'll take care of the whole process, (company name) will just have to close all the new deals.\"\r\n\r\nCTA:\r\n\"If you like the idea, I’d love to show you more details over a quick 10-minute demo.\n\r\nThere, I’ll prepare a sample of 50 leads, all with tailored messages.\n\r\nThat way, you can see the quality of our results first.\n\r\nIf you’re open to it, let me know when it’s the best time for the demo.\"\r\n\r\n8) WORD LIMIT (HOOK):\r\nHook must be ≤ 10 words.\r\nTrack hook_word_count in self_check.\r\n\r\nDEEP STYLE DNA v6 (HARMONIZER) — APPLY THESE STYLE RULES\r\n- Scope: style/voice/fluency only; do not change meaning or add facts.\r\n- Tone: peer-level, executive, direct, respectful, matter-of-fact; zero small talk; zero marketing voice.\r\n- Rhythm: short, spoken sentences; avoid multi-clause; if it needs commas, split it.\r\n- Causal flow: use simple cause→effect connectors when appropriate (“because / if / when / so”).\r\n- Specificity: keep top chain limited to 2–3 specifics; avoid catalogs and long lists.\r\n- Prohibited: corporate jargon; hype/dominance language; empty openers.\r\n- Uncertainty: if LOW certainty, minimal hedging (“it looks like / often / tends to / in many cases”), but keep punch.\r\n- Praise: optional only if a verified praise signal exists; otherwise omit.\r\n\r\nOUTPUT SCHEMA (EXACT)\r\n{\r\n  \"result\": {\r\n    \"sections\": {\r\n      \"greeting\": \"string\",\r\n      \"hook\": \"string\",\r\n      \"situation\": \"string\",\r\n      \"implication\": \"string\",\r\n      \"bridge\": \"string\",\r\n      \"contribution\": \"string\",\r\n      \"details\": \"string\",\r\n      \"cta\": \"string\"\r\n    },\r\n    \"draft_email\": \"string\",\r\n    \"self_check\": {\r\n      \"one_sentence_per_paragraph\": \"PASS|FAIL\",\r\n      \"no_new_facts\": \"PASS|FAIL\",\r\n      \"competitor_rule\": \"PASS|FAIL\",\r\n      \"time_claim_rule\": \"PASS|FAIL\",\r\n      \"never_print_assumed_tags\": \"PASS|FAIL\",\r\n      \"hook_word_count\": \"number-as-string\",\r\n      \"contribution_template_ok\": \"PASS|FAIL\",\r\n      \"details_template_ok\": \"PASS|FAIL\",\r\n      \"cta_template_ok\": \"PASS|FAIL\",\r\n      \"preinterest_rule\": \"PASS|FAIL\",\r\n      \"hedging_applied_if_required\": \"PASS|FAIL\",\r\n      \"style_dna_applied\": \"PASS|FAIL\"\r\n    },\r\n    \"warnings\": \"string\",\r\n    \"evidence_used\": \"string\"\r\n  }\r\n}\r\n\r\nASSEMBLY REQUIREMENTS\r\n- Each of sections.greeting/hook/situation/implication/bridge is exactly one sentence.\r\n- sections.contribution may contain 1–3 sentences as separate paragraphs (\"\\n\\n\") exactly as allowed by the render_spec offer template rules.\r\n- sections.details must be:\r\n  \"We can do this by:\" (one sentence)\r\n  then 3 bullet lines each as one complete sentence\r\n  then DFY closing sentence (one sentence)\r\n  Each line separated by \"\\n\\n\".\r\n- sections.cta must be exactly 4 sentences separated by \"\\n\\n\".\r\n- draft_email must concatenate all sections in order with \"\\n\\n\" between every paragraph.\r\n\r\nINPUT\r\nYou will receive a single JSON object with:\r\n- render_spec (required)\r\n- optional constraints / guardrails\r\n- optional evidence_used\r\nUse only that input.\r\n​"
                                                        }
                                                    ]
                                                }
                                            },
                                            "metadata": {
                                                "designer": {
                                                    "x": 4069,
                                                    "y": -10,
                                                    "name": "Crafter Harmonizer (3proPrev) Lucas-2"
                                                },
                                                "restore": {
                                                    "expect": {
                                                        "model": {
                                                            "mode": "chose",
                                                            "label": "gemini-3-pro-preview"
                                                        },
                                                        "contents": {
                                                            "mode": "chose",
                                                            "items": [
                                                                {
                                                                    "role": {
                                                                        "mode": "chose",
                                                                        "label": "User"
                                                                    },
                                                                    "parts": {
                                                                        "mode": "chose",
                                                                        "items": [
                                                                            {
                                                                                "type": {
                                                                                    "mode": "chose",
                                                                                    "label": "Text"
                                                                                }
                                                                            }
                                                                        ]
                                                                    }
                                                                }
                                                            ]
                                                        },
                                                        "url_context": {
                                                            "mode": "chose"
                                                        },
                                                        "code_execution": {
                                                            "mode": "chose"
                                                        },
                                                        "safetySettings": {
                                                            "mode": "chose"
                                                        },
                                                        "generationConfig": {
                                                            "nested": {
                                                                "imageConfig": {
                                                                    "nested": {
                                                                        "imageSize": {
                                                                            "mode": "chose",
                                                                            "label": "Empty"
                                                                        }
                                                                    }
                                                                },
                                                                "stopSequences": {
                                                                    "mode": "chose",
                                                                    "items": [
                                                                        null
                                                                    ],
                                                                    "collapsed": true
                                                                },
                                                                "thinkingConfig": {
                                                                    "nested": {
                                                                        "thinking_level": {
                                                                            "mode": "chose",
                                                                            "label": "Empty"
                                                                        },
                                                                        "include_thoughts": {
                                                                            "mode": "chose"
                                                                        }
                                                                    }
                                                                },
                                                                "mediaResolution": {
                                                                    "mode": "chose",
                                                                    "label": "Empty"
                                                                },
                                                                "responseMimeType": {
                                                                    "mode": "chose",
                                                                    "label": "Empty"
                                                                },
                                                                "responseModalities": {
                                                                    "mode": "chose"
                                                                }
                                                            }
                                                        },
                                                        "system_instruction": {
                                                            "nested": {
                                                                "parts": {
                                                                    "mode": "chose",
                                                                    "items": [
                                                                        null
                                                                    ]
                                                                }
                                                            }
                                                        },
                                                        "google_maps_context": {
                                                            "mode": "chose"
                                                        },
                                                        "google_search_context": {
                                                            "mode": "chose"
                                                        },
                                                        "file_search_store_context": {
                                                            "mode": "chose"
                                                        },
                                                        "function_declarations_context": {
                                                            "mode": "chose"
                                                        }
                                                    },
                                                    "parameters": {
                                                        "__IMTCONN__": {
                                                            "data": {
                                                                "scoped": "true",
                                                                "connection": "gemini-ai-q9zyjp"
                                                            },
                                                            "label": "GeminiConnection_AOS_2"
                                                        }
                                                    }
                                                },
                                                "parameters": [
                                                    {
                                                        "name": "__IMTCONN__",
                                                        "type": "account:gemini-ai-q9zyjp",
                                                        "label": "Connection",
                                                        "required": true
                                                    }
                                                ],
                                                "expect": [
                                                    {
                                                        "name": "model",
                                                        "type": "select",
                                                        "label": "AI Model",
                                                        "required": true
                                                    },
                                                    {
                                                        "name": "contents",
                                                        "spec": [
                                                            {
                                                                "name": "role",
                                                                "type": "select",
                                                                "label": "Role",
                                                                "options": [
                                                                    {
                                                                        "label": "User",
                                                                        "value": "user"
                                                                    },
                                                                    {
                                                                        "label": "Model",
                                                                        "value": "model"
                                                                    }
                                                                ]
                                                            },
                                                            {
                                                                "name": "parts",
                                                                "spec": [
                                                                    {
                                                                        "name": "type",
                                                                        "type": "select",
                                                                        "label": "Message Type",
                                                                        "options": [
                                                                            {
                                                                                "label": "Text",
                                                                                "value": "text",
                                                                                "nested": [
                                                                                    {
                                                                                        "name": "text",
                                                                                        "type": "text",
                                                                                        "label": "Text",
                                                                                        "required": false
                                                                                    }
                                                                                ]
                                                                            },
                                                                            {
                                                                                "label": "File",
                                                                                "value": "file",
                                                                                "nested": [
                                                                                    {
                                                                                        "name": "file_data",
                                                                                        "spec": [
                                                                                            {
                                                                                                "name": "mime_type",
                                                                                                "type": "text",
                                                                                                "label": "Mime Type",
                                                                                                "required": false
                                                                                            },
                                                                                            {
                                                                                                "help": "You get this from the 'Upload a File' module.",
                                                                                                "name": "file_uri",
                                                                                                "type": "text",
                                                                                                "label": "File URI",
                                                                                                "required": false
                                                                                            }
                                                                                        ],
                                                                                        "type": "collection",
                                                                                        "label": "File Data",
                                                                                        "required": false
                                                                                    }
                                                                                ]
                                                                            },
                                                                            {
                                                                                "label": "Function Call",
                                                                                "value": "functionCall",
                                                                                "nested": [
                                                                                    {
                                                                                        "name": "functionCall",
                                                                                        "spec": [
                                                                                            {
                                                                                                "help": "The name of the function to call.",
                                                                                                "name": "name",
                                                                                                "type": "text",
                                                                                                "label": "Name",
                                                                                                "required": true,
                                                                                                "validate": {
                                                                                                    "max": 64
                                                                                                }
                                                                                            },
                                                                                            {
                                                                                                "help": "The function parameters and values in JSON object format.",
                                                                                                "name": "args",
                                                                                                "type": "json",
                                                                                                "label": "Arguments"
                                                                                            },
                                                                                            {
                                                                                                "help": "The unique ID of the function call.",
                                                                                                "name": "id",
                                                                                                "type": "text",
                                                                                                "label": "Function Call ID"
                                                                                            }
                                                                                        ],
                                                                                        "type": "collection",
                                                                                        "label": "Function Call"
                                                                                    }
                                                                                ]
                                                                            },
                                                                            {
                                                                                "label": "Function Response",
                                                                                "value": "functionResponse",
                                                                                "nested": [
                                                                                    {
                                                                                        "name": "functionResponse",
                                                                                        "spec": [
                                                                                            {
                                                                                                "help": "The name of the function to call.",
                                                                                                "name": "name",
                                                                                                "type": "text",
                                                                                                "label": "Name",
                                                                                                "required": true,
                                                                                                "validate": {
                                                                                                    "max": 64
                                                                                                }
                                                                                            },
                                                                                            {
                                                                                                "help": "The function response in JSON object format.",
                                                                                                "name": "response",
                                                                                                "type": "json",
                                                                                                "label": "Response",
                                                                                                "required": true
                                                                                            }
                                                                                        ],
                                                                                        "type": "collection",
                                                                                        "label": "Function Response"
                                                                                    }
                                                                                ]
                                                                            }
                                                                        ]
                                                                    },
                                                                    {
                                                                        "name": "thoughtSignature",
                                                                        "type": "text",
                                                                        "label": "Thought Signature"
                                                                    }
                                                                ],
                                                                "type": "array",
                                                                "label": "Parts"
                                                            }
                                                        ],
                                                        "type": "array",
                                                        "label": "Messages",
                                                        "required": true
                                                    },
                                                    {
                                                        "name": "system_instruction",
                                                        "spec": [
                                                            {
                                                                "name": "parts",
                                                                "spec": {
                                                                    "name": "value",
                                                                    "spec": [
                                                                        {
                                                                            "name": "text",
                                                                            "type": "text",
                                                                            "label": "Value"
                                                                        }
                                                                    ],
                                                                    "type": "collection",
                                                                    "label": "Prompt"
                                                                },
                                                                "type": "array",
                                                                "label": "Prompts"
                                                            }
                                                        ],
                                                        "type": "collection",
                                                        "label": "System Instructions"
                                                    },
                                                    {
                                                        "name": "safetySettings",
                                                        "spec": [
                                                            {
                                                                "name": "category",
                                                                "type": "select",
                                                                "label": "Category",
                                                                "options": [
                                                                    {
                                                                        "label": "Harassment content",
                                                                        "value": "HARM_CATEGORY_HARASSMENT"
                                                                    },
                                                                    {
                                                                        "label": "Hate speech and content",
                                                                        "value": "HARM_CATEGORY_HATE_SPEECH"
                                                                    },
                                                                    {
                                                                        "label": "Sexually explicit content.",
                                                                        "value": "HARM_CATEGORY_SEXUALLY_EXPLICIT"
                                                                    },
                                                                    {
                                                                        "label": "Dangerous content:",
                                                                        "value": "HARM_CATEGORY_DANGEROUS_CONTENT"
                                                                    }
                                                                ]
                                                            },
                                                            {
                                                                "name": "threshold",
                                                                "type": "select",
                                                                "label": "Threshold",
                                                                "options": [
                                                                    {
                                                                        "label": "Block low and above.",
                                                                        "value": "BLOCK_LOW_AND_ABOVE"
                                                                    },
                                                                    {
                                                                        "label": "Block medium and above.",
                                                                        "value": "BLOCK_MEDIUM_AND_ABOVE"
                                                                    },
                                                                    {
                                                                        "label": "Block only high.",
                                                                        "value": "BLOCK_ONLY_HIGH"
                                                                    },
                                                                    {
                                                                        "label": "Block none.",
                                                                        "value": "BLOCK_NONE"
                                                                    }
                                                                ]
                                                            }
                                                        ],
                                                        "type": "array",
                                                        "label": "Safety Settings"
                                                    },
                                                    {
                                                        "name": "generationConfig",
                                                        "spec": [
                                                            {
                                                                "name": "stopSequences",
                                                                "spec": {
                                                                    "name": "value",
                                                                    "type": "text",
                                                                    "label": "Stop Sequence"
                                                                },
                                                                "type": "array",
                                                                "label": "Stop Sequences"
                                                            },
                                                            {
                                                                "name": "responseModalities",
                                                                "type": "select",
                                                                "label": "Response Modalities",
                                                                "multiple": true,
                                                                "validate": {
                                                                    "enum": [
                                                                        "text",
                                                                        "image"
                                                                    ]
                                                                }
                                                            },
                                                            {
                                                                "name": "maxOutputTokens",
                                                                "type": "number",
                                                                "label": "Max Output Tokens"
                                                            },
                                                            {
                                                                "name": "temperature",
                                                                "type": "number",
                                                                "label": "Temperature",
                                                                "validate": {
                                                                    "max": 1,
                                                                    "min": 0
                                                                }
                                                            },
                                                            {
                                                                "name": "topP",
                                                                "type": "number",
                                                                "label": "Top P",
                                                                "validate": {
                                                                    "max": 1,
                                                                    "min": 0
                                                                }
                                                            },
                                                            {
                                                                "name": "topK",
                                                                "type": "number",
                                                                "label": "Top K"
                                                            },
                                                            {
                                                                "name": "thinkingConfig",
                                                                "spec": [
                                                                    {
                                                                        "name": "thinkingBudget",
                                                                        "type": "number",
                                                                        "label": "Thinking Budget"
                                                                    },
                                                                    {
                                                                        "name": "include_thoughts",
                                                                        "type": "boolean",
                                                                        "label": "Include Thoughts"
                                                                    },
                                                                    {
                                                                        "name": "thinking_level",
                                                                        "type": "select",
                                                                        "label": "Thinking Level",
                                                                        "validate": {
                                                                            "enum": [
                                                                                "low",
                                                                                "high"
                                                                            ]
                                                                        }
                                                                    }
                                                                ],
                                                                "type": "collection",
                                                                "label": "Thinking Config"
                                                            },
                                                            {
                                                                "name": "mediaResolution",
                                                                "type": "select",
                                                                "label": "Media Resolution",
                                                                "validate": {
                                                                    "enum": [
                                                                        "media_resolution_low",
                                                                        "media_resolution_medium",
                                                                        "media_resolution_high"
                                                                    ]
                                                                }
                                                            },
                                                            {
                                                                "name": "imageConfig",
                                                                "spec": [
                                                                    {
                                                                        "name": "imageSize",
                                                                        "type": "select",
                                                                        "label": "Image Size",
                                                                        "validate": {
                                                                            "enum": [
                                                                                "1K",
                                                                                "2K",
                                                                                "4K"
                                                                            ]
                                                                        }
                                                                    }
                                                                ],
                                                                "type": "collection",
                                                                "label": "Image Configuration"
                                                            },
                                                            {
                                                                "name": "responseMimeType",
                                                                "type": "select",
                                                                "label": "Response Format"
                                                            }
                                                        ],
                                                        "type": "collection",
                                                        "label": "Generation configurations"
                                                    },
                                                    {
                                                        "name": "tools",
                                                        "type": "any",
                                                        "label": "Tools"
                                                    },
                                                    {
                                                        "name": "tool_config",
                                                        "type": "any",
                                                        "label": "Tool Config"
                                                    },
                                                    {
                                                        "name": "function_declarations_context",
                                                        "type": "boolean",
                                                        "label": "Function Declarations Grounding"
                                                    },
                                                    {
                                                        "name": "url_context",
                                                        "type": "boolean",
                                                        "label": "URL Context"
                                                    },
                                                    {
                                                        "name": "google_search_context",
                                                        "type": "boolean",
                                                        "label": "Google Search Grounding"
                                                    },
                                                    {
                                                        "name": "code_execution",
                                                        "type": "boolean",
                                                        "label": "Code Execution"
                                                    },
                                                    {
                                                        "name": "google_maps_context",
                                                        "type": "boolean",
                                                        "label": "Google Maps Grounding"
                                                    },
                                                    {
                                                        "name": "file_search_store_context",
                                                        "type": "boolean",
                                                        "label": "File Search Store Context"
                                                    }
                                                ],
                                                "advanced": true
                                            }
                                        },
                                        {
                                            "id": 211,
                                            "module": "gemini-ai:createACompletionGeminiPro",
                                            "version": 1,
                                            "parameters": {
                                                "__IMTCONN__": 13301844
                                            },
                                            "mapper": {
                                                "model": "gemini-3-pro-preview",
                                                "contents": [
                                                    {
                                                        "role": "user",
                                                        "parts": [
                                                            {
                                                                "text": "Build the Render Spec (orders) for the downstream writer using the input JSON below.\r\nReturn ONLY valid JSON matching the exact output schema.\r\n\r\nLEAD\r\nlead_id: {{1.`0`}}\r\nfirst_name: {{1.`2`}}\r\ncompany_name: {{1.`16`}}\r\ncontact_title: {{1.`4`}}\r\nlanguage: english\r\nregion (infer from chosen business line): {{189.result}}\r\n\r\nMODULE OUTPUTS (raw JSON)\r\nBASE ANGLE (angle-like):\r\n{{199.result}} \n\nANGLE SYNTHESIZER (angle-like objects):\r\n{{196.result}}\r\n\r\nANGLE CHECKER (decision):\r\n{{197.result}}\r\n\r\nBASE CONTRIBUTION (raw JSON):\r\n{{189.result.base_contribution}}\r\n\r\nHUMAN CONTEXT (raw JSON): \n{{184.result}}\n\r\nCONSTRAINTS (raw JSON):\r\n{\r\n  \"constraints\": {\r\n    \"one_sentence_per_paragraph\": true,\r\n    \"no_invented_facts\": true,\r\n    \"no_competitor_invention\": true,\r\n    \"no_time_claims_unless_in_inputs\": true,\r\n    \"hook_max_words\": 15,\r\n    \"hook_target_words\": 10,\r\n    \"never_print_assumed_tags\": true,\r\n    \"uncertainty_language_policy\": \"ALLOW_HEDGING_IF_LOW_CERTAINTY\"\r\n  }\r\n}\r\n\r\nPROMISE GUARDRAILS (raw JSON):\r\n{\r\n  \"promise_guardrails\": {\r\n    \"volume_claim_policy\": \"Do not claim 'thousands per day' or any specific volume unless explicitly supported by inputs.\",\r\n    \"allowed_soft_claim\": \"as many as you want within your ICP’s available volume\",\r\n    \"pre_interest_claim_allowed\": false\r\n  }\r\n}\r\n\r\nDNA v6 (architecture only):\r\nenabled: true\r\n\r\nINTERNAL SELECTION RULES (must follow strictly)\r\n1) Parse objects:\r\n- base_angle := BASE ANGLE input above (angle-like fallback)\r\n- identity_angle := angle_synthesizer.angle_identity\r\n- angle_1 := angle_synthesizer.angle_1\r\n- angle_2 := angle_synthesizer.angle_2\r\n- decision := ANGLE CHECKER decision above\r\n  (decision.selected_mode, decision.selected_angle_key, decision.selected_angle_id)\r\n\r\n2) Select primary angle object:\r\n- If decision.selected_mode == \"ANGLE\":\r\n    selected_angle := object referenced by decision.selected_angle_key (\"angle_1\" or \"angle_2\")\r\n  Else:\r\n    selected_angle := base_angle\r\n\r\n3) Identity angle usage:\r\n- identity_angle may be used ONLY as optional tone/identity framing guidance.\r\n- identity_angle must NEVER be used as the primary problem frame.\r\n\r\n4) Hedging policy:\r\n- hedging_required := true if selected_angle.scores.confidence exists AND selected_angle.scores.confidence < 7\r\n- If selected_angle has no scores.confidence, set hedging_required=true (be conservative).\r\n- If hedging_required, instruct cautious language in Hook/Situation/Implication/Bridge.\r\n- Never print “[Assumed]” tags downstream.\r\n\r\n5) Grounding policy (critical):\r\n- Situation section must be built ONLY from selected_angle.situation_facts (literal, concrete facts; max 2 facts).\r\n- Implication section must be built ONLY from selected_angle.implication_outcomes (max 1 outcome).\r\n- Hook must be derived from the implication (pain/dream punch), without adding new facts.\r\n- Bridge MUST paint end-state (the flip of implication) using selected_angle.bridge_support.end_state.\r\n  If bridge_support is missing, derive the end-state only from selected_angle.orbit_application outcome, but keep it generic and cautious.\r\n- Bridge must NOT mention AOS/tools/how-to.\r\n\r\n6) Offer + Details + CTA (DNA v6 template enforcement):\r\n- Contribution must use DNA v6 offer template lines, filled with:\r\n  - ICP phrase (from base_contribution.icp_targeting_statement + selected_angle.orbit_application)\r\n  - situation context (short, factual; no new facts)\r\n  - regional replication only if base_contribution explicitly supports region scope\r\n  - pre-interest line only if promise_guardrails.pre_interest_claim_allowed == true\r\n- Details must use DNA v6 details template lines (no tool lists, no tactics, no invented volume claims).\r\n- CTA must use DNA v6 CTA template lines exactly (10-min demo + sample of 50 leads + soft availability ask).\r\n\r\n7) Competitors and time claims:\r\n- Only allow competitor mention if competitor name appears explicitly in selected_angle.situation_facts OR selected_angle.evidence_pack snippets.\r\n- Only allow timeframes if explicitly present in selected_angle.situation_facts OR selected_angle.evidence_pack snippets.\r\n\r\nNow produce the Render Spec JSON (orders) for Crafter Harmonizer using DNA v6 architecture only.\r\nReturn ONLY valid JSON matching the exact output schema below.\r\n\r\nOUTPUT REQUIREMENTS\r\n- Output MUST be exactly one JSON object that matches the required output format.\r\n- Do NOT wrap the output in code fences (```).\r\n- Do NOT output anything except the JSON object.\n\n{\r\n  \"architecture_mode\": \"ANGLE|BASE_ONLY\",\r\n  \"selected_angle_meta\": {\r\n    \"selected_angle_key\": \"angle_1|angle_2|base_angle\",\r\n    \"selected_angle_id\": \"string\",\r\n    \"angle_type\": \"identity|threat|opportunity|internal_pain|unknown\",\r\n    \"certainty_level\": \"HIGH|MEDIUM|LOW\",\r\n    \"hedging_required\": true\r\n  },\r\n  \"hook\": {\r\n    \"instruction\": \"Write 1 short punch sentence (<=15 words) derived ONLY from the implication cost/dream. No AOS mention.\",\r\n    \"allowed_content_tokens\": [\"string\"]\r\n  },\r\n  \"situation\": {\r\n    \"instruction\": \"Write 1–2 literal factual sentences using ONLY selected_angle.situation_facts. No interpretation.\",\r\n    \"facts_to_use\": [\"string\"],\r\n    \"signal_ids_used\": [\"string\"]\r\n  },\r\n  \"implication\": {\r\n    \"instruction\": \"Write 1 sentence stating the consequence for the lead (no solution). Use ONLY 1 implication_outcome.\",\r\n    \"implication_to_use\": \"string\"\r\n  },\r\n  \"bridge\": {\r\n    \"instruction\": \"Write 1 sentence painting the end-state flip. No method, no AOS/tools. Prefer 'If you could…'.\",\r\n    \"end_state_to_use\": \"string\",\r\n    \"solution_mechanism_hint\": \"string\",\r\n    \"implied_requirement\": \"string\"\r\n  },\r\n  \"contribution\": {\r\n    \"dna_v6_offer_lines\": {\r\n      \"line_1\": \"If this makes sense, we can get you as many appointments as you want with {ICP_phrase} who are facing {situation_context}.\",\r\n      \"line_2\": null,\r\n      \"line_3\": null\r\n    },\r\n    \"fill_tokens\": {\r\n      \"ICP_phrase\": \"string\",\r\n      \"situation_context\": \"string\",\r\n      \"region_scope\": \"string\",\r\n      \"pre_interest_allowed\": false,\r\n      \"volume_claim_policy\": \"string\"\r\n    }\r\n  },\r\n  \"mechanism_bridge\": {\r\n    \"enabled\": false,\r\n    \"transition_sentence\": null\r\n  },\r\n  \"details\": {\r\n    \"dna_v6_details_lines\": [\r\n      \"We can do this by sourcing {ICP_phrase} at scale.\",\r\n      \"Writing deeply personalized and highly relevant emails designed to spark real interest.\",\r\n      \"Handling the entire outbound process end-to-end at scale while rigorously making sure emails land in the primary inbox.\",\r\n      \"We'll take care of the whole process — {company_name} will just have to close all the new deals.\"\r\n    ],\r\n    \"fill_tokens\": {\r\n      \"ICP_phrase\": \"string\",\r\n      \"company_name\": \"string\"\r\n    }\r\n  },\r\n  \"cta\": {\r\n    \"dna_v6_cta_lines\": [\r\n      \"If you like the idea, I’d love to show you more details over a quick 10-minute demo.\",\r\n      \"There, I’ll prepare a sample of 50 leads, all with tailored messages.\",\r\n      \"That way, you can see the quality of our results first.\",\r\n      \"If you’re open to it, let me know when it’s the best time for the demo.\"\r\n    ]\r\n  },\r\n  \"compliance_checks\": {\r\n    \"no_new_facts\": true,\r\n    \"inside_base_contribution\": true,\r\n    \"no_competitor_invention\": true,\r\n    \"no_time_claims_unless_in_inputs\": true,\r\n    \"never_print_assumed_tags\": true\r\n  }\r\n}\r\n",
                                                                "type": "text"
                                                            }
                                                        ]
                                                    }
                                                ],
                                                "generationConfig": {
                                                    "imageConfig": {},
                                                    "temperature": "0.2",
                                                    "stopSequences": [
                                                        ""
                                                    ],
                                                    "thinkingConfig": {
                                                        "thinkingBudget": "512"
                                                    },
                                                    "maxOutputTokens": "4096"
                                                },
                                                "system_instruction": {
                                                    "parts": [
                                                        {
                                                            "text": "ROLE\r\nYou are AOS Crafter Architect (INSTRUCTIONS ONLY).\r\n\r\nGOAL\r\nGiven a selected Angle + Base Contribution + Human Context + constraints, output a Render Spec (orders) that tells a downstream writer (Crafter Harmonizer) exactly how to write each email section using DEEP EMAIL DNA v6 (ARCHITECTURE ONLY).\r\n\r\nABSOLUTE RULES\r\n1) OUTPUT ONLY JSON: Return only valid JSON that matches the exact output schema; no markdown, no commentary.\r\n2) INSTRUCTIONS ONLY: Do NOT output a finished email, and do NOT output full final section sentences.\r\n   You MAY output short tokens/phrases (ICP phrase, region scope, situation phrase) needed to fill templates.\r\n3) TRUTH: No invented facts. Use only what exists in inputs.\r\n4) COMPETITORS: Only mention competitors if explicitly in inputs; otherwise do not allow competitor mentions.\r\n5) TIME CLAIMS: Only allow time claims if explicitly in inputs.\r\n6) SIGNAL GROUNDING: Situation must be literal and concrete; forbid abstract summaries.\r\n7) UNCERTAINTY:\r\n   - Angle may include certainty and assumption_notes.\r\n   - Never print \"[Assumed]\" tags in downstream email.\r\n   - If certainty is LOW, set flags.hedging_required=true and instruct cautious language in Hook/Situation/Implication/Bridge.\r\n8) Mechanism bridge:\r\n   - If selected_angle includes mechanism_bridge.transition_sentence, pass it through as the Mechanism_Bridge section (verbatim).\r\n   - Otherwise omit Mechanism_Bridge.\r\n9) TEMPLATE ENFORCEMENT:\r\n   Contribution must use DNA v6 offer template lines.\r\n   Details must use DNA v6 details template lines.\r\n   CTA must use DNA v6 CTA template lines.\r\n   Pre-interest line is allowed ONLY if input says pre_interest_claim_allowed=true.\r\n\r\nDEEP EMAIL DNA v6 (ARCHITECTURE ONLY)\r\nHook → Situation → Implication → Bridge → Contribution → Details → CTA\r\n(Use the v6 rules as constraints; do not rewrite them.)\r\n\r\n{\r\nDEEP EMAIL DNA v6\r\n(ARCHITECTURE ONLY)\r\n\r\nPurpose\r\nGenerate a cold email that feels spoken, sharp, and grounded in reality.\r\nThe email must read like a single causal chain:\r\nHook → Situation → Implication → Bridge → Contribution → Details → CTA\r\n\r\nNo fluff.\r\nNo abstraction.\r\nNo invented facts.\r\n\r\nGlobal Rules\r\nTruth and Grounding\r\nNo invented facts.\r\n\r\nOnly use what exists in inputs (signals, angle, business/human context, base contribution).\r\n\r\nNo competitor invention. Competitor names only if explicitly provided.\r\n\r\nNo time claims unless provided.\r\n\r\nDo not add “in weeks/months” unless inputs contain that timeline.\r\n\r\nNo abstraction for signals.\r\n\r\nIf a signal exists, state it as a concrete event or fact.\r\n\r\nDo not compress into interpretations (e.g., “competitors are aggressive”).\r\n\r\nSection Definitions and Requirements\r\n\r\n1) HOOK\r\nDefinition\r\nThe opening punch sentence.\r\n\r\nJob\r\nStop attention immediately by stating the pain, threat, risk, or dream state.\r\n\r\nRules\r\nMust be one short sentence\r\n\r\nMust be pain-forward or dream-forward, not a summary\r\n\r\nMust connect to something AOS can solve later (logically)\r\n\r\nMust not pitch or mention AOS/tools\r\n\r\nOften ends with something like:\r\n “…if you don’t do something.”\r\n\r\n~10 words (maximum 15)\r\n\r\nRules for the Prompt Process\r\nMust use the angle implication and turn it into a punch phrase\r\n\r\nMust Avoid\r\nGeneric openers (“Hope you’re well”)\r\n\r\nAbstract phrasing (“The market is competitive”)\r\n\r\nSoftening language (“might,” “perhaps”), unless inputs are uncertain\r\n\r\n2) SITUATION (Signal / Event / Suceso)\r\nDefinition\r\nThe real-world fact that makes the hook true.\r\n\r\nJob\r\nGround the hook in reality so it feels factual, not speculative.\r\n\r\nRules\r\nMust be concrete and observable\r\n\r\nInternal web\r\n\r\nLinkedIn signal\r\n\r\nExternal web signal\r\n\r\nMust be stated literally, not interpreted\r\n\r\nComes immediately after the Hook\r\n\r\nRules for the Prompt Process\r\nMust use angle details content\r\n\r\nSynthesize to maximize the Implication\r\n\r\nMust Avoid\r\nVague claims (“they’re scaling fast”) without a specific signal\r\n\r\nInvented stats or adoption claims\r\n\r\n3) IMPLICATION\r\nDefinition\r\nThe consequence of the situation for the lead.\r\n\r\nJob\r\nMake the cost of inaction unavoidable and personal to their role.\r\n\r\nRules\r\nIf angle is Threat → implication must be loss / risk / erosion\r\n\r\nIf angle is Opportunity → implication must be missed capture / closing window\r\n\r\nIf angle is Pain Point → implication must be missed opportunities\r\n\r\nMust clearly show why inaction is costly\r\n\r\nMust not propose a solution yet\r\n\r\nMust Avoid\r\nBroad business philosophy\r\n\r\nLong-term, vague consequences\r\n\r\n4) BRIDGE\r\nDefinition\r\nThe flip from problem → controllable outcome.\r\n\r\nJob\r\nMake the resolution feel obvious and logical, without pitching.\r\n\r\nRules\r\nDescribes the end result of the solution, not the solution itself\r\n\r\nUses the applied contribution solution to generate the end-state\r\n\r\nMust imply resolution as an outcome, not a method\r\n\r\nMust not mention AOS, tools, or execution details\r\n\r\nMust connect naturally from the implication\r\n\r\nMust set up an implied requirement\r\n (e.g., “to get this outcome, they need X access/positioning”)\r\n\r\nOften starts with:\r\n “If you could…”\r\n\r\nMust Avoid\r\nHow-to explanations\r\n\r\nTactical steps\r\n\r\n5) CONTRIBUTION (Offer)\r\nDefinition\r\nThe Offer Phrase block: a short, spoken promise framed as “why this makes sense.”\r\n\r\nJob\r\nMake the reader think:\r\n “That is exactly what I need.”\r\n While staying inside the base contribution ceiling.\r\n\r\nMandatory Template Structure\r\nLine 1 (mandatory):\r\n If this makes sense, we can get you as many appointments as you want with (ICP – CONTEXT leads like X) (who are facing this situation → formatted),\r\n\r\nLine 2 (optional — only if supported by inputs):\r\n (All of them interested in your offer beforehand.)\r\n\r\nLine 3 (optional — only if region/scope is defined and feasible):\r\n (And we can replicate this across the entire operating region, at scale, automatically.)\r\n\r\nRules\r\nMust stay inside the base contribution ceiling\r\n\r\nMust clearly fulfill the Bridge’s implied outcome\r\n\r\nBridge suggests a specific outcome\r\n\r\nContribution must subsume that outcome\r\n\r\nNo guarantees of closing or winning specific clients\r\n\r\nMust not claim pre-interest unless explicitly supported\r\n\r\nMust Avoid\r\nNarrowing the base contribution beyond scope\r\n\r\nAdding extra promises\r\n\r\n6) DETAILS\r\nDefinition\r\nA short capability proof explaining why the Contribution is achievable and done-for-you, without revealing the playbook.\r\n\r\nJob\r\nReduce skepticism while keeping execution hidden.\r\n\r\nMandatory Template\r\nWe can do this by:\r\nSourcing (ICP) at scale\r\n\r\nWriting deeply personalized and relevant emails, designed to spark real interest\r\n\r\nManaging all outbound campaigns end-to-end\r\n\r\nWe'll take care of the whole process — (company name) will just have to close all the new deals.\r\n\r\nMandatory Content Requirements\r\nLead sourcing:\r\n\r\nDescribe what leads will be sourced\r\n\r\nMust align with base + applied contribution\r\n\r\nDeep personalization:\r\n\r\nEnriched\r\n\r\nVerified\r\n\r\nDeeply personalized\r\n\r\nOne-to-one tone\r\n\r\nEnd-to-end management:\r\n\r\nFully done-for-you execution\r\n\r\nFinal sentence must explicitly state DFY (done-for-you).\r\n\r\nMust Avoid\r\nTactical sequences or tool lists\r\n\r\nUnrealistic city-specific volumes\r\n\r\nRepeating competitor narratives across bullets\r\n\r\n7) CTA\r\nDefinition\r\nSoft invitation to the next step.\r\n\r\nJob\r\nMake booking feel easy and risk-free.\r\n\r\nMandatory Template\r\nIf you like the idea, I’d love to show you more details over a quick 10-minute demo.\r\nThere, I’ll prepare a sample of 50 leads, all with tailored messages.\r\nThat way, you can see the quality of our results first.\r\nIf you’re open to it, let me know when it’s the best time for the demo.\r\n\r\nRules\r\nShort demo (~10 minutes)\r\n\r\nRisk-free sample of 50 leads with personalized emails\r\n\r\nSoft ask for availability\r\n\r\nNo urgency or scarcity language\r\n}\r\n\r\nOUTPUT\r\nReturn the Render Spec JSON only.\r\n​"
                                                        }
                                                    ]
                                                }
                                            },
                                            "metadata": {
                                                "designer": {
                                                    "x": 4575,
                                                    "y": -12,
                                                    "name": "Crafter Architect (3proPrev) Ale-2"
                                                },
                                                "restore": {
                                                    "expect": {
                                                        "model": {
                                                            "mode": "chose",
                                                            "label": "gemini-3-pro-preview"
                                                        },
                                                        "contents": {
                                                            "mode": "chose",
                                                            "items": [
                                                                {
                                                                    "role": {
                                                                        "mode": "chose",
                                                                        "label": "User"
                                                                    },
                                                                    "parts": {
                                                                        "mode": "chose",
                                                                        "items": [
                                                                            {
                                                                                "type": {
                                                                                    "mode": "chose",
                                                                                    "label": "Text"
                                                                                }
                                                                            }
                                                                        ]
                                                                    }
                                                                }
                                                            ]
                                                        },
                                                        "url_context": {
                                                            "mode": "chose"
                                                        },
                                                        "code_execution": {
                                                            "mode": "chose"
                                                        },
                                                        "safetySettings": {
                                                            "mode": "chose"
                                                        },
                                                        "generationConfig": {
                                                            "nested": {
                                                                "imageConfig": {
                                                                    "nested": {
                                                                        "imageSize": {
                                                                            "mode": "chose",
                                                                            "label": "Empty"
                                                                        }
                                                                    }
                                                                },
                                                                "stopSequences": {
                                                                    "mode": "chose",
                                                                    "items": [
                                                                        null
                                                                    ],
                                                                    "collapsed": true
                                                                },
                                                                "thinkingConfig": {
                                                                    "nested": {
                                                                        "thinking_level": {
                                                                            "mode": "chose",
                                                                            "label": "Empty"
                                                                        },
                                                                        "include_thoughts": {
                                                                            "mode": "chose"
                                                                        }
                                                                    }
                                                                },
                                                                "mediaResolution": {
                                                                    "mode": "chose",
                                                                    "label": "Empty"
                                                                },
                                                                "responseMimeType": {
                                                                    "mode": "chose",
                                                                    "label": "Empty"
                                                                },
                                                                "responseModalities": {
                                                                    "mode": "chose"
                                                                }
                                                            }
                                                        },
                                                        "system_instruction": {
                                                            "nested": {
                                                                "parts": {
                                                                    "mode": "chose",
                                                                    "items": [
                                                                        null
                                                                    ]
                                                                }
                                                            }
                                                        },
                                                        "google_maps_context": {
                                                            "mode": "chose"
                                                        },
                                                        "google_search_context": {
                                                            "mode": "chose"
                                                        },
                                                        "file_search_store_context": {
                                                            "mode": "chose"
                                                        },
                                                        "function_declarations_context": {
                                                            "mode": "chose"
                                                        }
                                                    },
                                                    "parameters": {
                                                        "__IMTCONN__": {
                                                            "data": {
                                                                "scoped": "true",
                                                                "connection": "gemini-ai-q9zyjp"
                                                            },
                                                            "label": "GeminiConnection_AOS_2"
                                                        }
                                                    }
                                                },
                                                "parameters": [
                                                    {
                                                        "name": "__IMTCONN__",
                                                        "type": "account:gemini-ai-q9zyjp",
                                                        "label": "Connection",
                                                        "required": true
                                                    }
                                                ],
                                                "expect": [
                                                    {
                                                        "name": "model",
                                                        "type": "select",
                                                        "label": "AI Model",
                                                        "required": true
                                                    },
                                                    {
                                                        "name": "contents",
                                                        "spec": [
                                                            {
                                                                "name": "role",
                                                                "type": "select",
                                                                "label": "Role",
                                                                "options": [
                                                                    {
                                                                        "label": "User",
                                                                        "value": "user"
                                                                    },
                                                                    {
                                                                        "label": "Model",
                                                                        "value": "model"
                                                                    }
                                                                ]
                                                            },
                                                            {
                                                                "name": "parts",
                                                                "spec": [
                                                                    {
                                                                        "name": "type",
                                                                        "type": "select",
                                                                        "label": "Message Type",
                                                                        "options": [
                                                                            {
                                                                                "label": "Text",
                                                                                "value": "text",
                                                                                "nested": [
                                                                                    {
                                                                                        "name": "text",
                                                                                        "type": "text",
                                                                                        "label": "Text",
                                                                                        "required": false
                                                                                    }
                                                                                ]
                                                                            },
                                                                            {
                                                                                "label": "File",
                                                                                "value": "file",
                                                                                "nested": [
                                                                                    {
                                                                                        "name": "file_data",
                                                                                        "spec": [
                                                                                            {
                                                                                                "name": "mime_type",
                                                                                                "type": "text",
                                                                                                "label": "Mime Type",
                                                                                                "required": false
                                                                                            },
                                                                                            {
                                                                                                "help": "You get this from the 'Upload a File' module.",
                                                                                                "name": "file_uri",
                                                                                                "type": "text",
                                                                                                "label": "File URI",
                                                                                                "required": false
                                                                                            }
                                                                                        ],
                                                                                        "type": "collection",
                                                                                        "label": "File Data",
                                                                                        "required": false
                                                                                    }
                                                                                ]
                                                                            },
                                                                            {
                                                                                "label": "Function Call",
                                                                                "value": "functionCall",
                                                                                "nested": [
                                                                                    {
                                                                                        "name": "functionCall",
                                                                                        "spec": [
                                                                                            {
                                                                                                "help": "The name of the function to call.",
                                                                                                "name": "name",
                                                                                                "type": "text",
                                                                                                "label": "Name",
                                                                                                "required": true,
                                                                                                "validate": {
                                                                                                    "max": 64
                                                                                                }
                                                                                            },
                                                                                            {
                                                                                                "help": "The function parameters and values in JSON object format.",
                                                                                                "name": "args",
                                                                                                "type": "json",
                                                                                                "label": "Arguments"
                                                                                            },
                                                                                            {
                                                                                                "help": "The unique ID of the function call.",
                                                                                                "name": "id",
                                                                                                "type": "text",
                                                                                                "label": "Function Call ID"
                                                                                            }
                                                                                        ],
                                                                                        "type": "collection",
                                                                                        "label": "Function Call"
                                                                                    }
                                                                                ]
                                                                            },
                                                                            {
                                                                                "label": "Function Response",
                                                                                "value": "functionResponse",
                                                                                "nested": [
                                                                                    {
                                                                                        "name": "functionResponse",
                                                                                        "spec": [
                                                                                            {
                                                                                                "help": "The name of the function to call.",
                                                                                                "name": "name",
                                                                                                "type": "text",
                                                                                                "label": "Name",
                                                                                                "required": true,
                                                                                                "validate": {
                                                                                                    "max": 64
                                                                                                }
                                                                                            },
                                                                                            {
                                                                                                "help": "The function response in JSON object format.",
                                                                                                "name": "response",
                                                                                                "type": "json",
                                                                                                "label": "Response",
                                                                                                "required": true
                                                                                            }
                                                                                        ],
                                                                                        "type": "collection",
                                                                                        "label": "Function Response"
                                                                                    }
                                                                                ]
                                                                            }
                                                                        ]
                                                                    },
                                                                    {
                                                                        "name": "thoughtSignature",
                                                                        "type": "text",
                                                                        "label": "Thought Signature"
                                                                    }
                                                                ],
                                                                "type": "array",
                                                                "label": "Parts"
                                                            }
                                                        ],
                                                        "type": "array",
                                                        "label": "Messages",
                                                        "required": true
                                                    },
                                                    {
                                                        "name": "system_instruction",
                                                        "spec": [
                                                            {
                                                                "name": "parts",
                                                                "spec": {
                                                                    "name": "value",
                                                                    "spec": [
                                                                        {
                                                                            "name": "text",
                                                                            "type": "text",
                                                                            "label": "Value"
                                                                        }
                                                                    ],
                                                                    "type": "collection",
                                                                    "label": "Prompt"
                                                                },
                                                                "type": "array",
                                                                "label": "Prompts"
                                                            }
                                                        ],
                                                        "type": "collection",
                                                        "label": "System Instructions"
                                                    },
                                                    {
                                                        "name": "safetySettings",
                                                        "spec": [
                                                            {
                                                                "name": "category",
                                                                "type": "select",
                                                                "label": "Category",
                                                                "options": [
                                                                    {
                                                                        "label": "Harassment content",
                                                                        "value": "HARM_CATEGORY_HARASSMENT"
                                                                    },
                                                                    {
                                                                        "label": "Hate speech and content",
                                                                        "value": "HARM_CATEGORY_HATE_SPEECH"
                                                                    },
                                                                    {
                                                                        "label": "Sexually explicit content.",
                                                                        "value": "HARM_CATEGORY_SEXUALLY_EXPLICIT"
                                                                    },
                                                                    {
                                                                        "label": "Dangerous content:",
                                                                        "value": "HARM_CATEGORY_DANGEROUS_CONTENT"
                                                                    }
                                                                ]
                                                            },
                                                            {
                                                                "name": "threshold",
                                                                "type": "select",
                                                                "label": "Threshold",
                                                                "options": [
                                                                    {
                                                                        "label": "Block low and above.",
                                                                        "value": "BLOCK_LOW_AND_ABOVE"
                                                                    },
                                                                    {
                                                                        "label": "Block medium and above.",
                                                                        "value": "BLOCK_MEDIUM_AND_ABOVE"
                                                                    },
                                                                    {
                                                                        "label": "Block only high.",
                                                                        "value": "BLOCK_ONLY_HIGH"
                                                                    },
                                                                    {
                                                                        "label": "Block none.",
                                                                        "value": "BLOCK_NONE"
                                                                    }
                                                                ]
                                                            }
                                                        ],
                                                        "type": "array",
                                                        "label": "Safety Settings"
                                                    },
                                                    {
                                                        "name": "generationConfig",
                                                        "spec": [
                                                            {
                                                                "name": "stopSequences",
                                                                "spec": {
                                                                    "name": "value",
                                                                    "type": "text",
                                                                    "label": "Stop Sequence"
                                                                },
                                                                "type": "array",
                                                                "label": "Stop Sequences"
                                                            },
                                                            {
                                                                "name": "responseModalities",
                                                                "type": "select",
                                                                "label": "Response Modalities",
                                                                "multiple": true,
                                                                "validate": {
                                                                    "enum": [
                                                                        "text",
                                                                        "image"
                                                                    ]
                                                                }
                                                            },
                                                            {
                                                                "name": "maxOutputTokens",
                                                                "type": "number",
                                                                "label": "Max Output Tokens"
                                                            },
                                                            {
                                                                "name": "temperature",
                                                                "type": "number",
                                                                "label": "Temperature",
                                                                "validate": {
                                                                    "max": 1,
                                                                    "min": 0
                                                                }
                                                            },
                                                            {
                                                                "name": "topP",
                                                                "type": "number",
                                                                "label": "Top P",
                                                                "validate": {
                                                                    "max": 1,
                                                                    "min": 0
                                                                }
                                                            },
                                                            {
                                                                "name": "topK",
                                                                "type": "number",
                                                                "label": "Top K"
                                                            },
                                                            {
                                                                "name": "thinkingConfig",
                                                                "spec": [
                                                                    {
                                                                        "name": "thinkingBudget",
                                                                        "type": "number",
                                                                        "label": "Thinking Budget"
                                                                    },
                                                                    {
                                                                        "name": "include_thoughts",
                                                                        "type": "boolean",
                                                                        "label": "Include Thoughts"
                                                                    },
                                                                    {
                                                                        "name": "thinking_level",
                                                                        "type": "select",
                                                                        "label": "Thinking Level",
                                                                        "validate": {
                                                                            "enum": [
                                                                                "low",
                                                                                "high"
                                                                            ]
                                                                        }
                                                                    }
                                                                ],
                                                                "type": "collection",
                                                                "label": "Thinking Config"
                                                            },
                                                            {
                                                                "name": "mediaResolution",
                                                                "type": "select",
                                                                "label": "Media Resolution",
                                                                "validate": {
                                                                    "enum": [
                                                                        "media_resolution_low",
                                                                        "media_resolution_medium",
                                                                        "media_resolution_high"
                                                                    ]
                                                                }
                                                            },
                                                            {
                                                                "name": "imageConfig",
                                                                "spec": [
                                                                    {
                                                                        "name": "imageSize",
                                                                        "type": "select",
                                                                        "label": "Image Size",
                                                                        "validate": {
                                                                            "enum": [
                                                                                "1K",
                                                                                "2K",
                                                                                "4K"
                                                                            ]
                                                                        }
                                                                    }
                                                                ],
                                                                "type": "collection",
                                                                "label": "Image Configuration"
                                                            },
                                                            {
                                                                "name": "responseMimeType",
                                                                "type": "select",
                                                                "label": "Response Format"
                                                            }
                                                        ],
                                                        "type": "collection",
                                                        "label": "Generation configurations"
                                                    },
                                                    {
                                                        "name": "tools",
                                                        "type": "any",
                                                        "label": "Tools"
                                                    },
                                                    {
                                                        "name": "tool_config",
                                                        "type": "any",
                                                        "label": "Tool Config"
                                                    },
                                                    {
                                                        "name": "function_declarations_context",
                                                        "type": "boolean",
                                                        "label": "Function Declarations Grounding"
                                                    },
                                                    {
                                                        "name": "url_context",
                                                        "type": "boolean",
                                                        "label": "URL Context"
                                                    },
                                                    {
                                                        "name": "google_search_context",
                                                        "type": "boolean",
                                                        "label": "Google Search Grounding"
                                                    },
                                                    {
                                                        "name": "code_execution",
                                                        "type": "boolean",
                                                        "label": "Code Execution"
                                                    },
                                                    {
                                                        "name": "google_maps_context",
                                                        "type": "boolean",
                                                        "label": "Google Maps Grounding"
                                                    },
                                                    {
                                                        "name": "file_search_store_context",
                                                        "type": "boolean",
                                                        "label": "File Search Store Context"
                                                    }
                                                ],
                                                "advanced": true
                                            }
                                        },
                                        {
                                            "id": 212,
                                            "module": "gemini-ai:createACompletionGeminiPro",
                                            "version": 1,
                                            "parameters": {
                                                "__IMTCONN__": 13301844
                                            },
                                            "mapper": {
                                                "model": "gemini-3-pro-preview",
                                                "contents": [
                                                    {
                                                        "role": "user",
                                                        "parts": [
                                                            {
                                                                "text": "You will receive a single JSON object produced by the Architect Crafter.\r\n\r\nAssume:\r\n- The architecture is correct.\r\n- The content is intentional.\r\n- The compliance_checks reflect whether transformation is allowed.\r\n\r\nTask:\r\nTransform each text field into its final, fluent email sentence,\r\nfollowing your system instructions exactly.\r\n\r\n\r\nINPUT\r\nArchitect output (raw JSON):\r\n{{211.result}}\r\n\n\nPerson First Name:\n{{1.`2`}}\n\r\n",
                                                                "type": "text"
                                                            }
                                                        ]
                                                    }
                                                ],
                                                "generationConfig": {
                                                    "imageConfig": {},
                                                    "temperature": "0.2",
                                                    "stopSequences": [
                                                        ""
                                                    ],
                                                    "thinkingConfig": {
                                                        "thinkingBudget": "512"
                                                    },
                                                    "maxOutputTokens": "4096"
                                                },
                                                "system_instruction": {
                                                    "parts": [
                                                        {
                                                            "text": "You are the Email Crafter Harmonizer inside the AOS system. Your role is strictly limited to STYLE HARMONIZATION. You are NOT a copywriter. You are NOT a strategist. You do NOT decide content. You receive a single, validated JSON render spec produced by the Architect Crafter. That JSON defines the full meaning, logic, and intent of the email. It is the absolute boundary of what you are allowed to express. You must not reinterpret, expand, optimize, or improve meaning. You must not add facts, signals, promises, timelines, numbers, examples, or angles. Your task is ONLY to rewrite wording so the email sounds like a human speaking directly to another professional. ──────────────────────────────── SECTION AUTHORITY RULES ──────────────────────────────── The email is composed of FLEXIBLE and TEMPLATE-GOVERNED sections. FLEXIBLE SECTIONS (controlled rewriting allowed): - Hook - Situation - Implication - Bridge In these sections: - Rewrite for spoken tone and clarity - Preserve exact meaning and causal logic - Keep sentences short and conversational - Apply certainty-aware hedging when required - Do not add, remove, or reinterpret information TEMPLATE-GOVERNED SECTIONS (human-written copy): - Contribution (Offer) - Details - CTA In these sections: - Treat the input as authoritative human copy - Preserve sentence intent, structure, and rhetorical function - Do NOT re-author, reframe, optimize, or “improve” - Do NOT strengthen, soften, or re-angle the message - Allowed changes ONLY: - Minor grammatical correction - Light cadence smoothing - Removal of mechanical phrasing - If a sentence already sounds human, output it unchanged If a line exists in the input, it must exist in the output. If a line is null, output an empty string. ──────────────────────────────── TONE & VOICE (HARD RULES) ──────────────────────────────── Write like you are talking directly to the lead. Tone must be: - Confident - Simple - Direct - Slightly emotional - Grounded in real-world logic - Peer-to-peer, executive The email must sound SPOKEN, not written. Avoid at all costs: - Formal tone - Polite fillers - Corporate language - Abstract wording - Decorative phrasing ──────────────────────────────── FORBIDDEN ELEMENTS (ZERO TOLERANCE) ──────────────────────────────── Never include: - Clichés - Corporate jargon (“solutions”, “leverage”, “frameworks”, etc.) - Buzzwords or fluff (“cutting-edge”, “powerful”, “streamlined”) - Generic praise - Generic claims - Formal connectors (“moreover”, “furthermore”, “consequently”) - Long first sentences - Hyphens or double dashes (“--”) - More than 3 examples anywhere - Any description of your own company in the icebreaker - Small talk (“hope you’re well”, “just reaching out”) - Urgency or scarcity language - Marketing voice or hype ──────────────────────────────── LINGUISTIC HABITS TO FOLLOW ──────────────────────────────── - Use short, spoken sentences - Use simple, concrete nouns (not abstractions) - Prefer verbs over adjectives - Use causal words: “because”, “if”, “when”, “so” - Keep emotional logic crisp and grounded - Keep specificity simple (max 2–3 specifics in Hook → Bridge) - No decorative or literary wording - Sentences must sound natural when read out loud ──────────────────────────────── GLOBAL HARD GUARDRAILS ──────────────────────────────── You must NEVER: - Add facts, signals, competitors, timelines, numbers, or claims - Introduce new angles, problems, or “reasons why now” - Change section order or collapse sections - List tools, playbooks, or tactical internals - Promise volumes unless explicitly supported - Claim “interested beforehand” unless explicitly allowed - Output uncertainty labels or explanations - Use exclamation marks ──────────────────────────────── CERTAINTY HANDLING ──────────────────────────────── Use the certainty_level provided in the Hook: - HIGH → Write directly, no hedging - MEDIUM → At most one soft hedge, only where strictly needed - LOW → Minimal hedging allowed: “it looks like”, “often”, “tends to”, “in many cases” Never hedge globally. Never stack hedges. Never weaken the core claim. ──────────────────────────────── STRUCTURE & RHYTHM ──────────────────────────────── - Exactly one sentence per paragraph - Prefer 8–14 words per sentence (Hook may be shorter) - Avoid commas when possible; split instead - Clear cause → effect flow ──────────────────────────────── FAIL CONDITIONS ──────────────────────────────── If any value in compliance_checks is false: - Do not harmonize - Return an error object - Do not attempt partial output ──────────────────────────────── FINAL SILENT CHECK ──────────────────────────────── Before outputting, confirm: - No new information was added - Meaning exactly matches input - Spoken tone, not written tone - No forbidden language - One sentence per paragraph - Templates preserved with minimal or zero change - CTA remains soft and low-friction y este es el user prompt   \n\n\n\nOUTPUT SCHEMA:\n{\r\n  \"email\": {\r\n    \"hook\": {\r\n      \"text\": \"string\"\r\n    },\r\n    \"situation\": {\r\n      \"text\": \"string\"\r\n    },\r\n    \"implication\": {\r\n      \"text\": \"string\"\r\n    },\r\n    \"bridge\": {\r\n      \"text\": \"string\"\r\n    },\r\n    \"contribution\": {\r\n      \"line_1\": \"string\",\r\n      \"line_2\": \"string\",\r\n      \"line_3\": \"string\"\r\n    },\r\n    \"details\": {\r\n      \"intro\": \"We can do this by:\",\r\n      \"lead_sourcing\": \"string\",\r\n      \"personalization\": \"string\",\r\n      \"execution\": \"string\",\r\n      \"dfy_statement\": \"string\"\r\n    },\r\n    \"cta\": {\r\n      \"sentence_1\": \"string\",\r\n      \"sentence_2\": \"string\",\r\n      \"sentence_3\": \"string\",\r\n      \"sentence_4\": \"string\"\r\n    }\r\n  }\r\n}\r\n\nOUTPUT REQUIREMENTS\r\n- Output MUST be exactly one JSON object that matches the required output format.\r\n- Do NOT wrap the output in code fences (```).\r\n- Do NOT output anything except the JSON object."
                                                        }
                                                    ]
                                                }
                                            },
                                            "metadata": {
                                                "designer": {
                                                    "x": 5065,
                                                    "y": -12,
                                                    "name": "Crafter Harmonizer (3proPrev) Ale-1"
                                                },
                                                "restore": {
                                                    "expect": {
                                                        "model": {
                                                            "mode": "chose",
                                                            "label": "gemini-3-pro-preview"
                                                        },
                                                        "contents": {
                                                            "mode": "chose",
                                                            "items": [
                                                                {
                                                                    "role": {
                                                                        "mode": "chose",
                                                                        "label": "User"
                                                                    },
                                                                    "parts": {
                                                                        "mode": "chose",
                                                                        "items": [
                                                                            {
                                                                                "type": {
                                                                                    "mode": "chose",
                                                                                    "label": "Text"
                                                                                }
                                                                            }
                                                                        ]
                                                                    }
                                                                }
                                                            ]
                                                        },
                                                        "url_context": {
                                                            "mode": "chose"
                                                        },
                                                        "code_execution": {
                                                            "mode": "chose"
                                                        },
                                                        "safetySettings": {
                                                            "mode": "chose"
                                                        },
                                                        "generationConfig": {
                                                            "nested": {
                                                                "imageConfig": {
                                                                    "nested": {
                                                                        "imageSize": {
                                                                            "mode": "chose",
                                                                            "label": "Empty"
                                                                        }
                                                                    }
                                                                },
                                                                "stopSequences": {
                                                                    "mode": "chose",
                                                                    "items": [
                                                                        null
                                                                    ],
                                                                    "collapsed": true
                                                                },
                                                                "thinkingConfig": {
                                                                    "nested": {
                                                                        "thinking_level": {
                                                                            "mode": "chose",
                                                                            "label": "Empty"
                                                                        },
                                                                        "include_thoughts": {
                                                                            "mode": "chose"
                                                                        }
                                                                    }
                                                                },
                                                                "mediaResolution": {
                                                                    "mode": "chose",
                                                                    "label": "Empty"
                                                                },
                                                                "responseMimeType": {
                                                                    "mode": "chose",
                                                                    "label": "Empty"
                                                                },
                                                                "responseModalities": {
                                                                    "mode": "chose"
                                                                }
                                                            }
                                                        },
                                                        "system_instruction": {
                                                            "nested": {
                                                                "parts": {
                                                                    "mode": "chose",
                                                                    "items": [
                                                                        null
                                                                    ]
                                                                }
                                                            }
                                                        },
                                                        "google_maps_context": {
                                                            "mode": "chose"
                                                        },
                                                        "google_search_context": {
                                                            "mode": "chose"
                                                        },
                                                        "file_search_store_context": {
                                                            "mode": "chose"
                                                        },
                                                        "function_declarations_context": {
                                                            "mode": "chose"
                                                        }
                                                    },
                                                    "parameters": {
                                                        "__IMTCONN__": {
                                                            "data": {
                                                                "scoped": "true",
                                                                "connection": "gemini-ai-q9zyjp"
                                                            },
                                                            "label": "GeminiConnection_AOS_2"
                                                        }
                                                    }
                                                },
                                                "parameters": [
                                                    {
                                                        "name": "__IMTCONN__",
                                                        "type": "account:gemini-ai-q9zyjp",
                                                        "label": "Connection",
                                                        "required": true
                                                    }
                                                ],
                                                "expect": [
                                                    {
                                                        "name": "model",
                                                        "type": "select",
                                                        "label": "AI Model",
                                                        "required": true
                                                    },
                                                    {
                                                        "name": "contents",
                                                        "spec": [
                                                            {
                                                                "name": "role",
                                                                "type": "select",
                                                                "label": "Role",
                                                                "options": [
                                                                    {
                                                                        "label": "User",
                                                                        "value": "user"
                                                                    },
                                                                    {
                                                                        "label": "Model",
                                                                        "value": "model"
                                                                    }
                                                                ]
                                                            },
                                                            {
                                                                "name": "parts",
                                                                "spec": [
                                                                    {
                                                                        "name": "type",
                                                                        "type": "select",
                                                                        "label": "Message Type",
                                                                        "options": [
                                                                            {
                                                                                "label": "Text",
                                                                                "value": "text",
                                                                                "nested": [
                                                                                    {
                                                                                        "name": "text",
                                                                                        "type": "text",
                                                                                        "label": "Text",
                                                                                        "required": false
                                                                                    }
                                                                                ]
                                                                            },
                                                                            {
                                                                                "label": "File",
                                                                                "value": "file",
                                                                                "nested": [
                                                                                    {
                                                                                        "name": "file_data",
                                                                                        "spec": [
                                                                                            {
                                                                                                "name": "mime_type",
                                                                                                "type": "text",
                                                                                                "label": "Mime Type",
                                                                                                "required": false
                                                                                            },
                                                                                            {
                                                                                                "help": "You get this from the 'Upload a File' module.",
                                                                                                "name": "file_uri",
                                                                                                "type": "text",
                                                                                                "label": "File URI",
                                                                                                "required": false
                                                                                            }
                                                                                        ],
                                                                                        "type": "collection",
                                                                                        "label": "File Data",
                                                                                        "required": false
                                                                                    }
                                                                                ]
                                                                            },
                                                                            {
                                                                                "label": "Function Call",
                                                                                "value": "functionCall",
                                                                                "nested": [
                                                                                    {
                                                                                        "name": "functionCall",
                                                                                        "spec": [
                                                                                            {
                                                                                                "help": "The name of the function to call.",
                                                                                                "name": "name",
                                                                                                "type": "text",
                                                                                                "label": "Name",
                                                                                                "required": true,
                                                                                                "validate": {
                                                                                                    "max": 64
                                                                                                }
                                                                                            },
                                                                                            {
                                                                                                "help": "The function parameters and values in JSON object format.",
                                                                                                "name": "args",
                                                                                                "type": "json",
                                                                                                "label": "Arguments"
                                                                                            },
                                                                                            {
                                                                                                "help": "The unique ID of the function call.",
                                                                                                "name": "id",
                                                                                                "type": "text",
                                                                                                "label": "Function Call ID"
                                                                                            }
                                                                                        ],
                                                                                        "type": "collection",
                                                                                        "label": "Function Call"
                                                                                    }
                                                                                ]
                                                                            },
                                                                            {
                                                                                "label": "Function Response",
                                                                                "value": "functionResponse",
                                                                                "nested": [
                                                                                    {
                                                                                        "name": "functionResponse",
                                                                                        "spec": [
                                                                                            {
                                                                                                "help": "The name of the function to call.",
                                                                                                "name": "name",
                                                                                                "type": "text",
                                                                                                "label": "Name",
                                                                                                "required": true,
                                                                                                "validate": {
                                                                                                    "max": 64
                                                                                                }
                                                                                            },
                                                                                            {
                                                                                                "help": "The function response in JSON object format.",
                                                                                                "name": "response",
                                                                                                "type": "json",
                                                                                                "label": "Response",
                                                                                                "required": true
                                                                                            }
                                                                                        ],
                                                                                        "type": "collection",
                                                                                        "label": "Function Response"
                                                                                    }
                                                                                ]
                                                                            }
                                                                        ]
                                                                    },
                                                                    {
                                                                        "name": "thoughtSignature",
                                                                        "type": "text",
                                                                        "label": "Thought Signature"
                                                                    }
                                                                ],
                                                                "type": "array",
                                                                "label": "Parts"
                                                            }
                                                        ],
                                                        "type": "array",
                                                        "label": "Messages",
                                                        "required": true
                                                    },
                                                    {
                                                        "name": "system_instruction",
                                                        "spec": [
                                                            {
                                                                "name": "parts",
                                                                "spec": {
                                                                    "name": "value",
                                                                    "spec": [
                                                                        {
                                                                            "name": "text",
                                                                            "type": "text",
                                                                            "label": "Value"
                                                                        }
                                                                    ],
                                                                    "type": "collection",
                                                                    "label": "Prompt"
                                                                },
                                                                "type": "array",
                                                                "label": "Prompts"
                                                            }
                                                        ],
                                                        "type": "collection",
                                                        "label": "System Instructions"
                                                    },
                                                    {
                                                        "name": "safetySettings",
                                                        "spec": [
                                                            {
                                                                "name": "category",
                                                                "type": "select",
                                                                "label": "Category",
                                                                "options": [
                                                                    {
                                                                        "label": "Harassment content",
                                                                        "value": "HARM_CATEGORY_HARASSMENT"
                                                                    },
                                                                    {
                                                                        "label": "Hate speech and content",
                                                                        "value": "HARM_CATEGORY_HATE_SPEECH"
                                                                    },
                                                                    {
                                                                        "label": "Sexually explicit content.",
                                                                        "value": "HARM_CATEGORY_SEXUALLY_EXPLICIT"
                                                                    },
                                                                    {
                                                                        "label": "Dangerous content:",
                                                                        "value": "HARM_CATEGORY_DANGEROUS_CONTENT"
                                                                    }
                                                                ]
                                                            },
                                                            {
                                                                "name": "threshold",
                                                                "type": "select",
                                                                "label": "Threshold",
                                                                "options": [
                                                                    {
                                                                        "label": "Block low and above.",
                                                                        "value": "BLOCK_LOW_AND_ABOVE"
                                                                    },
                                                                    {
                                                                        "label": "Block medium and above.",
                                                                        "value": "BLOCK_MEDIUM_AND_ABOVE"
                                                                    },
                                                                    {
                                                                        "label": "Block only high.",
                                                                        "value": "BLOCK_ONLY_HIGH"
                                                                    },
                                                                    {
                                                                        "label": "Block none.",
                                                                        "value": "BLOCK_NONE"
                                                                    }
                                                                ]
                                                            }
                                                        ],
                                                        "type": "array",
                                                        "label": "Safety Settings"
                                                    },
                                                    {
                                                        "name": "generationConfig",
                                                        "spec": [
                                                            {
                                                                "name": "stopSequences",
                                                                "spec": {
                                                                    "name": "value",
                                                                    "type": "text",
                                                                    "label": "Stop Sequence"
                                                                },
                                                                "type": "array",
                                                                "label": "Stop Sequences"
                                                            },
                                                            {
                                                                "name": "responseModalities",
                                                                "type": "select",
                                                                "label": "Response Modalities",
                                                                "multiple": true,
                                                                "validate": {
                                                                    "enum": [
                                                                        "text",
                                                                        "image"
                                                                    ]
                                                                }
                                                            },
                                                            {
                                                                "name": "maxOutputTokens",
                                                                "type": "number",
                                                                "label": "Max Output Tokens"
                                                            },
                                                            {
                                                                "name": "temperature",
                                                                "type": "number",
                                                                "label": "Temperature",
                                                                "validate": {
                                                                    "max": 1,
                                                                    "min": 0
                                                                }
                                                            },
                                                            {
                                                                "name": "topP",
                                                                "type": "number",
                                                                "label": "Top P",
                                                                "validate": {
                                                                    "max": 1,
                                                                    "min": 0
                                                                }
                                                            },
                                                            {
                                                                "name": "topK",
                                                                "type": "number",
                                                                "label": "Top K"
                                                            },
                                                            {
                                                                "name": "thinkingConfig",
                                                                "spec": [
                                                                    {
                                                                        "name": "thinkingBudget",
                                                                        "type": "number",
                                                                        "label": "Thinking Budget"
                                                                    },
                                                                    {
                                                                        "name": "include_thoughts",
                                                                        "type": "boolean",
                                                                        "label": "Include Thoughts"
                                                                    },
                                                                    {
                                                                        "name": "thinking_level",
                                                                        "type": "select",
                                                                        "label": "Thinking Level",
                                                                        "validate": {
                                                                            "enum": [
                                                                                "low",
                                                                                "high"
                                                                            ]
                                                                        }
                                                                    }
                                                                ],
                                                                "type": "collection",
                                                                "label": "Thinking Config"
                                                            },
                                                            {
                                                                "name": "mediaResolution",
                                                                "type": "select",
                                                                "label": "Media Resolution",
                                                                "validate": {
                                                                    "enum": [
                                                                        "media_resolution_low",
                                                                        "media_resolution_medium",
                                                                        "media_resolution_high"
                                                                    ]
                                                                }
                                                            },
                                                            {
                                                                "name": "imageConfig",
                                                                "spec": [
                                                                    {
                                                                        "name": "imageSize",
                                                                        "type": "select",
                                                                        "label": "Image Size",
                                                                        "validate": {
                                                                            "enum": [
                                                                                "1K",
                                                                                "2K",
                                                                                "4K"
                                                                            ]
                                                                        }
                                                                    }
                                                                ],
                                                                "type": "collection",
                                                                "label": "Image Configuration"
                                                            },
                                                            {
                                                                "name": "responseMimeType",
                                                                "type": "select",
                                                                "label": "Response Format"
                                                            }
                                                        ],
                                                        "type": "collection",
                                                        "label": "Generation configurations"
                                                    },
                                                    {
                                                        "name": "tools",
                                                        "type": "any",
                                                        "label": "Tools"
                                                    },
                                                    {
                                                        "name": "tool_config",
                                                        "type": "any",
                                                        "label": "Tool Config"
                                                    },
                                                    {
                                                        "name": "function_declarations_context",
                                                        "type": "boolean",
                                                        "label": "Function Declarations Grounding"
                                                    },
                                                    {
                                                        "name": "url_context",
                                                        "type": "boolean",
                                                        "label": "URL Context"
                                                    },
                                                    {
                                                        "name": "google_search_context",
                                                        "type": "boolean",
                                                        "label": "Google Search Grounding"
                                                    },
                                                    {
                                                        "name": "code_execution",
                                                        "type": "boolean",
                                                        "label": "Code Execution"
                                                    },
                                                    {
                                                        "name": "google_maps_context",
                                                        "type": "boolean",
                                                        "label": "Google Maps Grounding"
                                                    },
                                                    {
                                                        "name": "file_search_store_context",
                                                        "type": "boolean",
                                                        "label": "File Search Store Context"
                                                    }
                                                ],
                                                "advanced": true
                                            }
                                        },
                                        {
                                            "id": 221,
                                            "module": "gemini-ai:createACompletionGeminiPro",
                                            "version": 1,
                                            "parameters": {
                                                "__IMTCONN__": 13301844
                                            },
                                            "mapper": {
                                                "model": "gemini-3-pro-preview",
                                                "contents": [
                                                    {
                                                        "role": "user",
                                                        "parts": [
                                                            {
                                                                "text": "You are given two cold email drafts written for the SAME lead.\r\nBoth emails communicate the SAME angle and offer.\r\nDifferences are only in wording, flow, and phrasing.\r\n\r\nYour task:\r\n- Read both emails.\r\n- Merge them into ONE final email.\r\n- Keep the strongest phrasing.\r\n- Remove repetition, friction, and awkward language.\r\n- Enforce the required templates exactly where applicable.\r\n\r\nLEAD CONTEXT (for judgment only, not rewriting facts):\r\n- Persona summary:\r\n  {{184.result}}\r\n\r\n- Lead Context:\r\n{{194.result}}  \r\n\r\nEMAIL VERSION A:\r\n{{203.result.result.draft_email}}\r\n\r\nEMAIL VERSION B:\r\n{{212.result.email}}\r\n\r\nOUTPUT REQUIREMENTS\r\n- Output MUST be exactly one JSON object that matches the required output format.\r\n- Do NOT wrap the output in code fences (```).\r\n- Do NOT output anything except the JSON object.\n\n\n{\r\n  \"final_email\": {\r\n    \"subject\": \"string\",\r\n    \"body\": \"string\"\r\n  },\r\n  \"editorial_notes\": {\r\n    \"main_improvement\": \"string\",\r\n    \"removed_issues\": [\r\n      \"string\"\r\n    ],\r\n    \"confidence_level\": \"HIGH | MEDIUM\"\r\n  }\r\n}\r\n\r\n",
                                                                "type": "text"
                                                            }
                                                        ]
                                                    }
                                                ],
                                                "generationConfig": {
                                                    "imageConfig": {},
                                                    "temperature": "0.2",
                                                    "stopSequences": [
                                                        ""
                                                    ],
                                                    "thinkingConfig": {
                                                        "thinkingBudget": "512"
                                                    },
                                                    "maxOutputTokens": "4096"
                                                },
                                                "system_instruction": {
                                                    "parts": [
                                                        {
                                                            "text": "You are the AOS Final Email Synthesizer (Human Editorial Pass).\r\n\r\nROLE\r\nYou are a human-level editorial judge and synthesizer.\r\nYou are NOT a copywriter, architect, or strategist.\r\n\r\nYour job is to read TWO nearly-correct cold emails written for the SAME lead,\r\nand produce ONE final email that feels natural, obvious, and easy to read.\r\n\r\nMENTAL MODEL\r\nRead like the lead would:\r\nQuick skim. Phone screen. Low patience.\r\nWould this make them think: “Yeah — this makes sense”?\r\n\r\nTHIS IS NOT SELECTION\r\n- You are NOT choosing which email is better.\r\n- Assume BOTH are ~90% correct.\r\n- Your task is to MERGE, CLEAN, and SHARPEN.\r\n\r\nCRITICAL TEMPLATE ENFORCEMENT (NON-NEGOTIABLE)\r\n\r\nYou MUST enforce the following templates exactly.\r\n\r\n1) CONTRIBUTION\r\n- Line 1: free (editorial merge allowed)\r\n- Line 2: optional, ONLY if supported by inputs. If included, must be verbatim:\r\n  \"All of them interested in your offer beforehand.\"\r\n- Line 3: optional, ONLY if region/scope is defined and feasible. If included, must be verbatim:\r\n  \"And we can replicate this across the [entire opreating region]/[entire scope], at scale, automatically.\"\r\n\r\nYou may decide WHETHER to include optional lines.\r\nYou may NOT rewrite them.\r\n\r\n2) DETAILS\r\nIf included, DETAILS MUST be exactly:\r\n\r\n\"We can do this by:\r\n- Finding and qualifying [insert ICP] at scale\r\n- Automating Deep Research for every Lead to tailor each approach\r\n- Writing deeply personalized and relevant emails, designed to spark real interest\r\n- Managing all outbound campaigns end-to-end\r\n\r\nWe'll take care of the whole process, (company name) will just have to close all the new deals.\"\r\n\r\nOnly allowed substitutions:\r\n- (ICP)\r\n- (company name)\r\n\r\nNo edits, no paraphrasing, no omissions.\r\n\r\n3) CTA\r\nIf included, CTA MUST be exactly:\r\n\r\n\"If you like the idea, I’d love to show you more details over a quick 10-minute demo.\n\r\nThere, I’ll prepare a sample of 50 leads, all with tailored messages.\n\r\nThat way, you can see the quality of our results first.\n\r\nIf you’re open to it, let me know when it’s the best time for the demo.\n\"\r\n\r\nNo edits allowed.\r\n\r\nEDITORIAL FREEDOM (ONLY HERE)\r\nYou may editorially improve:\r\n- Subject line\r\n- Hook\r\n- Situation\r\n- Implication\r\n- Bridge\r\n- Contribution Line 1\r\n\r\nABSOLUTE RULES\r\n- Do NOT invent facts.\r\n- Do NOT add new promises.\r\n- Do NOT change angle or offer.\r\n- Do NOT add urgency or scarcity.\r\n- Do NOT alter templates.\r\n- Short, spoken sentences.\r\n- Remove fluff, repetition, and AI-ish phrasing.\r\n\r\nFINAL CHECK\r\nBefore finalizing, ask:\r\n“Would this email feel obvious, clean, and credible to the lead?”\r\n​"
                                                        }
                                                    ]
                                                }
                                            },
                                            "metadata": {
                                                "designer": {
                                                    "x": 5540,
                                                    "y": -14,
                                                    "name": "Crafter Patch (3proPrev) 2"
                                                },
                                                "restore": {
                                                    "expect": {
                                                        "model": {
                                                            "mode": "chose",
                                                            "label": "gemini-3-pro-preview"
                                                        },
                                                        "contents": {
                                                            "mode": "chose",
                                                            "items": [
                                                                {
                                                                    "role": {
                                                                        "mode": "chose",
                                                                        "label": "User"
                                                                    },
                                                                    "parts": {
                                                                        "mode": "chose",
                                                                        "items": [
                                                                            {
                                                                                "type": {
                                                                                    "mode": "chose",
                                                                                    "label": "Text"
                                                                                }
                                                                            }
                                                                        ]
                                                                    }
                                                                }
                                                            ]
                                                        },
                                                        "url_context": {
                                                            "mode": "chose"
                                                        },
                                                        "code_execution": {
                                                            "mode": "chose"
                                                        },
                                                        "safetySettings": {
                                                            "mode": "chose"
                                                        },
                                                        "generationConfig": {
                                                            "nested": {
                                                                "imageConfig": {
                                                                    "nested": {
                                                                        "imageSize": {
                                                                            "mode": "chose",
                                                                            "label": "Empty"
                                                                        }
                                                                    }
                                                                },
                                                                "stopSequences": {
                                                                    "mode": "chose",
                                                                    "items": [
                                                                        null
                                                                    ],
                                                                    "collapsed": true
                                                                },
                                                                "thinkingConfig": {
                                                                    "nested": {
                                                                        "thinking_level": {
                                                                            "mode": "chose",
                                                                            "label": "Empty"
                                                                        },
                                                                        "include_thoughts": {
                                                                            "mode": "chose"
                                                                        }
                                                                    }
                                                                },
                                                                "mediaResolution": {
                                                                    "mode": "chose",
                                                                    "label": "Empty"
                                                                },
                                                                "responseMimeType": {
                                                                    "mode": "chose",
                                                                    "label": "Empty"
                                                                },
                                                                "responseModalities": {
                                                                    "mode": "chose"
                                                                }
                                                            }
                                                        },
                                                        "system_instruction": {
                                                            "nested": {
                                                                "parts": {
                                                                    "mode": "chose",
                                                                    "items": [
                                                                        null
                                                                    ]
                                                                }
                                                            }
                                                        },
                                                        "google_maps_context": {
                                                            "mode": "chose"
                                                        },
                                                        "google_search_context": {
                                                            "mode": "chose"
                                                        },
                                                        "file_search_store_context": {
                                                            "mode": "chose"
                                                        },
                                                        "function_declarations_context": {
                                                            "mode": "chose"
                                                        }
                                                    },
                                                    "parameters": {
                                                        "__IMTCONN__": {
                                                            "data": {
                                                                "scoped": "true",
                                                                "connection": "gemini-ai-q9zyjp"
                                                            },
                                                            "label": "GeminiConnection_AOS_2"
                                                        }
                                                    }
                                                },
                                                "parameters": [
                                                    {
                                                        "name": "__IMTCONN__",
                                                        "type": "account:gemini-ai-q9zyjp",
                                                        "label": "Connection",
                                                        "required": true
                                                    }
                                                ],
                                                "expect": [
                                                    {
                                                        "name": "model",
                                                        "type": "select",
                                                        "label": "AI Model",
                                                        "required": true
                                                    },
                                                    {
                                                        "name": "contents",
                                                        "spec": [
                                                            {
                                                                "name": "role",
                                                                "type": "select",
                                                                "label": "Role",
                                                                "options": [
                                                                    {
                                                                        "label": "User",
                                                                        "value": "user"
                                                                    },
                                                                    {
                                                                        "label": "Model",
                                                                        "value": "model"
                                                                    }
                                                                ]
                                                            },
                                                            {
                                                                "name": "parts",
                                                                "spec": [
                                                                    {
                                                                        "name": "type",
                                                                        "type": "select",
                                                                        "label": "Message Type",
                                                                        "options": [
                                                                            {
                                                                                "label": "Text",
                                                                                "value": "text",
                                                                                "nested": [
                                                                                    {
                                                                                        "name": "text",
                                                                                        "type": "text",
                                                                                        "label": "Text",
                                                                                        "required": false
                                                                                    }
                                                                                ]
                                                                            },
                                                                            {
                                                                                "label": "File",
                                                                                "value": "file",
                                                                                "nested": [
                                                                                    {
                                                                                        "name": "file_data",
                                                                                        "spec": [
                                                                                            {
                                                                                                "name": "mime_type",
                                                                                                "type": "text",
                                                                                                "label": "Mime Type",
                                                                                                "required": false
                                                                                            },
                                                                                            {
                                                                                                "help": "You get this from the 'Upload a File' module.",
                                                                                                "name": "file_uri",
                                                                                                "type": "text",
                                                                                                "label": "File URI",
                                                                                                "required": false
                                                                                            }
                                                                                        ],
                                                                                        "type": "collection",
                                                                                        "label": "File Data",
                                                                                        "required": false
                                                                                    }
                                                                                ]
                                                                            },
                                                                            {
                                                                                "label": "Function Call",
                                                                                "value": "functionCall",
                                                                                "nested": [
                                                                                    {
                                                                                        "name": "functionCall",
                                                                                        "spec": [
                                                                                            {
                                                                                                "help": "The name of the function to call.",
                                                                                                "name": "name",
                                                                                                "type": "text",
                                                                                                "label": "Name",
                                                                                                "required": true,
                                                                                                "validate": {
                                                                                                    "max": 64
                                                                                                }
                                                                                            },
                                                                                            {
                                                                                                "help": "The function parameters and values in JSON object format.",
                                                                                                "name": "args",
                                                                                                "type": "json",
                                                                                                "label": "Arguments"
                                                                                            },
                                                                                            {
                                                                                                "help": "The unique ID of the function call.",
                                                                                                "name": "id",
                                                                                                "type": "text",
                                                                                                "label": "Function Call ID"
                                                                                            }
                                                                                        ],
                                                                                        "type": "collection",
                                                                                        "label": "Function Call"
                                                                                    }
                                                                                ]
                                                                            },
                                                                            {
                                                                                "label": "Function Response",
                                                                                "value": "functionResponse",
                                                                                "nested": [
                                                                                    {
                                                                                        "name": "functionResponse",
                                                                                        "spec": [
                                                                                            {
                                                                                                "help": "The name of the function to call.",
                                                                                                "name": "name",
                                                                                                "type": "text",
                                                                                                "label": "Name",
                                                                                                "required": true,
                                                                                                "validate": {
                                                                                                    "max": 64
                                                                                                }
                                                                                            },
                                                                                            {
                                                                                                "help": "The function response in JSON object format.",
                                                                                                "name": "response",
                                                                                                "type": "json",
                                                                                                "label": "Response",
                                                                                                "required": true
                                                                                            }
                                                                                        ],
                                                                                        "type": "collection",
                                                                                        "label": "Function Response"
                                                                                    }
                                                                                ]
                                                                            }
                                                                        ]
                                                                    },
                                                                    {
                                                                        "name": "thoughtSignature",
                                                                        "type": "text",
                                                                        "label": "Thought Signature"
                                                                    }
                                                                ],
                                                                "type": "array",
                                                                "label": "Parts"
                                                            }
                                                        ],
                                                        "type": "array",
                                                        "label": "Messages",
                                                        "required": true
                                                    },
                                                    {
                                                        "name": "system_instruction",
                                                        "spec": [
                                                            {
                                                                "name": "parts",
                                                                "spec": {
                                                                    "name": "value",
                                                                    "spec": [
                                                                        {
                                                                            "name": "text",
                                                                            "type": "text",
                                                                            "label": "Value"
                                                                        }
                                                                    ],
                                                                    "type": "collection",
                                                                    "label": "Prompt"
                                                                },
                                                                "type": "array",
                                                                "label": "Prompts"
                                                            }
                                                        ],
                                                        "type": "collection",
                                                        "label": "System Instructions"
                                                    },
                                                    {
                                                        "name": "safetySettings",
                                                        "spec": [
                                                            {
                                                                "name": "category",
                                                                "type": "select",
                                                                "label": "Category",
                                                                "options": [
                                                                    {
                                                                        "label": "Harassment content",
                                                                        "value": "HARM_CATEGORY_HARASSMENT"
                                                                    },
                                                                    {
                                                                        "label": "Hate speech and content",
                                                                        "value": "HARM_CATEGORY_HATE_SPEECH"
                                                                    },
                                                                    {
                                                                        "label": "Sexually explicit content.",
                                                                        "value": "HARM_CATEGORY_SEXUALLY_EXPLICIT"
                                                                    },
                                                                    {
                                                                        "label": "Dangerous content:",
                                                                        "value": "HARM_CATEGORY_DANGEROUS_CONTENT"
                                                                    }
                                                                ]
                                                            },
                                                            {
                                                                "name": "threshold",
                                                                "type": "select",
                                                                "label": "Threshold",
                                                                "options": [
                                                                    {
                                                                        "label": "Block low and above.",
                                                                        "value": "BLOCK_LOW_AND_ABOVE"
                                                                    },
                                                                    {
                                                                        "label": "Block medium and above.",
                                                                        "value": "BLOCK_MEDIUM_AND_ABOVE"
                                                                    },
                                                                    {
                                                                        "label": "Block only high.",
                                                                        "value": "BLOCK_ONLY_HIGH"
                                                                    },
                                                                    {
                                                                        "label": "Block none.",
                                                                        "value": "BLOCK_NONE"
                                                                    }
                                                                ]
                                                            }
                                                        ],
                                                        "type": "array",
                                                        "label": "Safety Settings"
                                                    },
                                                    {
                                                        "name": "generationConfig",
                                                        "spec": [
                                                            {
                                                                "name": "stopSequences",
                                                                "spec": {
                                                                    "name": "value",
                                                                    "type": "text",
                                                                    "label": "Stop Sequence"
                                                                },
                                                                "type": "array",
                                                                "label": "Stop Sequences"
                                                            },
                                                            {
                                                                "name": "responseModalities",
                                                                "type": "select",
                                                                "label": "Response Modalities",
                                                                "multiple": true,
                                                                "validate": {
                                                                    "enum": [
                                                                        "text",
                                                                        "image"
                                                                    ]
                                                                }
                                                            },
                                                            {
                                                                "name": "maxOutputTokens",
                                                                "type": "number",
                                                                "label": "Max Output Tokens"
                                                            },
                                                            {
                                                                "name": "temperature",
                                                                "type": "number",
                                                                "label": "Temperature",
                                                                "validate": {
                                                                    "max": 1,
                                                                    "min": 0
                                                                }
                                                            },
                                                            {
                                                                "name": "topP",
                                                                "type": "number",
                                                                "label": "Top P",
                                                                "validate": {
                                                                    "max": 1,
                                                                    "min": 0
                                                                }
                                                            },
                                                            {
                                                                "name": "topK",
                                                                "type": "number",
                                                                "label": "Top K"
                                                            },
                                                            {
                                                                "name": "thinkingConfig",
                                                                "spec": [
                                                                    {
                                                                        "name": "thinkingBudget",
                                                                        "type": "number",
                                                                        "label": "Thinking Budget"
                                                                    },
                                                                    {
                                                                        "name": "include_thoughts",
                                                                        "type": "boolean",
                                                                        "label": "Include Thoughts"
                                                                    },
                                                                    {
                                                                        "name": "thinking_level",
                                                                        "type": "select",
                                                                        "label": "Thinking Level",
                                                                        "validate": {
                                                                            "enum": [
                                                                                "low",
                                                                                "high"
                                                                            ]
                                                                        }
                                                                    }
                                                                ],
                                                                "type": "collection",
                                                                "label": "Thinking Config"
                                                            },
                                                            {
                                                                "name": "mediaResolution",
                                                                "type": "select",
                                                                "label": "Media Resolution",
                                                                "validate": {
                                                                    "enum": [
                                                                        "media_resolution_low",
                                                                        "media_resolution_medium",
                                                                        "media_resolution_high"
                                                                    ]
                                                                }
                                                            },
                                                            {
                                                                "name": "imageConfig",
                                                                "spec": [
                                                                    {
                                                                        "name": "imageSize",
                                                                        "type": "select",
                                                                        "label": "Image Size",
                                                                        "validate": {
                                                                            "enum": [
                                                                                "1K",
                                                                                "2K",
                                                                                "4K"
                                                                            ]
                                                                        }
                                                                    }
                                                                ],
                                                                "type": "collection",
                                                                "label": "Image Configuration"
                                                            },
                                                            {
                                                                "name": "responseMimeType",
                                                                "type": "select",
                                                                "label": "Response Format"
                                                            }
                                                        ],
                                                        "type": "collection",
                                                        "label": "Generation configurations"
                                                    },
                                                    {
                                                        "name": "tools",
                                                        "type": "any",
                                                        "label": "Tools"
                                                    },
                                                    {
                                                        "name": "tool_config",
                                                        "type": "any",
                                                        "label": "Tool Config"
                                                    },
                                                    {
                                                        "name": "function_declarations_context",
                                                        "type": "boolean",
                                                        "label": "Function Declarations Grounding"
                                                    },
                                                    {
                                                        "name": "url_context",
                                                        "type": "boolean",
                                                        "label": "URL Context"
                                                    },
                                                    {
                                                        "name": "google_search_context",
                                                        "type": "boolean",
                                                        "label": "Google Search Grounding"
                                                    },
                                                    {
                                                        "name": "code_execution",
                                                        "type": "boolean",
                                                        "label": "Code Execution"
                                                    },
                                                    {
                                                        "name": "google_maps_context",
                                                        "type": "boolean",
                                                        "label": "Google Maps Grounding"
                                                    },
                                                    {
                                                        "name": "file_search_store_context",
                                                        "type": "boolean",
                                                        "label": "File Search Store Context"
                                                    }
                                                ],
                                                "advanced": true
                                            }
                                        }
                                    ]
                                },
                                {
                                    "flow": [
                                        {
                                            "id": null,
                                            "module": "placeholder:Placeholder",
                                            "filter": {
                                                "name": "Feasibility no-FIT",
                                                "conditions": [
                                                    [
                                                        {
                                                            "a": "{{189.result.final_verdict.result}}",
                                                            "b": "FIT",
                                                            "o": "text:notequal"
                                                        }
                                                    ]
                                                ]
                                            },
                                            "metadata": {
                                                "designer": {
                                                    "x": 1890,
                                                    "y": -362
                                                }
                                            }
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    "flow": [
                        {
                            "id": null,
                            "module": "placeholder:Placeholder",
                            "filter": {
                                "name": "COMPANY STORAGE",
                                "conditions": [
                                    [
                                        {
                                            "a": "{{205.result.hit_filter.verdict}}",
                                            "b": "STORAGE",
                                            "o": "text:equal"
                                        }
                                    ]
                                ]
                            },
                            "metadata": {
                                "designer": {
                                    "x": 928,
                                    "y": -339
                                }
                            }
                        }
                    ]
                }
            ]
        }
    ],
    "metadata": {
        "instant": false,
        "version": 1,
        "scenario": {
            "roundtrips": 1,
            "maxErrors": 3,
            "autoCommit": true,
            "autoCommitTriggerLast": true,
            "sequential": false,
            "slots": null,
            "confidential": false,
            "dataloss": false,
            "dlq": false,
            "freshVariables": false
        },
        "designer": {
            "orphans": []
        },
        "zone": "eu2.make.com",
        "notes": []
    }
}